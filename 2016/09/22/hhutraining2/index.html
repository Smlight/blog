<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>HHUACM 综合训练2 | ——Light!</title><link rel="stylesheet" type="text/css" href="/blog/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/blog/favicon.ico"><link rel="apple-touch-icon" href="/blog/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/blog/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/blog/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">HHUACM 综合训练2</h1><a id="logo" href="/blog/.">——Light!</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/blog/."><i class="fa fa-home"> 首页</i></a><a href="/blog/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/blog/about/"><i class="fa fa-user"> 关于</i></a><a href="/blog/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">HHUACM 综合训练2</h1><div class="post-meta">Sep 22, 2016<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="post-content"><p>本次综合训练主要是2013年的大连online的题目，有难有易，其中题意不太清楚和要求非常高的题目就直接剔除了。这样题数少了，于是又加了2题2016年大连online的我觉得挺不错的题目。后来发现知识点有点重叠，不过训练一下也无妨。</p>
<h3 id="Find-the-maximum"><a href="#Find-the-maximum" class="headerlink" title="Find the maximum"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=4002" target="_blank" rel="noopener">Find the maximum</a></h3><p>题意：给出 $N$ 求出最小的 $2\leq n\leq N$ 使得 $n/\varphi(n)$ 最大。<br>题解：做这题首先要知道 $\varphi(n)$ 的计算式（不作证明）: $\varphi(n)=n(1-\frac{1}{p_{1}})(1-\frac{1}{p_{2}})…(1-\frac{1}{p_{k}})$<br>$$\therefore n/\varphi(n)=\frac{1}{(1-\frac{1}{p_{1}})(1-\frac{1}{p_{2}})…(1-\frac{1}{p_{k}})}$$ $$=\frac{1}{\frac{p_1-1}{p_1}\frac{p_2-1}{p_2}…\frac{p_k-1}{p_k}}$$ $$=\frac{p_1}{p_1-1}\frac{p_2}{p_2-1}…\frac{p_k}{p_k-1}$$ $$=(1+\frac{1}{p_1-1})(1+\frac{1}{p_2-1})…(1+\frac{1}{p_k-1})$$<br>其中 $p_1,p_2,…p_k$ 为 $n$ 的质因子。（考虑到大家提交的很多代码都是打表，这里我写的比较详细）</p>
<p>明显地：</p>
<ol>
<li>$p_1,p_2,…p_k$ 越小，$n$ 越小，而且 $n/\varphi(n)$ 越大；</li>
<li>$p_1,p_2,…p_k$ 的次方数没有贡献。<br>所以，只需要把最小的那些质数乘起来，就能得到满足条件的 $n$<br>为了增加(编程)难度，这题又加入了高精度，套用模板，代码如下：</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div></pre></td><td class="code"><pre><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">using namespace std;</div><div class="line"></div><div class="line">const int MAX=1000000;</div><div class="line">int pr[100000],pt=0;</div><div class="line">bool f[MAX];</div><div class="line">char s[110];</div><div class="line">struct BigInt &#123;</div><div class="line">    const static int mod = 10000;</div><div class="line">    const static int DLEN = 4;</div><div class="line">    int a[100],len;</div><div class="line">    BigInt() &#123;</div><div class="line">        memset(a,0,sizeof(a));</div><div class="line">        len = 1;</div><div class="line">    &#125;</div><div class="line">    BigInt(int v) &#123;</div><div class="line">        memset(a,0,sizeof(a));</div><div class="line">        len = 0;</div><div class="line">        do &#123;</div><div class="line">            a[len++] = v%mod;</div><div class="line">            v /= mod;</div><div class="line">        &#125; while(v);</div><div class="line">    &#125;</div><div class="line">    BigInt(const char s[]) &#123;</div><div class="line">        memset(a,0,sizeof(a));</div><div class="line">        int L = strlen(s);</div><div class="line">        len = L/DLEN;</div><div class="line">        if(L%DLEN)len++;</div><div class="line">        int index = 0;</div><div class="line">        for(int i = L-1; i &gt;= 0; i -= DLEN) &#123;</div><div class="line">            int t = 0;</div><div class="line">            int k = i - DLEN + 1;</div><div class="line">            if(k &lt; 0)k = 0;</div><div class="line">            for(int j = k; j &lt;= i; j++)</div><div class="line">                t = t*10 + s[j] - '0';</div><div class="line">            a[index++] = t;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    BigInt operator +(const BigInt &amp;b)const &#123;</div><div class="line">        BigInt res;</div><div class="line">        res.len = max(len,b.len);</div><div class="line">        for(int i = 0; i &lt;= res.len; i++)</div><div class="line">            res.a[i] = 0;</div><div class="line">        for(int i = 0; i &lt; res.len; i++) &#123;</div><div class="line">            res.a[i] += ((i &lt; len)?a[i]:0)+((i &lt; b.len)?b.a[i]:0);</div><div class="line">            res.a[i+1] += res.a[i]/mod;</div><div class="line">            res.a[i] %= mod;</div><div class="line">        &#125;</div><div class="line">        if(res.a[res.len] &gt; 0)res.len++;</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line">    BigInt operator *(const BigInt &amp;b)const &#123;</div><div class="line">        BigInt res;</div><div class="line">        for(int i = 0; i &lt; len; i++) &#123;</div><div class="line">            int up = 0;</div><div class="line">            for(int j = 0; j &lt; b.len; j++) &#123;</div><div class="line">                int temp = a[i]*b.a[j] + res.a[i+j] + up;</div><div class="line">                res.a[i+j] = temp%mod;</div><div class="line">                up = temp/mod;</div><div class="line">            &#125;</div><div class="line">            if(up != 0)</div><div class="line">                res.a[i + b.len] = up;</div><div class="line">        &#125;</div><div class="line">        res.len = len + b.len;</div><div class="line">        while(res.a[res.len - 1] == 0 &amp;&amp;res.len &gt; 1)res.len--;</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line">    bool operator &gt;(const BigInt &amp;b)const &#123;</div><div class="line">        if (len==b.len) &#123;</div><div class="line">            int k=len-1;</div><div class="line">            while (k&amp;&amp;a[k]==b.a[k]) k--;</div><div class="line">            if (k&lt;0) return false;</div><div class="line">            return a[k]&gt;b.a[k];</div><div class="line">        &#125;</div><div class="line">        return len&gt;b.len;</div><div class="line">    &#125;</div><div class="line">    void output() &#123;</div><div class="line">        printf("%d",a[len-1]);</div><div class="line">        for(int i = len-2; i &gt;=0 ; i--)</div><div class="line">            printf("%04d",a[i]);</div><div class="line">        printf("\n");</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">void init_pr()</div><div class="line">&#123;</div><div class="line">    for (int i=2;i&lt;MAX;i++) &#123;</div><div class="line">        if (!f[i]) pr[++pt]=i;</div><div class="line">        for (int j=1;j&lt;=pt;j++) &#123;</div><div class="line">            if (i*pr[j]&gt;=MAX) break;</div><div class="line">            f[i*pr[j]]=1;</div><div class="line">            if (i%pr[j]==0) break;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    init_pr();</div><div class="line">    int T;</div><div class="line">    scanf("%d",&amp;T);</div><div class="line">    while (T--) &#123;</div><div class="line">        scanf("%s",s);</div><div class="line">        BigInt n(s);</div><div class="line">        BigInt a(1),b(1);</div><div class="line">        for (int i=1;i&lt;=pt;i++) &#123;</div><div class="line">            BigInt tmp(pr[i]);</div><div class="line">            b=a*tmp;</div><div class="line">            if (b&gt;n) break;</div><div class="line">            a=b;</div><div class="line">        &#125;</div><div class="line">        a.output();</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="The-Frog’s-Games"><a href="#The-Frog’s-Games" class="headerlink" title="The Frog’s Games"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=4004" target="_blank" rel="noopener">The Frog’s Games</a></h3><p>题意：青蛙要跳过一条长为 $L$ ，两岸之间有 $n$ 块石头的河，最多只能跳 $m$ 次，求青蛙至少需要的跳跃能力（跳一次的最大长度）。<br>题解：可以发现，最后的答案具有单调性，即，若跳跃能力 $k$ 可以跳过这条河，那么跳跃能力 $x(x\geq k)$ 一定能跳过这条河。<br>由此，使用二分答案可以解决，代码如下：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">500010</span>;</div><div class="line"><span class="keyword">int</span> a[N];</div><div class="line"><span class="keyword">int</span> L,n,m;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> l)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> cnt=<span class="number">0</span>,pre=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n+<span class="number">1</span>;) &#123;</div><div class="line">        <span class="keyword">while</span> (pre+l&gt;=a[i]&amp;&amp;i&lt;=n+<span class="number">1</span>) i++;</div><div class="line">        pre=a[i<span class="number">-1</span>];</div><div class="line">        <span class="keyword">if</span> (++cnt&gt;m) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">bs</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">while</span> (l&lt;r) &#123;</div><div class="line">        <span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> (check(m)) r=m;</div><div class="line">        <span class="keyword">else</span> l=m+<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> l;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;L,&amp;n,&amp;m)!=EOF) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">        sort(a+<span class="number">1</span>,a+<span class="number">1</span>+n);</div><div class="line">        <span class="keyword">int</span> l=L,r=L;a[n+<span class="number">1</span>]=L;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n+<span class="number">1</span>;i++)</div><div class="line">            l=min(a[i]-a[i<span class="number">-1</span>],l);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,bs(l,r));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Different-GCD-Subarray-Query"><a href="#Different-GCD-Subarray-Query" class="headerlink" title="Different GCD Subarray Query"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5869" target="_blank" rel="noopener">Different GCD Subarray Query</a></h3><p>题意：给出 $N$ 个数，每次询问 $[L,R]$ 的子数组（类似子串）的 $GCD$ 有多少不同的值。<br>题解：做这题首先要知道一个结论，值为 $X$ 的数连续地跟其它数进行 $GCD$ 运算，最多出现 $\left \lfloor log_{2}{X}\right \rfloor$ 个不同的数。这个结论刚听到可能很新鲜，但其实很好理解，$GCD$ 运算之后出现了新的 $X$ ，说明新的 $X$ 至少少了一个质因子。而质因子最多有 $\lfloor log_{2}{X}\rfloor$ 个。所以 $GCD$ 个数最多也就 $NlogMAX$ 个，可以用 $map$ 来保存。<br>其次还需要知道一个技巧，如何统计一个区间内不同的数。对于一个右端点 $R$ ,我们保存能使得值 $X$ 出现的最大的 $L$ ，并在 $L$ 这一点加1，那么每次询问的答案就是 $[L,R]$ 的区间和。<br>这样把所有询问离线并排序以后，就可以从 $1$ 开始枚举右端点，代码如下：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100010</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX=<span class="number">1000010</span>;</div><div class="line"><span class="built_in">map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; d[<span class="number">2</span>],cur;</div><div class="line"><span class="keyword">struct</span> query &#123;</div><div class="line">    <span class="keyword">int</span> l,r,id;</div><div class="line">    <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> query&amp; b) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">return</span> r&lt;b.r;</div><div class="line">    &#125;</div><div class="line">&#125; q[N];</div><div class="line"><span class="keyword">int</span> a[N],ans[N];</div><div class="line"><span class="keyword">int</span> c[MAX];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (!b) <span class="keyword">return</span> a;</div><div class="line">    <span class="keyword">return</span> gcd(b,a%b);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">ins</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> d)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (;x&lt;MAX;x+=x&amp;(-x)) &#123;</div><div class="line">        c[x]+=d;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (!x) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (;x&gt;<span class="number">0</span>;x-=x&amp;(-x)) &#123;</div><div class="line">        res+=c[x];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> n,m;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m)!=EOF) &#123;</div><div class="line">        d[<span class="number">0</span>].clear();</div><div class="line">        d[<span class="number">1</span>].clear();</div><div class="line">        cur.clear();</div><div class="line">        <span class="built_in">memset</span>(c,<span class="number">0</span>,<span class="keyword">sizeof</span>(c));</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;q[i].l,&amp;q[i].r);</div><div class="line">            q[i].id=i;</div><div class="line">        &#125;</div><div class="line">        sort(q+<span class="number">1</span>,q+<span class="number">1</span>+m);</div><div class="line">        <span class="keyword">int</span> now=<span class="number">1</span>,pre=<span class="number">0</span>,k=<span class="number">1</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="built_in">map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;::iterator it=d[pre].begin();it!=d[pre].end();it++) &#123;</div><div class="line">                <span class="keyword">int</span> x=gcd(a[i],it-&gt;first);</div><div class="line">                d[now][x]=max(d[now][x],it-&gt;second);</div><div class="line">            &#125;</div><div class="line">            d[now][a[i]]=i;</div><div class="line">            <span class="keyword">for</span> (<span class="built_in">map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;::iterator it=d[now].begin();it!=d[now].end();it++) &#123;</div><div class="line">                <span class="keyword">int</span> x=it-&gt;first;</div><div class="line">                <span class="keyword">if</span> (cur.count(x)&amp;&amp;cur[x]&lt;(it-&gt;second)) &#123;</div><div class="line">                    ins(cur[x],<span class="number">-1</span>);</div><div class="line">                    ins(it-&gt;second,<span class="number">1</span>);</div><div class="line">                    cur[x]=it-&gt;second;</div><div class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!cur.count(x)) &#123;</div><div class="line">                    ins(it-&gt;second,<span class="number">1</span>);</div><div class="line">                    cur[x]=it-&gt;second;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            d[pre].clear();</div><div class="line">            swap(pre,now);</div><div class="line">            <span class="keyword">for</span> (;k&lt;=m&amp;&amp;q[k].r==i;k++) &#123;</div><div class="line">                ans[q[k].id]=query(q[k].r)-query(q[k].l<span class="number">-1</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans[i]);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="The-kth-great-number"><a href="#The-kth-great-number" class="headerlink" title="The kth great number"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=4006" target="_blank" rel="noopener">The kth great number</a></h3><p>题意：给 $n$ 个操作，支持插入和求第 $k$ 大。<br>题解：一定要认真读题！这道题目的 $k$ 是一开始就给定的，是不会变的！<br>理解了这一点这就是一道水题，代码如下：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> n,k;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;k)!=EOF) &#123;</div><div class="line">        priority_queue&lt; <span class="keyword">int</span>,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;,greater&lt;<span class="keyword">int</span>&gt; &gt; Q;</div><div class="line">        <span class="keyword">while</span> (n--) &#123;</div><div class="line">            <span class="keyword">char</span> s[<span class="number">5</span>];</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>,s);</div><div class="line">            <span class="keyword">if</span> (s[<span class="number">0</span>]==<span class="string">'I'</span>) &#123;</div><div class="line">                <span class="keyword">int</span> x;</div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</div><div class="line">                Q.push(x);</div><div class="line">                <span class="keyword">if</span> (Q.size()&gt;k) Q.pop();</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,Q.top());</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Dave"><a href="#Dave" class="headerlink" title="Dave"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=4007" target="_blank" rel="noopener">Dave</a></h3><p>题意：在二维平面上给 $N$ 个不重合的点，问边长为 $R$ 的正方形最多能包含多少个点（包含边界）<br>题解：因为这一题 $1\leq N\leq 1000$ ，所以只要枚举每个点作为左下角的情况就行了（为什么？）<br>如果 $1\leq N\leq 10000$ ，那么可以用扫描线+线段树的解法。先离散化，并将所有点按照 $x$ $y$ 两个关键字从小到大排序，我们想象垂直于 $x$ 轴有两条间距为 $R$ 的直线，这两条线不断的向右移动，右边的一些点会进入，左边的一些点会退出。那要怎么统计呢？这里要用到一个奇妙的处理，把每一个点向上延伸 $R$ 产生的这条线段加到线段树，也就是区间加1，最后只要每次统计从最低到最高的每个点的最大值就行了（为什么？）<br>这个做法听起来很简单，不过由于离散化等原因，很容易写错（WA3 = =），代码如下：<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div></pre></td><td class="code"><pre><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">using namespace std;</div><div class="line"></div><div class="line">#define lson l,m,rt&lt;&lt;1</div><div class="line">#define rson m+1,r,rt&lt;&lt;1|1</div><div class="line"></div><div class="line">const int N=1010;</div><div class="line">typedef long long ll;</div><div class="line">struct point &#123;</div><div class="line">    int x,y,ix,iy;</div><div class="line">    bool operator &lt; (const point&amp; b) &#123;</div><div class="line">        return ix&lt;b.ix;</div><div class="line">    &#125;</div><div class="line">&#125; p[N];</div><div class="line">int qx[N],qy[N];</div><div class="line">ll add[N&lt;&lt;2],sum[N&lt;&lt;2];</div><div class="line">int n,r,cntx,cnty;</div><div class="line"></div><div class="line">void push_up(int rt)</div><div class="line">&#123;</div><div class="line">    sum[rt]=max(sum[rt&lt;&lt;1],sum[rt&lt;&lt;1|1]);</div><div class="line">&#125;</div><div class="line"></div><div class="line">void push_down(int rt)</div><div class="line">&#123;</div><div class="line">    if (add[rt]) &#123;</div><div class="line">        add[rt&lt;&lt;1] += add[rt];</div><div class="line">        add[rt&lt;&lt;1|1] += add[rt];</div><div class="line">        sum[rt&lt;&lt;1] += add[rt];</div><div class="line">        sum[rt&lt;&lt;1|1] += add[rt];</div><div class="line">        add[rt] = 0;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">void update(int L,int R,int d,int l,int r,int rt)</div><div class="line">&#123;</div><div class="line">    if (L&lt;=l&amp;&amp;r&lt;=R) &#123;</div><div class="line">        add[rt]+=d;</div><div class="line">        sum[rt]+=d;</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line">    push_down(rt);</div><div class="line">    int m=(l+r)&gt;&gt;1;</div><div class="line">    if (L&lt;=m) update(L,R,d,lson);</div><div class="line">    if (m&lt;R) update(L,R,d,rson);</div><div class="line">    push_up(rt);</div><div class="line">&#125;</div><div class="line"></div><div class="line">ll query(int L,int R,int l,int r,int rt)</div><div class="line">&#123;</div><div class="line">    if (L&lt;=l&amp;&amp;r&lt;=R) &#123;</div><div class="line">        return sum[rt];</div><div class="line">    &#125;</div><div class="line">    push_down(rt);</div><div class="line">    int m=(l+r)&gt;&gt;1;</div><div class="line">    ll res=0;</div><div class="line">    if (L&lt;=m) res=max(res,query(L,R,lson));</div><div class="line">    if (m&lt;R) res=max(res,query(L,R,rson));</div><div class="line">    return res;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int ins(int k,int d)</div><div class="line">&#123;</div><div class="line">    int i;</div><div class="line">    for (i=k;i&lt;=n&amp;&amp;p[i].ix==p[k].ix;i++) &#123;</div><div class="line">        int pos=upper_bound(qy+1,qy+cnty+1,p[i].y+r)-qy-1;</div><div class="line">        update(p[i].iy,pos,d,1,cnty,1);</div><div class="line">    &#125;</div><div class="line">    return i;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    while (scanf("%d%d",&amp;n,&amp;r)!=EOF) &#123;</div><div class="line">        cntx=cnty=0;</div><div class="line">        for (int i=1;i&lt;=n;i++) &#123;</div><div class="line">            scanf("%d%d",&amp;p[i].x,&amp;p[i].y);</div><div class="line">            qx[++cntx]=p[i].x;</div><div class="line">            qy[++cnty]=p[i].y;</div><div class="line">        &#125;</div><div class="line">        sort(qx+1,qx+cntx+1);</div><div class="line">        sort(qy+1,qy+cnty+1);</div><div class="line">        cntx=unique(qx+1,qx+cntx+1)-qx-1;</div><div class="line">        cnty=unique(qy+1,qy+cnty+1)-qy-1;</div><div class="line">        for (int i=1;i&lt;=n;i++) &#123;</div><div class="line">            p[i].ix=lower_bound(qx+1,qx+cntx+1,p[i].x)-qx;</div><div class="line">            p[i].iy=lower_bound(qy+1,qy+cnty+1,p[i].y)-qy;</div><div class="line">        &#125;</div><div class="line">        sort(p+1,p+n+1);</div><div class="line">        memset(sum,0,sizeof(sum));</div><div class="line">        memset(add,0,sizeof(add));</div><div class="line">        int ans=0;</div><div class="line">        for (int i=1,k=1;i&lt;=n;) &#123;</div><div class="line">            while (k&lt;=n&amp;&amp;p[k].x-p[i].x&lt;=r) &#123;</div><div class="line">                k=ins(k,1);</div><div class="line">            &#125;</div><div class="line">            ans=max((ll)ans,sum[1]);</div><div class="line">            i=ins(i,-1);</div><div class="line">        &#125;</div><div class="line">        printf("%d\n",ans);</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Weak-Pair"><a href="#Weak-Pair" class="headerlink" title="Weak Pair"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5877" target="_blank" rel="noopener">Weak Pair</a></h3><p>题意：一棵树的每个节点有一个非负权值，如果 $u$ 是 $v$ 的祖先($u\neq v$)，并且两点的权值的积 $a_u*a_v\leq k$ ，则称它们为”Weak Pair”。求”Weak Pair”的数目。<br>题解：由于树中任意一个节点的祖先都在同一条链上，所以只需要考虑如何快速的求出一条链上的”Weak Pair”。这题有很多解法，我想到的是将祖先都插入到树状数组，那么在 $u$ 这一点，答案就加上 $x\leq \frac{k}{a_u}$ 的个数。<br>考虑到权值范围很大，要用离散化，并且要注意 $a_u=0$ 的情况，代码如下：<br>【还有一点就是，题目给的是明确的父子关系，但是没有给根，一定要自己找，WA3 = =<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e5</span>+<span class="number">5</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX=<span class="number">2</span>*N;</div><div class="line"><span class="keyword">const</span> <span class="keyword">long</span> <span class="keyword">long</span> INF=<span class="number">1L</span>L&lt;&lt;<span class="number">33</span>;</div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> a[N],b[N],A[<span class="number">2</span>*N];</div><div class="line"><span class="keyword">int</span> c[MAX];</div><div class="line"><span class="keyword">struct</span> edge &#123;</div><div class="line">    <span class="keyword">int</span> go,next;</div><div class="line">&#125; eg[<span class="number">2</span>*N];</div><div class="line"><span class="keyword">int</span> last[N];</div><div class="line"><span class="keyword">bool</span> vis[N];</div><div class="line"><span class="keyword">int</span> tot;</div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> ans;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">adde</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></div><div class="line">&#123;</div><div class="line">    eg[++tot].go=y;</div><div class="line">    eg[tot].next=last[x];</div><div class="line">    last[x]=tot;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">ins</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> d)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (;x&lt;MAX;x+=x&amp;(-x)) &#123;</div><div class="line">        c[x]+=d;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">long</span> <span class="keyword">long</span> res=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (;x;x-=x&amp;(-x)) &#123;</div><div class="line">        res+=c[x];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span></span></div><div class="line">&#123;</div><div class="line">    ans+=query(b[x]);</div><div class="line">    ins(a[x],<span class="number">1</span>);</div><div class="line"><span class="comment">//    printf("%d %d\n",x,ans);</span></div><div class="line">    </div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=last[x];i;i=eg[i].next) &#123;</div><div class="line">        dfs(eg[i].go);</div><div class="line">    &#125;</div><div class="line">    ins(a[x],<span class="number">-1</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T,n;</div><div class="line">    <span class="keyword">long</span> <span class="keyword">long</span> k;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">while</span> (T--) &#123;</div><div class="line">        tot=<span class="number">0</span>;</div><div class="line">        <span class="built_in">memset</span>(last,<span class="number">0</span>,<span class="keyword">sizeof</span>(last));</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%lld"</span>,&amp;n,&amp;k);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123; </div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;a[i]);</div><div class="line">            A[i]=a[i];</div><div class="line">            <span class="keyword">if</span> (a[i]==<span class="number">0</span>) &#123;</div><div class="line">                A[n+i]=b[i]=INF;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> &#123;</div><div class="line">                A[n+i]=b[i]=k/a[i];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        sort(A+<span class="number">1</span>,A+<span class="number">1</span>+n*<span class="number">2</span>);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            a[i]=lower_bound(A+<span class="number">1</span>,A+<span class="number">1</span>+<span class="number">2</span>*n,a[i])-A;</div><div class="line">            b[i]=lower_bound(A+<span class="number">1</span>,A+<span class="number">1</span>+<span class="number">2</span>*n,b[i])-A;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="keyword">sizeof</span>(vis));</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++) &#123;</div><div class="line">            <span class="keyword">int</span> x,y;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</div><div class="line">            adde(x,y);</div><div class="line">            vis[y]=<span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> i=<span class="number">1</span>;</div><div class="line">        <span class="keyword">while</span> (i&lt;=n&amp;&amp;vis[i]) i++;</div><div class="line">        ans=<span class="number">0</span>;</div><div class="line">        dfs(i);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,ans);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</div><script type="text/javascript" src="/blog/js/share.js?v=0.0.0" async></script><a class="article-share-link" data-url="https://Smlight.github.io/blog/2016/09/22/hhutraining2/" data-id="cje3spfxr002sfouizw3cyr5p" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACL0lEQVR42u3aQXKDMAwF0Nz/0nTbmSTul+ykg/1YdYCAnheqJfF4xMf163g+/3zP8/nxk8dvWXZgYGDclnENj+QF736VLESyBOPYMDAwzmEkqTDJeHkiTqhJbBgYGBjVe8ZB54kVAwMDY4YxDq5XAP9DwsXAwLghIyliV7XnxuXxx2txDAyMGzLysL7/90fmGxgYGLdiXMUjLzirI8w8yb54OwYGxtaMatN/BhkVoq14MDAwTmDkjf7qwLK61csbc+WdLAYGxm0Z+UdgvVZXPkKYWiwMDIytGWvT5Tj0fDCQbx8xMDBOYOQJt7cH65Wg+VUMDIwTGHkRW23Zr0rWUXMNAwPjAMaCz60mWmkzgBc7XAwMjE0ZSTKtjjbzkjVfvuhXGBgY2zGqjfjqnUlbf3G/EAMDYztGr4jNU22vbE4WcUEtjoGBcRNGNaVWk2C1Vdd7GgYGxt6McSj5YCAvbpOxaLWgxcDAOIExfnSeQKtL0/uc4u1VDAyMrRnjy3mxWh2C5qXveEExMDBOYMzvK6vs3mL9wcbAwDiAsepx1c8p8oTbHFtiYGBsypgZWOZDzep8tZxwMTAwtmBcxWO+lTbTkivU3xgYGBsx5pNdHnoybOj9A8DAwDiBkSTZfMw5X472EjcGBsYJjF4jLE+ayZmZaDEwMDCqgebBVVMzBgYGRi/h9sLKt5tRUw8DA+MAxoIPs+LB5xjQ/FgWAwNja8bnelm95NsbFWBgYGzK+AEgZZ07mu3lKgAAAABJRU5ErkJggg==">分享</a><div class="tags"><a href="/blog/tags/ACM/">ACM</a></div><div class="post-nav"><a class="pre" href="/blog/2016/09/29/hdu3727/">hdu 3727 Jewel 主席树</a><a class="next" href="/blog/2016/09/08/hdu4417/">hdu 4417 Super Mario</a></div><div id="container"></div><link rel="stylesheet" href="/blog/css/default.css?v=0.0.0"><script src="/blog/js/gitment.browser.js?v=0.0.0"></script><script>var gitment = new Gitment({
  owner: 'Smlight',
  repo: 'blog',
  oauth: {
    client_id: '7658f04ebf4c82b4eaf5',
    client_secret: '9f2eab43096f966e8d6c53b81691ab45d3fe5009',
  },
})
gitment.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/blog/tags/ACM/" style="font-size: 15px;">ACM</a> <a href="/blog/tags/Life/" style="font-size: 15px;">Life</a> <a href="/blog/tags/CTF/" style="font-size: 15px;">CTF</a> <a href="/blog/tags/Bug/" style="font-size: 15px;">Bug</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/blog/2018/02/25/hhutraining3/">HHUACM 寒假专题 动态规划</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/01/16/CSP超级合集/">CSP超级合集（更新中）</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/10/18/zimpha的bc出题录/">zimpha的bc出题录（部分）</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/09/25/2017urumqi_online/">2017ICPC乌鲁木齐网络赛 全题解</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/08/27/SAM/">后缀自动机·基本概念</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/08/23/2017multi9/">2017年多校联训9 部分题解</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/08/20/hdu6158/">hdu 6158 The Designer</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/08/20/hdu6156/">hdu 6156 Palindrome Function</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/08/18/2017multi8/">2017年多校联训8 部分题解</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/08/17/hihocoder1553/">hihocoder 1553 区间统计</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://www.lovelywen.com/" title="wenwenla" target="_blank">wenwenla</a><ul></ul><a href="http://www.calvinneo.com/" title="Calvin Neo" target="_blank">Calvin Neo</a><ul></ul><a href="http://www.cnblogs.com/forever97" title="Forever97" target="_blank">Forever97</a><ul></ul><a href="http://blog.csdn.net/miracle_ma" title="Mashaonan" target="_blank">Mashaonan</a><ul></ul><a href="http://liziyang.space/" title="lizi" target="_blank">lizi</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/blog/." rel="nofollow">——Light!.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/blog/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/blog/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/blog/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/blog/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  });
</script><script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML" async></script><script type="text/javascript" src="/blog/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/blog/js/smartresize.js?v=0.0.0"></script></div></body></html>
<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>2016 China-Final 解题报告 | ——Light!</title><link rel="stylesheet" type="text/css" href="/blog/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/blog/favicon.ico"><link rel="apple-touch-icon" href="/blog/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/blog/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/blog/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">2016 China-Final 解题报告</h1><a id="logo" href="/blog/.">——Light!</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/blog/."><i class="fa fa-home"> 首页</i></a><a href="/blog/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/blog/about/"><i class="fa fa-user"> 关于</i></a><a href="/blog/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">2016 China-Final 解题报告</h1><div class="post-meta">Feb 23, 2017</div><a class="disqus-comment-count" href="/blog/2017/02/23/2016-cnfinal/#vcomment"><span class="valine-comment-count" data-xid="/blog/2017/02/23/2016-cnfinal/"></span><span> 条评论</span></a><div class="post-content"><h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><p>仅含题解，代码详见<a href="https://github.com/Smlight/ACMer/tree/master/2016/12/11/china_final" target="_blank" rel="noopener">github</a>。<del>喜欢的话点个star</del><br>这几天又把China-Final的题补了一些，比较蛋疼的是为啥根本搜不到题解。。。我觉得我要多加些关键字，2016 ICPC China-Final，<a href="http://codeforces.com/gym/101194" target="_blank" rel="noopener">codeforces gym101194</a>。题目在cf可以交，因为只有PDF就不每一题都加链接了。</p>
<h3 id="A-Number-Theory-Problem"><a href="#A-Number-Theory-Problem" class="headerlink" title="A.  Number Theory Problem"></a>A.  Number Theory Problem</h3><p>$7$的二进制表示为$111$，所以$111$, $1110$($111$移位的结果)都能被$7$整除。而$2^k-1$的二进制表示为$\underbrace{11\dots1}_{k\text{ times}}$。所以只需要$k$被$3$整除即可。</p>
<h3 id="C-Mr-Panda-and-Strips"><a href="#C-Mr-Panda-and-Strips" class="headerlink" title="C. Mr. Panda and Strips"></a>C. Mr. Panda and Strips</h3><p>这题据说比赛的时候$O(n^4)$加优化就能过。。。反正我们也没试。。。<br>我最开始看到的是出题人的题解，消化了很久并且按照他讲的写了，结果WA了以后仔细改了改又TLE了。然后再回去看他的题解，感觉错误不止一个啊。。。= =<br>我出于无奈只好直接问q巨要了一份代码。。。<br><a href="https://github.com/Smlight/ACMer/blob/master/2016/12/11/China-Final/C_Q.cpp" target="_blank" rel="noopener">C_Q.cpp</a><br>这个代码的意思大概就是先预处理每个颜色分布在哪几个位置，每个位置最多能延伸的区间。然后枚举第一个区间的右边界$i$，再枚举左边界$j$，$j$每减小1，就用新加入的颜色$a[j]$在之后出现的位置$x$（即$a[x]==a[j], x&gt;j$）去截保存在set里的一些区间（所有满足 $l\leq x \leq r$ 的区间）。对于每一个$x$，在全截完了以后再插入在$x$左边的最长的$[ml,x-1]$，在$x$右边的最长的$[x+1,mr]$。代码中<code>multiset&lt;int&gt; len</code>是辅助的保存长度的有序列。<br>这个算法对于每一个$i$都是先插入$O(n)$个区间，对于每个区间又会分割成$O(n)$个区间，显然复杂度是$O(n^3logn)$。时间达到了3.5s，常数比较大，操作的区间总个数更接近于$4n^2$。<br>后来又看到一份代码（是cf上的vj号交的，所以也不知道是哪位大侠）感觉很不错，跟这个其实是一个思路的，于是就学习了一下。<br>预处理时采用了时间戳的int数组，也可以像上面那样每次清空bool数组。<br><a href="https://github.com/Smlight/ACMer/blob/master/2016/12/11/China-Final/C.cpp" target="_blank" rel="noopener">C.cpp</a><br>这个方法更优的地方在于它并没有一定要保存合法的区间（如$[1,n]$通常不合法），它保存的是<strong>相对于第一个区间合法的区间</strong>，以及<strong>该区间内自我合法的最大长度</strong>。<br>复杂度同样为$O(n^3logn)$，但是实际操作区间接近$2n^2$，所以运行时间也大概是一半。</p>
<h3 id="D-Ice-Cream-Tower"><a href="#D-Ice-Cream-Tower" class="headerlink" title="D. Ice Cream Tower"></a>D. Ice Cream Tower</h3><p>这题应该说比较容易。读懂题目应该可以想到答案具有单调性，所以可以二分答案。记二分当前结果为$m$，那么问题转化为判定能不能堆出$m$个塔。这个也比较容易，我们只要将冰淇淋按从小到大排序，一层一层贪心地堆就可以了，因为这个冰淇淋如果当前不能用上，那么后续更不可能用上。（从大到小堆我没有测试，据说也可以通过）<br>不想动态申请内存的可以像这样使用滚动数组。</p>
<h3 id="E-Bet"><a href="#E-Bet" class="headerlink" title="E. Bet"></a>E. Bet</h3><p>。。。这题本身是容易的。。。但是。。。<br>记对第$i$个赌局下注$c_i$，则题意就是对于答案集合$S$中的每个$i$都有$$c_i+c_i*\cfrac{b_i}{a_i}&gt;\sum^{i\in S}_{i}c_i\quad=&gt;\quad \cfrac{c_i}{\sum^{i\in S}_{i}c_i}&gt;\cfrac{a_i}{a_i+b_i}$$该式对$i$求和可得$\sum^{i\in S}_{i}\cfrac{a_i}{a_i+b_i}&lt;1$。接下来排个序贪个心就不用说了吧。。。然而boss却是精度问题。。。多少队伍交了10+发就是因为精度问题。。。反正听说有1-(1e-50)的= =<br>于是我又是问q巨要的代码。。。然后我感觉Java很厉害。。。</p>
<h3 id="F-Mr-Panda-and-Fantastic-Beasts"><a href="#F-Mr-Panda-and-Fantastic-Beasts" class="headerlink" title="F. Mr. Panda and Fantastic Beasts"></a>F. Mr. Panda and Fantastic Beasts</h3><p>比赛的时候还什么都不会。。。现在知道可以用后缀数组或者后缀自动机做，先只学后缀数组吧。。。<br>这么多串第一步就是加特殊字符全连在一起，用倍增法实现SA。记第一个串为$S_1$，对于起点在$S_1$的每一个后缀$suffix(i)$，如果按字典序向前找到第一个不始于S1的后缀$suffix(p)$（位置越近重合长度越长），那么要想答案串在$S_1$之外的串中不出现，长度至少要$lcp(suffix(i),suffix(p))+1$，同理向后找，找到$suffix(q)$，长度至少要$lcp(suffix(i),suffix(q))+1$，所以用两者的最大值更新答案长度。注意，这个答案长度不能超过$S_1$剩下的部分！<br><strong>The solution above is based on forever97’ s.</strong><br>至于$lcp$可以用ST实现的RMQ，但是因为本来就是线性向前向后找，实际上使用最原始的一连串$height$值的最小值就可以啦。这个方法反而跑得飞快，10s的题在cf上只用了400+ms，复杂度我不太会分析。。。= =<br><a href="https://github.com/Smlight/ACMer/blob/master/2016/12/11/China-Final/F.cpp" target="_blank" rel="noopener">F.cpp</a><br><em>warning: 不赞成使用 height[0]/height[n+1] 。</em></p>
<h3 id="H-Great-Cells"><a href="#H-Great-Cells" class="headerlink" title="H. Great Cells"></a>H. Great Cells</h3><p>拆开来用贡献做实在是太神奇了。。。dp+容斥不太适合我的能力。。。<br>$$\sum^{NM}_{g=0}\ (g+1)\cdot A_g=\sum^{NM}_{g=0}\ g\cdot A_g+\sum^{NM}_{g=0}\ A_g$$第一项相当于每个格子当一次<strong>great cell</strong>就计数一次，第二项相当于所有填法的总和。<br>$$\sum^{NM}_{g=0}\ g\cdot A_g=NM\cdot contrib=NM\cdot \sum^{K}_{i=2}(i-1)^{N-1+M-1}\cdot K^{(N-1)(M-1)}$$第一项转化为每一个格子的贡献（当<strong>great cell</strong>的次数）。一个格子为<strong>great cell</strong>当且仅当这个格子填$i$时，它所在的行和列填的都是小于$i$的数($(i-1)^{N-1+M-1}$)，其他格子随便填($K^{(N-1)(M-1)}$)。注意，$N=1, M=1$需要另外讨论！<br>于是这道题成为了本场代码第二短的。。。</p>
<h3 id="L-World-Cup"><a href="#L-World-Cup" class="headerlink" title="L. World Cup"></a>L. World Cup</h3><p>总共六场比赛，每场三种结果，暴力。</p>
<h3 id="Coda"><a href="#Coda" class="headerlink" title="Coda"></a>Coda</h3><p>因为总是搜不到题解，于是就劳烦了好多人。。。但是大佬们都很友好，作为一个鶸我真的非常感动，值得学习！<br>特别鸣谢 <strong>quailty, forever97</strong> <del>我q人见人爱！</del></p>
</div><div class="tags"><a href="/blog/tags/ACM/">ACM</a></div><div class="post-nav"><a class="pre" href="/blog/2017/02/28/hdu5729/">hdu 5729 Rigid Frameworks</a><a class="next" href="/blog/2017/02/18/2016-ccpc-hefei/">2016 CCPC 合肥站 解题报告</a></div><div id="vcomment"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify = 'false' == true ? true : false;
var verify = 'false' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'DR7gqi2MfAfkdkSM54fFJdfW-gzGzoHsz',
  appKey:'QAk97tnQjom2O1HRj9MQjH4l',
  placeholder:'Just so so',
  avatar:'retro',
  guest_info:guest_info,
  pageSize:'10'
})</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/blog/tags/蓝桥杯/" style="font-size: 15px;">蓝桥杯</a> <a href="/blog/tags/ACM/" style="font-size: 15px;">ACM</a> <a href="/blog/tags/Life/" style="font-size: 15px;">Life</a> <a href="/blog/tags/Bug/" style="font-size: 15px;">Bug</a> <a href="/blog/tags/Basic/" style="font-size: 15px;">Basic</a> <a href="/blog/tags/CTF/" style="font-size: 15px;">CTF</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/blog/2018/09/02/hhutraining4/">HHUACM 暑假专题 数学</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/07/19/c-stack-frame/">C语言函数调用栈（一）</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/03/25/2018-gdut/">2018广东工业大学校赛题解</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/02/25/hhutraining3/">HHUACM 寒假专题 动态规划</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/01/16/CSP超级合集/">CSP超级合集</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/12/08/2017-qinhuangdao-play/">2017 CCPC 秦皇岛站游记</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/10/18/zimpha-bestcoder/">zimpha的bc出题录（部分）</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/09/25/2017-urumqi-online/">2017ICPC乌鲁木齐网络赛 全题解</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/08/27/SAM/">后缀自动机·基本概念</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/08/23/2017-multi9/">2017年多校联训9 部分题解</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://www.lovelywen.com/" title="wenwenla" target="_blank">wenwenla</a><ul></ul><a href="http://www.calvinneo.com/" title="Calvin Neo" target="_blank">Calvin Neo</a><ul></ul><a href="http://www.cnblogs.com/forever97" title="Forever97" target="_blank">Forever97</a><ul></ul><a href="http://blog.csdn.net/miracle_ma" title="Mashaonan" target="_blank">Mashaonan</a><ul></ul><a href="http://liziyang.space/" title="lizi" target="_blank">lizi</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/blog/." rel="nofollow">——Light!.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/blog/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/blog/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/blog/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/blog/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  });
</script><script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-MML-AM_CHTML" async></script><script type="text/javascript" src="/blog/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/blog/js/smartresize.js?v=0.0.0"></script></div></body></html>
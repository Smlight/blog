<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>HHUACM 寒假专题 动态规划</title>
      <link href="/blog/2018/02/25/hhutraining3/"/>
      <content type="html"><![CDATA[<h3 id="F-数塔"><a href="#F-数塔" class="headerlink" title="F - 数塔"></a><a href="https://vjudge.net/problem/HDU-2084" target="_blank" rel="noopener">F - 数塔</a></h3><p>经典问题，数塔。<br>使用动态规划解决问题的（最重要）前提是：</p><ol><li>问题具有最优子结构</li><li>最优子结构的状态可以记录</li></ol><p><img src="http://acm.hdu.edu.cn/data/images/2084-1.jpg" alt=""><br>例如上图中，以第二层$12$为顶层的数塔就是一个最优子结构。<br>再回到原来的顶层，想得到最终的结果只需要知道第二层两个子结构能得到的最大和，这是可记录的。<br>所以，我们从底层往顶层进行动态规划就可以了。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> a[<span class="number">111</span>][<span class="number">111</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T,n;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">while</span> (T--) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=i;j++) &#123;</div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i][j]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=n<span class="number">-1</span>;i&gt;=<span class="number">1</span>;i--) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=i;j++) &#123;</div><div class="line">                a[i][j]+=max(a[i+<span class="number">1</span>][j],a[i+<span class="number">1</span>][j+<span class="number">1</span>]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,a[<span class="number">1</span>][<span class="number">1</span>]);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="G-免费馅饼"><a href="#G-免费馅饼" class="headerlink" title="G - 免费馅饼"></a><a href="https://vjudge.net/problem/HDU-1176" target="_blank" rel="noopener">G - 免费馅饼</a></h3><p>可以发现时刻的范围不是很大，把每个时刻看作每一层，这个问题就是三条边的数塔。<br>代码中平移一下是为了避免越界问题。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100010</span>;</div><div class="line"><span class="keyword">int</span> dp[N][<span class="number">13</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> n;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n),n) &#123;</div><div class="line">        <span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</div><div class="line">        <span class="keyword">int</span> m=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="keyword">int</span> x,t;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;t);</div><div class="line">            ++dp[t][x+<span class="number">1</span>];</div><div class="line">            m=max(m,t);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=m;i&gt;=<span class="number">0</span>;i--) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">11</span>;j++) &#123;</div><div class="line">                dp[i][j]+=max(max(dp[i+<span class="number">1</span>][j<span class="number">-1</span>],dp[i+<span class="number">1</span>][j]),dp[i+<span class="number">1</span>][j+<span class="number">1</span>]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[<span class="number">0</span>][<span class="number">6</span>]);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="A-饭卡"><a href="#A-饭卡" class="headerlink" title="A - 饭卡"></a><a href="https://vjudge.net/problem/HDU-2546" target="_blank" rel="noopener">A - 饭卡</a></h3><p>首先排除余额已经少于$5$的情况，然后分为$m-5$和$5$两部分，前面的$m-5$是个01背包问题，后面的$5$用来买最后一次。若用$dp(x)$表示$x$能买到的最大价值，那么答案为$m-dp(m-5)-a_i (1\le i\le n)$。<br>可以证明，最后买最贵的是最优的。比较复杂，这里仅通过$m-dp(m-5)-a_p$这个式子简要说明，如果最后买的不是最贵的，即 $p’ \neq p$：</p><ul><li>$a_{p’}\le a_{p}$</li><li>背包的物品集合加入了一个体积大的，去掉了一个体积小的；又有价值跟体积的值相等，所以$dp’(m-5)\le dp(m-5)$</li></ul><p>两个减数都减小，最后的结果只会变大。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1100</span>;</div><div class="line"><span class="keyword">int</span> a[N],dp[N];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> n,m;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n),n) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;m);</div><div class="line">        <span class="keyword">if</span> (m&lt;<span class="number">5</span>) &#123;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,m);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">int</span> p=max_element(a+<span class="number">1</span>,a+n+<span class="number">1</span>)-a;</div><div class="line">            m-=<span class="number">5</span>;</div><div class="line">            <span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">                <span class="keyword">if</span> (i==p) <span class="keyword">continue</span>;</div><div class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j=m;j&gt;=a[i];j--) &#123;</div><div class="line">                    dp[j]=max(dp[j],dp[j-a[i]]+a[i]);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,m+<span class="number">5</span>-dp[m]-a[p]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="B-Piggy-Bank"><a href="#B-Piggy-Bank" class="headerlink" title="B - Piggy-Bank"></a><a href="https://vjudge.net/problem/HDU-1114" target="_blank" rel="noopener">B - Piggy-Bank</a></h3><p>已知存钱罐的确切重量，问最小可能价值。是恰好型的完全背包。<br>稍微讲一下完全背包一维的转移方程：<br>$$dp(j)=max(dp(j),dp(j-w_i)+v_i)$$ $j$从小到大枚举时，由于之前的$dp$值已经更新过了，就直接达到了无限个物品的效果。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">10010</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">0x3f3f3f3f</span>;</div><div class="line"><span class="keyword">int</span> dp[M];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T,n,m;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">while</span> (T--) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">        m-=n;</div><div class="line">        <span class="built_in">memset</span>(dp,INF,<span class="keyword">sizeof</span>(dp));</div><div class="line">        dp[<span class="number">0</span>]=<span class="number">0</span>; <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="keyword">int</span> p,w;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;p,&amp;w);</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=w;j&lt;=m;j++) &#123;</div><div class="line">                dp[j]=min(dp[j],dp[j-w]+p);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (dp[m]==INF) &#123;</div><div class="line">            <span class="built_in">puts</span>(<span class="string">"This is impossible."</span>);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"The minimum amount of money in the piggy-bank is %d.\n"</span>,dp[m]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="C-Investment"><a href="#C-Investment" class="headerlink" title="C - Investment"></a><a href="https://vjudge.net/problem/HDU-1963" target="_blank" rel="noopener">C - Investment</a></h3><p>给出本金、很多种债券和各自的利息，问$y$年以后最多能有多少钱，抽象一下就是做$y$次完全背包。<br>但是这题里面容量太大了做不了完全背包，所以题目里又给了一个条件，债券的价格都是$1000$的整数倍，那么直接把本金除以$1000$当作背包容量就行了，重复做$y$次。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> w[<span class="number">22</span>],v[<span class="number">22</span>];</div><div class="line"><span class="keyword">int</span> dp[<span class="number">50000</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">while</span> (T--) &#123;</div><div class="line">        <span class="keyword">int</span> n,M,Y;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;M,&amp;Y);</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;w[i],&amp;v[i]);</div><div class="line">            w[i]/=<span class="number">1000</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">while</span> (Y--) &#123;</div><div class="line">            <span class="keyword">int</span> m=M/<span class="number">1000</span>;</div><div class="line">            <span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j=w[i];j&lt;=m;j++) &#123;</div><div class="line">                    dp[j]=max(dp[j],dp[j-w[i]]+v[i]);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            M+=dp[m];</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,M);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="D-Common-Subsequence"><a href="#D-Common-Subsequence" class="headerlink" title="D - Common Subsequence"></a><a href="https://vjudge.net/problem/HDU-1159" target="_blank" rel="noopener">D - Common Subsequence</a></h3><p>经典问题，最长公共子序列。<br><img src="http://img.blog.csdn.net/20160529225550069" alt="子串与子序列"><br>设$C(i,j)$为$x_{1\dots i}$和$y_{1\dots j}$的最长公共子序列的长度，那么有：<br>$$\large C(i,j)=\begin{cases}<br>0 &amp; \text{$i=0$ or $j=0$} \\<br>C(i-1,j-1)+1 &amp; i,j\gt 0, x_i=y_j \\<br>max(C(i,j-1),C(i-1,j)) &amp; i,j \gt 0, x_i\neq y_j<br>\end{cases}$$ 第一种情况很好理解。第二种情况就是$x_i$和$y_j$用来匹配了，所以等于了这两个都不用的情况$C(i-1,j-1)$加$1$。第三种情况就是不用$x_i$或者不用$y_j$取一个最大值。<br>其实第三种是最基本的情况，但是由于$max(C(i,j-1),C(i-1,j))$不会比$C(i-1,j-1)+1$更优（为什么？），所以第二种情况中可以不考虑第三种。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">char</span> a[<span class="number">1010</span>],b[<span class="number">1010</span>];</div><div class="line"><span class="keyword">int</span> dp[<span class="number">1010</span>][<span class="number">1010</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%s%s"</span>,a+<span class="number">1</span>,b+<span class="number">1</span>)!=EOF) &#123;</div><div class="line">        <span class="keyword">int</span> n=<span class="built_in">strlen</span>(a+<span class="number">1</span>);</div><div class="line">        <span class="keyword">int</span> m=<span class="built_in">strlen</span>(b+<span class="number">1</span>);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++) &#123;</div><div class="line">                <span class="keyword">if</span> (a[i]==b[j]) dp[i][j]=dp[i<span class="number">-1</span>][j<span class="number">-1</span>]+<span class="number">1</span>;</div><div class="line">                <span class="keyword">else</span> dp[i][j]=max(dp[i<span class="number">-1</span>][j],dp[i][j<span class="number">-1</span>]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[n][m]);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="E-Max-Sum"><a href="#E-Max-Sum" class="headerlink" title="E - Max Sum"></a><a href="https://vjudge.net/problem/HDU-1003" target="_blank" rel="noopener">E - Max Sum</a></h3><p>经典问题，最大子列和。（<strong>连续子序列</strong>，相当于子串）<br>状态转移方程也比较简单：<br>$$dp(i)=max(dp(i-1)+a[i],a[i])=max(dp(i-1),0)+a[i]$$ 分别对应两种情况：</p><ol><li>接在上一次序列的后面</li><li>开始一个新的序列</li></ol><p>输出的字典序最小意味着左端点和右端点都要最小。如果先记录右端点再反向计算左端点，那么：</p><ul><li>$dp$值相等时，右端点不被更新</li><li>和相等时，左端点要被更新</li></ul><p>当然也有其它的记录方法，比如利用数组。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100010</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">1</span>&lt;&lt;<span class="number">28</span>;</div><div class="line"><span class="keyword">int</span> a[N],f[N];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T,n,cas=<span class="number">0</span>;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">while</span> (T--) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> ans=-INF,p,q;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            f[i]=max(f[i<span class="number">-1</span>],<span class="number">0</span>)+a[i];</div><div class="line">            <span class="keyword">if</span> (f[i]&gt;ans) &#123;</div><div class="line">                ans=f[i];</div><div class="line">                q=i;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> now=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=q;i&gt;=<span class="number">1</span>;i--) &#123;</div><div class="line">            now+=a[i];</div><div class="line">            <span class="keyword">if</span> (now==ans) p=i;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"Case %d:\n"</span>,++cas);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>,ans,p,q);</div><div class="line">        <span class="keyword">if</span> (T) <span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="H-不要62"><a href="#H-不要62" class="headerlink" title="H - 不要62"></a><a href="https://vjudge.net/problem/HDU-2089" target="_blank" rel="noopener">H - 不要62</a></h3><p>常见$dp$类型：数位$dp$。可以使用数位$dp$的$dfs$型模板，原理自行查阅。<br><em>ps.</em> 这题数据量比较小，可以预处理$O(1)$回答，但是大家还是要好好学习数位$dp$滴。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">using</span> ll = <span class="keyword">long</span> <span class="keyword">long</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> D=<span class="number">22</span>;</div><div class="line"><span class="keyword">int</span> dig[D];</div><div class="line">ll f[D][<span class="number">10</span>][<span class="number">2</span>];</div><div class="line"></div><div class="line"><span class="function">ll <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> pos,<span class="keyword">int</span> pre,<span class="keyword">int</span> fg,<span class="keyword">int</span> limit)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (pos&lt;<span class="number">0</span>) <span class="keyword">return</span> fg==<span class="number">0</span>;</div><div class="line">    <span class="keyword">if</span> (!limit&amp;&amp;f[pos][pre][fg]!=<span class="number">-1</span>) &#123;</div><div class="line">        <span class="keyword">return</span> f[pos][pre][fg];</div><div class="line">    &#125;</div><div class="line">    ll res=<span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> last=limit?dig[pos]:<span class="number">9</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=last;i++) &#123;</div><div class="line">        res+=dfs(pos<span class="number">-1</span>,i,fg||(pre==<span class="number">6</span>)&amp;&amp;(i==<span class="number">2</span>)||i==<span class="number">4</span>,limit&amp;&amp;(i==last));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (!limit) f[pos][pre][fg]=res;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function">ll <span class="title">solve</span><span class="params">(ll n)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> len=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> (n) &#123;</div><div class="line">        dig[len++]=n%<span class="number">10</span>;</div><div class="line">        n/=<span class="number">10</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> dfs(len<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> n,m;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m)!=EOF) &#123;</div><div class="line">        <span class="keyword">if</span> (!n&amp;&amp;!m) <span class="keyword">break</span>;</div><div class="line">        <span class="built_in">memset</span>(f,<span class="number">-1</span>,<span class="keyword">sizeof</span>(f));</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,solve(m)-solve(n<span class="number">-1</span>));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="I-Unidirectional-TSP"><a href="#I-Unidirectional-TSP" class="headerlink" title="I - Unidirectional TSP"></a><a href="https://vjudge.net/problem/HDU-1619" target="_blank" rel="noopener">I - Unidirectional TSP</a></h3><p>常见$dp$类型：网格图$dp$。如果不考虑上下可以穿越，那么转移方程非常简单：<br>$$dp(i,j)=min(dp(i-1,j-1),dp(i,j-1),dp(i+1,j-1))$$ 上下可以穿越时，需要根据$i$的值特殊处理一下，代码里用的是三目表达式。<br>因为题目要求输出路径，所以用$a_i$储存前一列可以转移过来的行号，又因为题目里要求字典序最小，所以先排个序，之后按照顺序更新，并约定<strong>值相等的不能更新</strong>。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">110</span>,INF=<span class="number">1</span>&lt;&lt;<span class="number">28</span>;</div><div class="line"><span class="keyword">int</span> dp[N][N],pre[N][N];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> n,m;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m)!=EOF) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++) &#123;</div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;dp[i][j]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">                <span class="keyword">int</span> a[<span class="number">3</span>]=&#123;i&#125;;</div><div class="line">                a[<span class="number">1</span>]=(i==<span class="number">1</span>)?n:i<span class="number">-1</span>;</div><div class="line">                a[<span class="number">2</span>]=(i==n)?<span class="number">1</span>:i+<span class="number">1</span>;</div><div class="line">                sort(a,a+<span class="number">3</span>);</div><div class="line">                <span class="keyword">int</span> x=INF,y=<span class="number">-1</span>;</div><div class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;<span class="number">3</span>;k++) &#123;</div><div class="line">                    <span class="keyword">if</span> (dp[a[k]][j<span class="number">-1</span>]&lt;x) &#123;</div><div class="line">                        x=dp[y=a[k]][j<span class="number">-1</span>];</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                dp[i][j]+=x;</div><div class="line">                pre[i][j]=y;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> x=INF,y=<span class="number">-1</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="keyword">if</span> (dp[i][m]&lt;x) &#123;</div><div class="line">                x=dp[y=i][m];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; st;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j=m;j&gt;=<span class="number">1</span>;j--) &#123;</div><div class="line">            st.push(y);</div><div class="line">            y=pre[y][j];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">bool</span> fi=<span class="literal">true</span>;</div><div class="line">        <span class="keyword">while</span> (!st.empty()) &#123;</div><div class="line">            <span class="keyword">if</span> (fi) &#123;</div><div class="line">                <span class="built_in">printf</span>(<span class="string">"%d"</span>,st.top());</div><div class="line">                fi=<span class="literal">false</span>;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="built_in">printf</span>(<span class="string">" %d"</span>,st.top());</div><div class="line">            &#125;</div><div class="line">            st.pop();</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"\n%d\n"</span>,x);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="J-DZY-Loves-Sequences"><a href="#J-DZY-Loves-Sequences" class="headerlink" title="J - DZY Loves Sequences"></a><a href="https://vjudge.net/problem/CodeForces-447C" target="_blank" rel="noopener">J - DZY Loves Sequences</a></h3><p>常见类型：扫一遍预处理。分别求出向左和向右最多可以延伸的长度，然后对于每一个$a_i$：</p><ul><li>如果$a_{i-1} + 1 \lt a_{i+1}$，那么$a_i$可以修改为$a_{i-1}$和$a_{i-1}$之间的某个数使得左右两段连接在一起</li><li>如果$a_{i-1} + 1 \ge a_{i+1}$，那么$a_i$只能修改为比$a_{i-1}$大或者比$a_{i-1}$小的数，即左长度加一或者右长度加一</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100010</span>;</div><div class="line"><span class="keyword">int</span> a[N],l[N],r[N];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> n;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,a+i);</div><div class="line">    &#125;</div><div class="line">    l[<span class="number">1</span>]=<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++) &#123;</div><div class="line">        <span class="keyword">if</span> (a[i<span class="number">-1</span>]&lt;a[i]) l[i]=l[i<span class="number">-1</span>];</div><div class="line">        <span class="keyword">else</span> l[i]=i;</div><div class="line">    &#125;</div><div class="line">    r[n]=n;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=n<span class="number">-1</span>;i;i--) &#123;</div><div class="line">        <span class="keyword">if</span> (a[i]&lt;a[i+<span class="number">1</span>]) r[i]=r[i+<span class="number">1</span>];</div><div class="line">        <span class="keyword">else</span> r[i]=i;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">        l[i]=i-l[i]+<span class="number">1</span>;</div><div class="line">        r[i]=r[i]-i+<span class="number">1</span>;</div><div class="line">        ans=max(ans,max(l[i],r[i]));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">        <span class="keyword">if</span> (a[i<span class="number">-1</span>]+<span class="number">1</span>&lt;a[i+<span class="number">1</span>]) &#123;</div><div class="line">            ans=max(ans,l[i<span class="number">-1</span>]+<span class="number">1</span>+r[i+<span class="number">1</span>]);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            ans=max(ans,max(l[i<span class="number">-1</span>]+<span class="number">1</span>,r[i+<span class="number">1</span>]+<span class="number">1</span>));</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>CSP超级合集</title>
      <link href="/blog/2018/01/16/CSP%E8%B6%85%E7%BA%A7%E5%90%88%E9%9B%86/"/>
      <content type="html"><![CDATA[<h3 id="Before"><a href="#Before" class="headerlink" title="Before"></a>Before</h3><p>听说考得好写在简历里很不错，准备参加三月份的CSP。<br>仅含题解，代码详见<a href="https://github.com/Smlight/CCFCSP" target="_blank" rel="noopener">github</a>。<del>喜欢的话点个star</del></p><h3 id="201712-1-最小差值"><a href="#201712-1-最小差值" class="headerlink" title="201712-1 最小差值"></a>201712-1 最小差值</h3><p>sb-t。随便暴力一下。</p><h3 id="201712-2-游戏"><a href="#201712-2-游戏" class="headerlink" title="201712-2 游戏"></a>201712-2 游戏</h3><p>sb-t。<strong>BUT，</strong>读题的时候没读到<code>或其末位数（即数的个位）为k</code>，直接当约瑟夫做了。。。<br>最垃圾的做法就是拿数组标记一下，手动控制环。（没错我就是这么做的，写起来还是很快的</p><h3 id="201712-3-Crontab"><a href="#201712-3-Crontab" class="headerlink" title="201712-3 Crontab"></a>201712-3 Crontab</h3><p>还没读完题头都大了，写完第4题的第一稿才开始动手做。题目虽然很长，题意其实还是挺清晰的。<br>核心算法就是模拟，用了一次蔡勒公式算出星期几。输入处理简单来讲的话就是，先按‘ ’（空格）split，每段再按‘,’（逗号）split，每段再按‘-’（减号）split，然后再转换成非负整数标记到这个$crontab$对应的布尔数组，比如周一周二那就是在一周的数组中标记$1$和$2$，详见代码。最后从起始到终止一分钟一分钟往上加，每一分钟都枚举$n$个$crontab$判断一下是否满足。算了一下极限复杂度稍微有点方，不过看了一下输出不超过10000行，应该不会TLE。<br>思考加打代码估计有一个多小时。。。最后交上去一看，85分，难道还是TLE了？结果点进去一看是WA，有点懵逼。又读了一遍题，还是没啥发现。查了查别人代码发现好像英文缩写不区分大小写，然后回到题目里一看，中间有一句确实写着，唉。。。</p><h3 id="201712-4-行车路线"><a href="#201712-4-行车路线" class="headerlink" title="201712-4 行车路线"></a>201712-4 行车路线</h3><p><em>ps.</em> <code>201712-4.cpp</code>是60分代码，<code>201712-4S.cpp</code>是满分代码。<br>其实核心思想跟之前是差不多的。首先因为小道的费用（和的平方）没有可加性，所以就要把小道全都做成$tp$（传送卷轴）：启动$tp$以后可以花费一定的费用从一个点传送到另一个点。其次为了保证小道的费用不可加，要限制$tp$不能连续使用，连续使用时费用缩水（$1^2+1^2&lt;(1+1)^2$）。<br>具体实现是：首先用$Floyd$求出只用小道的任意点对间的距离，把这些距离的平方作为$tp$的费用存下来。然后用$SPFA$求单源最短路，分别用两个数组记录$tp$过来的（$dis1$）和从大道过来的（$dis0$），对于边$u\rightarrow  v$，$tp$到$u$的不能再通过$tp$到$v$，其它的不作限制。最后输出$min(dis0(n),dis1(n))$即可。<br><em>ps.</em> $Floyd+SPFA$有风险，一点不考虑常数优化的话交上去<strong>只有50分</strong>，比$dijkstra$乱搞还低。</p><h3 id="201712-5-商路（60分）"><a href="#201712-5-商路（60分）" class="headerlink" title="201712-5 商路（60分）"></a>201712-5 商路（60分）</h3><p>没剩太多时间，$n^2$直接上，小数据一分没丢。<em>yes!</em></p><h3 id="201712-总结"><a href="#201712-总结" class="headerlink" title="201712 总结"></a>201712 总结</h3><p>最近的一场，比较真实地模拟了一下（最后才一起提交），结果才320分，5个题第2题最低，好SB啊。。。</p><ol><li><strong>仔细读题非常重要！</strong>第2题读对可以多70分，第3题完全读对可以多15分，这样勉强可以上400</li><li><strong>想不到正解要快速把握部分分。</strong>从中学开始就喜欢比赛时先想正解，但是水平又不太行，经常会花大把时间做无用功。第4题大概改写了两三遍，如果一开始就想着先按60分的写，第2/5题分配到的时间就会再多一点。时间一多，分数就有上涨的可能，特别是第2题我还看着$k$的数据范围奇怪了一会儿，最后还是没发现那句话。。。</li></ol><p>这两点说起来容易，其实还是挺有难度的，看来要多加训练了。。。</p><p>=========UPDATE=========<br>好像认证是四个小时，我一直当三个小时练的，应该不会时间太吃紧了。。。</p><h3 id="201709-1-打酱油"><a href="#201709-1-打酱油" class="headerlink" title="201709-1 打酱油"></a>201709-1 打酱油</h3><p>sb-t。随便贪心一下。</p><h3 id="201709-2-公共钥匙盒"><a href="#201709-2-公共钥匙盒" class="headerlink" title="201709-2 公共钥匙盒"></a>201709-2 公共钥匙盒</h3><p>小模拟，核心就是给所有事件排序。</p><h3 id="201709-3-JSON查询"><a href="#201709-3-JSON查询" class="headerlink" title="201709-3 JSON查询"></a>201709-3 JSON查询</h3><p>中等模拟，除了基本的split以外，涉及到了括号匹配的知识，只有同一层的括号它们才有可能组成一个JSON对象。<br>具体来讲，可以一边dfs一边建树，但是传个字符串递归总是很慢的，我的习惯是传一下左右边界。建树的节点都是整数标识，再用额外的数组存一下key-value。然后查询的时候一层一层地查，每层有以下几种情况：</p><ol><li>子节点没有对应的串，一定返回“NOTEXIST”</li><li>子节点有对应的串，查询串没有下一层，要么“STRING”要么“OBJECT”</li><li>子节点有对应的串且是对象，查询串有下一层，继续递归</li><li>子节点有对应的串且是字符串，查询串有下一层，返回“NOTEXIST”</li></ol><p><em>手动处理累手不累脑子</em></p><h3 id="201709-4-通信网络"><a href="#201709-4-通信网络" class="headerlink" title="201709-4 通信网络"></a>201709-4 通信网络</h3><p>刚读完懵逼了，写了一大堆乱七八糟的。。。<br>其实就是原图和反图bfs一下，然后可达点取个并集，是全集就给答案加一。</p><h3 id="201709-5-除法"><a href="#201709-5-除法" class="headerlink" title="201709-5 除法"></a>201709-5 除法</h3><p>50：暴力，每次缩小和求和都扫一遍<br>100：查到几个树状数组的做法，感觉复杂度完全不对，代码放了，正解待定。</p><h3 id="201709-总结"><a href="#201709-总结" class="headerlink" title="201709 总结"></a>201709 总结</h3><p>前4题检查了一遍，第5题打了个暴力，然后啥都不想干就交了，毕竟不是真实考试。。。好在前4题都过了，第5题暴力也很成功。<br><strong>第4题大改，检查很有必要。</strong></p><h3 id="201403-1-相反数"><a href="#201403-1-相反数" class="headerlink" title="201403-1 相反数"></a>201403-1 相反数</h3><p>不会重复，直接取绝对值找出现两次的。</p><h3 id="201312-1-出现次数最多的数"><a href="#201312-1-出现次数最多的数" class="headerlink" title="201312-1 出现次数最多的数"></a>201312-1 出现次数最多的数</h3><p>sb-t。计数随便扫一下。</p><h3 id="201312-2-ISBN号码"><a href="#201312-2-ISBN号码" class="headerlink" title="201312-2 ISBN号码"></a>201312-2 ISBN号码</h3><p>sb-t。随便模拟一下。</p><h3 id="201312-3-最大的矩形"><a href="#201312-3-最大的矩形" class="headerlink" title="201312-3 最大的矩形"></a>201312-3 最大的矩形</h3><p>easy mode：枚举左端点，枚举右端点，顺便维护最小值，乘一下更新一下。<br>medium mode：考虑枚举一个点，并使该点就是区间中最低的，那么就是要求向左向右第一个低于当前点的。这件事情可以用单调栈来搞，正反各一遍。</p><h3 id="201312-4-有趣的数"><a href="#201312-4-有趣的数" class="headerlink" title="201312-4 有趣的数"></a>201312-4 有趣的数</h3><p>一眼看上去想搜索，但是仔细一想。。。是个数学题，稍微懵逼了一会儿，还是要慢慢来，列列式子。<br>因为0都在1之前，也就是说最后一个0在第一个1之前，那么它们可以看作一个整体。又因为每个数字至少出线一次，所以第一个一定是0。23同理。<br>设0和1的总位数是$x$，那么首先要在$n$位中选出$x$位，又因为整个串的第一位不能是0，所以应该是$n-1$位，即$C_{n-1}^{x}$。剩下的$n-x$位分给23。然后在这x位中，只要选一个位置断开，前面是0后面是1即可。枚举最末的0，除了不能在最后都可以（必须有1）。23同理。所以答案等于$C_{n-1}^{x} C_{x-1}^{1} C_{n-x-1}^{1}，2 \le x \le n-2$。$n$小于等于1000，阶乘打表或者组合数打表，随便搞搞。</p><h3 id="201312-5-I’m-stuck"><a href="#201312-5-I’m-stuck" class="headerlink" title="201312-5 I’m stuck!"></a>201312-5 I’m stuck!</h3><p>70：我以为$50^4$肯定能过的。。。直接写了个先起点bfs再每个格子bfs的。。。TLE<br>100：可以直接连边在图上和反图上搜。但是不太想重写，所以加了一个反向搜的函数，注意反向的时候判断的是要到的那个格子的连通方向。</p><h3 id="201312-总结"><a href="#201312-总结" class="headerlink" title="201312 总结"></a>201312 总结</h3><p>作为全系列第一场，非常简单，甚至不需要什么算法知识就能ak。</p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2017 CCPC 秦皇岛站游记</title>
      <link href="/blog/2017/12/08/2017qinhuangdao_play/"/>
      <content type="html"><![CDATA[<h3 id="正文"><a href="#正文" class="headerlink" title="正文"></a><strong>正文</strong></h3><h4 id="BEFORE"><a href="#BEFORE" class="headerlink" title="BEFORE"></a><em>BEFORE</em></h4><p>我校网赛打出来一个名额，教练钦定我们队去。<br>现在都是固定队了，我的队友是 wenwenla 和 jxc 。</p><p>自从听说浙大出题以后，我就一直努力想把zimpha出过的bestcoder都过一遍。<br>【虽然他不出这场但是我感觉题目风格可能有传承？咸鱼的挣扎 ←_←<br>结果发现他出过的bc题实在是太多了。。。于是就按照vj的规格拉了最近的26题练了练。。。非常重视思维，怎么说呢，感觉上没什么套路题，详见<a href="https://smlight.github.io/blog/2017/10/18/zimpha%E7%9A%84bc%E5%87%BA%E9%A2%98%E5%BD%95/">zimpha的bc出题录</a>。</p><h4 id="Oct-26"><a href="#Oct-26" class="headerlink" title="Oct 26"></a><em>Oct 26</em></h4><p>翻了翻高中通讯录，有一个东秦的同学，非常高兴地问她借了词典~<br>晚上让队友把这个简要题解也都过一遍，然后买了泡面和小香肠啥的第二天吃。</p><h4 id="Oct-27"><a href="#Oct-27" class="headerlink" title="Oct 27"></a><em>Oct 27</em></h4><p>没有老师带队，我们自己坐高铁去，睡睡觉吃吃面看看片，日子过得还是挺开心的。路上感觉河北的污染确实比较严重，然后在高铁上问AA姐姐要了几个口罩2333333<br>下了高铁坐公交，跟wc一路。找到宾馆直接从人家后厨就进去了。。。还好找到了报到的地方，真的发了环卫工人服，一切正常。<br>安顿了一下就是饭点了，出去吃了个酱骨自助，竟然有个烧烤和小锅一体的机器！长见识。<br>吃了很久，筒骨还是蛮油的，差点肉醉[笑cry]<br>很饱的我们于是就想散个步，强行在老虎石公园拍了很多照片【基本看不清啥<br>逛完了出来看到卖手链的，问了问看了看，然后每个人买了个指尖陀螺？？？</p><h4 id="Oct-28"><a href="#Oct-28" class="headerlink" title="Oct 28"></a><em>Oct 28</em></h4><p>早上吃饭，宾馆的实在是没啥想吃的东西，咖啡也不给喝。。。<br>坐主办方的车过去，结果报过到的队啥都不用干。。。<br>然后我们就开始瞎逛，不抱希望地联系了一下同学【因为她说周六早上没空<br>结果我们还没正式开始逛她就回复我啦，而且一下子就找到了我们~<br>她说是参加高数竞赛，然后水了水就出来了hhhhhhh</p><p>中午一不小心就点了个比较重口的菜，不过味道还可以。</p>]]></content>
      
      
        <tags>
            
            <tag> Life </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>zimpha的bc出题录（部分）</title>
      <link href="/blog/2017/10/18/zimpha%E7%9A%84bc%E5%87%BA%E9%A2%98%E5%BD%95/"/>
      <content type="html"><![CDATA[<h3 id="A-GCD-is-Funny"><a href="#A-GCD-is-Funny" class="headerlink" title="A - GCD is Funny"></a><a href="https://vjudge.net/problem/HDU-5902" target="_blank" rel="noopener">A - GCD is Funny</a></h3><p>题意：在黑板上写有$n$个数，每次删掉$a,b,c$三个数并把$d$写两遍，$d$可以是$(a,b),(a,c),(b,c)$。在$n-2$次操作后会留下两个相同的数，输出这个数的所有可能情况。<br>题解：给跪了。。。其实是所有大小超过$1$的子集的$gcd$的集合。。。</p><p>注意点：<strong>值域限制</strong>，说是子集当然不可能直接按子集做，而是利用值域很小这一点标记着做；<strong>gcd下降速度</strong>，两个不一样的数取$gcd$，最大也只能是大数的一半，即<strong>对数级别次</strong>就可以到$1$。</p><h3 id="B-Square-Distance"><a href="#B-Square-Distance" class="headerlink" title="B - Square Distance"></a><a href="https://vjudge.net/problem/HDU-5903" target="_blank" rel="noopener">B - Square Distance</a></h3><p>题意：给一个串$s$，长度为$n$(保证偶数)，输出一个串$t$，要满足：$t$由两个相同的串拼接而成；$s$到$t$的汉明距离恰好为$m$；$t$是所有满足条件的串中字典序最小的。$s,t$均只含小写字母，若$t$不存在输出<code>Impossible</code>。<br>题解：后半段放到前半段综合考虑，用dp可以求出前$i$个字符产生$j$个距离可不可行。因为要输出字典序最小，所以最终的贪心一定是从前往后从小往大，若是直接在这种dp上贪心，会导致最后的距离不一定是$m$。所以这里需要倒着dp，即从第$\frac{n}{2}$个到第$i$个字符产生$j$个距离可不可行。</p><p>注意点：看着很像贪心但是没有具体策略的时候一定要<strong>想一想dp</strong>！不一定只贪心或者只dp，也不一定是用贪心优化dp，像这题就是<strong>在dp得到的表上进行贪心</strong>。</p><h3 id="C-LCIS"><a href="#C-LCIS" class="headerlink" title="C - LCIS"></a><a href="https://vjudge.net/problem/HDU-5904" target="_blank" rel="noopener">C - LCIS</a></h3><p>题意：给出$n$个数的序列$a$和$m$个数的序列$b$，问公共的上升的并且数值连续的子序列的最长长度。<br>题解：对$a$扫一遍得到以$x$结尾的连续值上升子序列的最长长度，同样地对$b$扫一遍，最后枚举结尾是什么数字，取两个结果的较小值更新答案。</p><p>注意点：当对子序列的限制非常强时，很有可能可以<strong>每个序列分开做</strong>，最后再合并到答案。</p><h3 id="D-Black-White-Tree"><a href="#D-Black-White-Tree" class="headerlink" title="D - Black White Tree"></a><a href="https://vjudge.net/problem/HDU-5905" target="_blank" rel="noopener">D - Black White Tree</a></h3><p>题意：$n$个节点的无根树$T$，每个节点是黑色或者白色，求$W = \displaystyle\sum_{a=0}^{n}\sum_{b=0}^{n}{(a+1)(b+1)S(a,b)}$，其中$S(a,b)=1$表示存在一个子树恰好由$a$个白色节点和$b$个黑色节点构成，$S(a,b)=0$表示不存在。$T$的一个子树定义为$T$的一个子图并且是树。<br>题解：对于确定大小的子树，如果可以知道最少以及最多有几个黑色节点，那么答案直接两重循环加一个判断就可以算出来了。所以我们可以进行树形dp求出这个最少和最多。先规定$1$作为根，那么题意中的子树就是规定根以后的连通块，用$f[u][i],g[u][i]$分别表示以$u$为根，大小为$i$时最少和最多的黑色节点数，用$F[i],G[i]$表示连通块大小为$i$时最少和最多的黑色节点数。这个转移直接借助代码来说还更好一点。<br><figure class="highlight prolog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">void dfs(int u,int fa)</div><div class="line">&#123;</div><div class="line">    sz[u]=<span class="number">1</span>;</div><div class="line">    f[u][<span class="number">1</span>]=g[u][<span class="number">1</span>]=s[u]-<span class="string">'0'</span>;</div><div class="line">    for (int v:eg[u]) &#123;</div><div class="line">        if (v==fa) continue;</div><div class="line">        dfs(v,u);</div><div class="line">        for (int i=sz[u];i&gt;=<span class="number">1</span>;i--) &#123;</div><div class="line">            for (int j=<span class="number">1</span>;j&lt;=sz[v];j++) &#123;</div><div class="line">                f[u][i+j]=min(f[u][i+j],f[u][i]+f[v][j]);</div><div class="line">                g[u][i+j]=max(g[u][i+j],g[u][i]+g[v][j]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        sz[u]+=sz[v];</div><div class="line">    &#125;</div><div class="line">    for (int i=<span class="number">1</span>;i&lt;=sz[u];i++) &#123;</div><div class="line">        <span class="symbol">F</span>[i]=min(<span class="symbol">F</span>[i],f[u][i]);</div><div class="line">        <span class="symbol">G</span>[i]=max(<span class="symbol">G</span>[i],g[u][i]);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>每个节点被访问深度次，所以最终的复杂度是$O(n^2)$。</p><p>注意点：<strong>无根树的子树</strong>等价于确定一个根以后的<strong>连通块</strong>。</p><h3 id="F-Aaronson"><a href="#F-Aaronson" class="headerlink" title="F - Aaronson"></a><a href="https://vjudge.net/problem/HDU-5747" target="_blank" rel="noopener">F - Aaronson</a></h3><p>题意：$x_{0}+2x_{1}+4x_{2}+…+2^{m}x_{m}=n$的解是$(x_0,x_1,x_2,…,x_m)$，$x_i \ge 0$，求$\displaystyle\sum_{i=0}^{m} x_i$的最小值，$(0 \le n,m \le 10^9)$。<br>题解：若$m$比较小，特殊处理一下$x_m$，剩下的以及其他的情况都是二进制表示的$1$的个数。</p><h3 id="G-Bellovin"><a href="#G-Bellovin" class="headerlink" title="G - Bellovin"></a><a href="https://vjudge.net/problem/HDU-5748" target="_blank" rel="noopener">G - Bellovin</a></h3><p>题意：长度为$n$的$a$序列，求一个长度也为$n$的$b$序列满足，$a$中以$a_i$结尾的$LIS$长度和$b$中以$b_i$结尾的$LIS$长度相等$(1\le i \le n)$，$b$的字典序最小。<br>题解：因为$b_i$最小是$1$，直接把$a$中以$a_i$结尾的$LIS$长度当作$b_i$即可。</p><h3 id="H-Colmerauer"><a href="#H-Colmerauer" class="headerlink" title="H - Colmerauer"></a><a href="https://vjudge.net/problem/HDU-5749" target="_blank" rel="noopener">H - Colmerauer</a></h3><p>题意：一个矩阵的权值定义为其所含的所有鞍点的值的和，若一个点在列上是唯一最大值，在行上是唯一最小值，则其为鞍点。又在矩阵$M$上定义$S(a,b)$，表示所有大小为$a$行$b$列的子矩阵的权值和。现给出矩阵$M$，求$W = (\displaystyle\sum_{a=1}^{n}\sum_{b=1}^{m}{a \cdot b \cdot S(a,b)}) \text{ mod } 2^{32}$。<br>题解：很容易想到单点贡献。对于矩阵中的每一个点，我们暴力出（或者用单调栈优化一下）它能往上下左右延伸的长度，然后直接贡献即可。</p><p>注意点：左右长度的算式没有理清楚，应该<strong>写出原始的公式再进行化简</strong>。</p><h3 id="I-Dertouzos"><a href="#I-Dertouzos" class="headerlink" title="I - Dertouzos"></a><a href="https://vjudge.net/problem/HDU-5750" target="_blank" rel="noopener">I - Dertouzos</a></h3><p>题意：$n$的真因子是不为$n$的因子。给出$n$和$d$，问有多少小于$n$的数的最大真因子是$d$。<br>题解：即$pd=m&lt;n$，显然有</p><ol><li>$p \le \frac{n-1}{d}$；</li><li>$p$必须为质数；【如若不然，则$p$有真因子$q$，$qd$是比$d$更大的$m$的真因子。 </li><li>$p \le c$，其中$c$为$d$的最小质因子。【如若不然，则$\frac{d}{c}\times p$是比$d$更大的$m$的真因子。</li></ol><p>由2，我们先做一遍筛法以及前缀和。再算出1的界，最后用筛出来的质数去算3的界。</p><p>注意点：用筛出来的质数去算3的界会有$O(\sqrt{d})$的复杂度，当$d$很大($\approx 10^{9}$)时会超时，而此时1的界必然比较小，应该<strong>在超过已有的界时及时退出</strong>。</p><h3 id="J-Eades"><a href="#J-Eades" class="headerlink" title="J - Eades"></a><a href="https://vjudge.net/problem/HDU-5751" target="_blank" rel="noopener">J - Eades</a></h3><p>题意：长度为$n$的$a$序列，定义$g(l,r)$为$a_l$到$a_r$的最大值，定义$f(l,r)=\displaystyle\sum_{i=l}^{r}[a_i = g(l,r)]$。求对于所有$1\le k \le n$的$k$分别有多少对$(l,r)$满足$f(l,r)=k$。<br>题解：如果$a_i$要对$f$函数有贡献的话必须是这个区间内最大的，所以首先用单调栈求出往左以及往右第一个大于$a_i$的位置。那么在$L+1…R-1$中，$a_i$这个值将区间分为若干段，朴素的想法是直接枚举左端点和右端点在哪一段上然后累加到答案，但是这样还是$O(n^2)$的<del>【其实处理得好能卡过</del>，不过进一步可以发现具体贡献到哪一个答案其实只跟$j-i$(两个段编号的差)有关，那么把其中一个反过来就是一个卷积形式，可以套一个$fft$。</p><p>注意点：具体细节较多，<strong>想不清楚时一定要耐心&amp;动手模拟一下</strong>。</p><h3 id="K-LCP-Array"><a href="#K-LCP-Array" class="headerlink" title="K - LCP Array"></a><a href="https://vjudge.net/problem/HDU-5635" target="_blank" rel="noopener">K - LCP Array</a></h3><p>题意：$s$是一个$1base$的字符串，记$a_i=lcp(ssuff_i,suff_{i+1})$，$(1 \le i &lt; n)$。现给出$a$序列，问有多少只含小写字母的字符串$s$满足这个序列。<br>题解：若$a_i$不为$0$，那么$s_i…s_{i+a_{i}}$这些字符必须全都相同(手动模拟一下)，由此推出从后往前：$a_i$不为$0$则必须连续地增加，若不满足答案为$0$；$a_i$为$0$则将答案乘上25。</p><h3 id="L-Shortest-Path"><a href="#L-Shortest-Path" class="headerlink" title="L - Shortest Path"></a><a href="https://vjudge.net/problem/HDU-5636" target="_blank" rel="noopener">L - Shortest Path</a></h3><p>题意：$n$个点的无向图，原来在$i$和$i+1$之间有边，现在添加3条边，所有边的权值都是$1$，每次询问$u$到$v$的最短路是多少。<br>题解：实际上就是改变了6个点(或者不到6个)之间的距离，直接Floyd。询问的时候直接暴力枚举穿过哪两个点。</p><p>注意点：不要忘记跟初始的距离取$min$。</p><h3 id="M-Transform"><a href="#M-Transform" class="headerlink" title="M - Transform"></a><a href="https://vjudge.net/problem/HDU-5637" target="_blank" rel="noopener">M - Transform</a></h3><p>题意：给出$n$个数，可以对整数$x$进行两种操作，</p><ol><li>翻转$x$的一个bit；</li><li>$x \leftarrow x\ xor\ a_i$ 。</li></ol><p>每次询问把$S$变成$T$最少需要几步。<br>题解：两个操作都可以归结为$xor$，所以从$S$走到$T$跟从$0$走到$S\ xor\ T$是等价的。直接以$0$为起点按两种操作进行$bfs$，$O(1)$回答。</p><p>注意点：<strong>状态数trick</strong>，虽然每次有几十条边，但是最后询问的范围只有$10^5$左右，最多也就是$0$到$(2^{17}-1)$每个点都走一遍。</p><h3 id="N-Toposort"><a href="#N-Toposort" class="headerlink" title="N - Toposort"></a><a href="https://vjudge.net/problem/HDU-5638" target="_blank" rel="noopener">N - Toposort</a></h3><p>题意：有向无环图有$n$个点$m$条边，问恰好删除$k$条边可以做到的字典序最小的拓扑序。<br>题解：考虑字典序最小，首先$1$号点放在第一绝对比放在第二好，那么：如果$1$号点当前的入度$d_1$小于等于$k$，直接将这$d_1$条边全部删除即可；如果大于，再测试$2$号点、$3$号点……。用优先队列保证每次取出的是最小编号的点，每条边访问一次，每个点最多入队$n$次，复杂度感觉上是$O((n+m)log{n})$。</p><p>注意点：<strong>对字典序和贪心的理解不够深刻</strong>。</p><h3 id="O-Deletion"><a href="#O-Deletion" class="headerlink" title="O - Deletion"></a><a href="https://vjudge.net/problem/HDU-5639" target="_blank" rel="noopener">O - Deletion</a></h3><p>题意：无向图$G$有$n$个点$m$条边，每次可以删除一个边集，要求这个边集组成的导出子图的每个连通分量最多只有一个环。问最少几次可以把图$G$完全删除。<br>题解：对于一个连通分量，若至多一个环，那它就是一个广义的环加外向树（可以没有环或者没有树）。环加树又可以理解为每个点最多一个出度，再反推回去，若有答案为$k$，那么等价于给图$G$中的每条边定向，使得所有点的出度均不超过$k$。考虑到一条边$(u,v)$，要么在$u$是出度要么在$v$是出度，新建一个点$x_{uv}$表示原图中的这条边，那么它要么与$u$匹配要么与$v$匹配。在这个新图中，左边的点(原图的点)最多匹配$k$次，右边的点(原图的边)最多匹配$1$次，且当右边的点完全匹配时$k$是一个可行的答案，可以二分答案每次判断最大流是不是等于$m$。xg最后提到其实二分可以不要，因为右边的点到汇的容量始终是$1$，每次改改增广路啥的。<del>【然而这种操作本菜鸡就没必要学了吧。。。</del></p><p>注意点：环、树、环加树的<strong>点数边数</strong>以及<strong>度数</strong>都有特殊的结论。</p><h3 id="P-Card-Game"><a href="#P-Card-Game" class="headerlink" title="P - Card Game"></a><a href="https://cn.vjudge.net/problem/HDU-5494" target="_blank" rel="noopener">P - Card Game</a></h3><p>题意：Soda 和 Beta 各有$n$张牌，两人随机抽$m$张牌，用它们的和比大小，问 Soda 能不能稳赢。<br>题解：取 Soda 最小的$m$张跟 Beta 最大的$m$张，它们的和比一下大小。</p><h3 id="Q-LCS"><a href="#Q-LCS" class="headerlink" title="Q - LCS"></a><a href="https://cn.vjudge.net/problem/HDU-5495" target="_blank" rel="noopener">Q - LCS</a></h3><p>题意：有两个排列${a_1, a_2, …, a_n}$，${b_1, b_2, …, b_n}$，要找到另一个排列${p_1, p_2, …, p_n}$，使得${a_{p_1},a_{p_2},…,a_{p_n}}$和${b_{p_1},b_{p_2},…,b_{p_n}}$的$LCS$最长，输出$LCS$长度的最大值。<br>题解：$b$是$a$的置换，长度为$l$的环能产生$l-1$的$LCS$。</p><p>注意点：特判环长度为1。</p><h3 id="R-Beauty-of-Sequence"><a href="#R-Beauty-of-Sequence" class="headerlink" title="R - Beauty of Sequence"></a><a href="https://vjudge.net/problem/HDU-5496" target="_blank" rel="noopener">R - Beauty of Sequence</a></h3><p>题意：定义魅力值为一个序列去除序列中连续重复元素(每一段只保留一个)后的序列的和。给出$n$个数的序列$a$，求$a$的所有子序列的魅力值之和。<br>题解：考虑单点贡献，并且出现连续相同值时只有最左边的要贡献。那么对于$a_i$，只要之前的子序列不以$a_i$结尾就可以贡献，累加答案以后更新一下以$a_i$结尾的子序列的数量即可。</p><p>注意点：不用考虑本质不同。</p><h3 id="U-Souvenir"><a href="#U-Souvenir" class="headerlink" title="U - Souvenir"></a><a href="https://vjudge.net/problem/HDU-5310" target="_blank" rel="noopener">U - Souvenir</a></h3><p>题意：$p$块钱可以买1个纪念品，$q$块钱可以买纪念品套装，内含$m$个纪念品，问要给$n$个人各发一个纪念品至少要多少钱。<br>题解：只有三种情况，只用$p$，只用$q$，用$q$直到剩下不到$m$的用$p$。</p><p>注意点：显然是可以多买的。</p><h3 id="W-Sequence"><a href="#W-Sequence" class="headerlink" title="W - Sequence"></a><a href="https://vjudge.net/problem/HDU-5312" target="_blank" rel="noopener">W - Sequence</a></h3><p>题意：一个数列的第$n(n \ge 1)$项为$3n(n-1)+1$，给出一个数$m$，问至少几个数的和能恰好等于$m$。如，$22 = 19 + 1 + 1 + 1 = 7 + 7 + 7 + 1$。若不能，输出$-1$。<br>题解：联想到三角形数$a_{n}=\frac{1}{2}n(n-1)$，至多3个三角形数可以表示任意自然数。而$3n(n-1)+1=6a_{n}+1$，那么$m\equiv ans \mod 6$。特判一下$ans$等于$1$或$2$，否则就是$3\dots 8$中与$m$同余的数。</p><p>注意点：<strong>特判也需要考虑复杂度</strong>！</p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2017ICPC乌鲁木齐网络赛 全题解</title>
      <link href="/blog/2017/09/25/2017urumqi_online/"/>
      <content type="html"><![CDATA[<h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><p>仅含题解，代码详见<a href="https://github.com/Smlight/ACMer/tree/master/2017/09/09/icpc_urumqi" target="_blank" rel="noopener">github</a>。<del>喜欢的话点个star</del></p><h3 id="A-Banana"><a href="#A-Banana" class="headerlink" title="A. Banana"></a>A. Banana</h3><p>直接暴力。</p><h3 id="B-Out-out-control-cars"><a href="#B-Out-out-control-cars" class="headerlink" title="B. Out-out-control cars"></a>B. Out-out-control cars</h3><p>可以看作相对运动，然后三条射线跟三条线段判相交。<br>要注意的是大三角形的射线不碰到小三角形也可以yes，这个我们可以通过两个都判一遍来解决。<br>还有一种情况（数据里好像没有）是两者相对静止并且一个套一个，按照题意也是yes。</p><h3 id="C-Coconut"><a href="#C-Coconut" class="headerlink" title="C. Coconut"></a>C. Coconut</h3><p>直接模拟。</p><h3 id="D-Hack-Portals"><a href="#D-Hack-Portals" class="headerlink" title="D. Hack Portals"></a>D. Hack Portals</h3><p>poj原题。<del>没做过，所以比赛的时候也没做</del><br>按照坐标排序后，有一个贪心的结论：i到j这一段区间中，最优情况下最后一个做的不是i就是j。<br>考虑区间dp，我们用dp[i][j][0]表示i到j这一段最后做i的最小花费，dp[i][j][1]表示i到j这一段最后做j的最小花费。<br>转移还是挺容易的，转移了以后还要再考虑一下开放的时间。</p><h3 id="E-Half-consecutive-Numbers"><a href="#E-Half-consecutive-Numbers" class="headerlink" title="E. Half-consecutive Numbers"></a>E. Half-consecutive Numbers</h3><p>打表。<del>反正我们队只会打表了</del><br><img src="http://img.blog.csdn.net/20170928164144650" alt="q巨题解"></p><h3 id="F-Islands"><a href="#F-Islands" class="headerlink" title="F. Islands"></a>F. Islands</h3><p>hdu原题。<br>缩点以后看出度为0的点数和入度为0的点数，答案为较大值。注意特判只有1个scc。</p><h3 id="G-Query-on-a-string"><a href="#G-Query-on-a-string" class="headerlink" title="G. Query on a string"></a>G. Query on a string</h3><p>因为模式串的长度很短，小于等于10，所以修改一个字符最多只会影响主串中10个位置的匹配情况。那么操作可以转化为10次单点修改和区间求和，用一个树状数组维护就可以了。有影响的那个部分可以用kmp匹配一下。</p><h3 id="H-Skiing"><a href="#H-Skiing" class="headerlink" title="H. Skiing"></a>H. Skiing</h3><p>队友一下子就读懂了，加个源跑最长路就行。</p><h3 id="I-Colored-Graph"><a href="#I-Colored-Graph" class="headerlink" title="I. Colored Graph"></a>I. Colored Graph</h3><p>比赛的时候直接抄的论文。<del>还抄错了好多次</del><br>回忆同色三角形的计数过程，其实是算了异色三角形的个数$S$，$S=\frac{1}{2}\sum_{i=1}^{V}{a_{i}(V-1-a_{i})}$ 。<br>现要使得同色三角形个数尽量小，那么就要使每个点的${a_{i}(V-1-a_{i})}$尽量大。<br>由于和一定，两项自然是越接近结果越大。考虑把点集分为两个，每个集合内部的边都是白色，两个集合之间的都是黑色。<br>若$V$是偶数，那么每个点的值都是一模一样的，不用调整。<br>下面重点讨论$V$是奇数的情况，记$n=\lfloor \frac{V}{2} \rfloor$，则两个点集$V1$，$V2$的大小分别为$n$，$n+1$。<br>在$V1$中，每个点有$n+1$条黑边和$n-1$条白边，这一定是可以更优的。<br>首先把黑边分散地改成白边，即把在$i$和$n+i$之间的黑边改成白边，此时$V1$的点会很平衡，不过$V2$中有$n$个点变成了$n-1$条黑边和$n+1$条白边。<br>所以还能更优，当然这时不能再改$n$条边了，要不然就会没完了。将$V2$修改过的$n$个点分成$\frac{n}{2}$组点对，各点对中的白边改成黑边，那么这$n$个点有$n$条黑边和$n$条白边，非常恰好。如果$n$也是奇数，那么就不能这么恰好了，但是大体是一样的，见代码。</p><h3 id="J-Our-Journey-of-Dalian-Ends"><a href="#J-Our-Journey-of-Dalian-Ends" class="headerlink" title="J. Our Journey of Dalian Ends"></a>J. Our Journey of Dalian Ends</h3><p>hdu原题。<br>中转站为源做一遍最小费用流。</p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>后缀自动机·基本概念</title>
      <link href="/blog/2017/08/27/SAM/"/>
      <content type="html"><![CDATA[<p><span style="color: red">以下全文转载自<a href="http://hihocoder.com/problemset/problem/1441" target="_blank" rel="noopener">hihocoder</a></span>，今天看了一遍突然就懂了，难道我以前看的都是假文章？<br>小Hi：今天我们来学习一个强大的字符串处理工具：后缀自动机（Suffix Automaton，简称SAM）。<strong>对于一个字符串S，它对应的后缀自动机是一个最小的确定有限状态自动机（DFA），接受且只接受S的后缀。</strong></p><p>小Hi：比如对于字符串S=”aabbabd”，它的后缀自动机是：<br><img src="http://media.hihocoder.com/problem_images/20161203/14807564643248.png" alt=""><br>其中红色状态是终结状态。你可以发现对于S的后缀，我们都可以从S出发沿着字符标示的路径（蓝色实线）转移，最终到达终结状态。例如”bd”对应的路径是S59，”abd”对应的路径是S189，”abbabd”对应的路径是S184679。而对于不是S后缀的字符串，你会发现从S出发，最后会到达非终结状态或者“无路可走”。<strong>特别的，对于S的子串，最终会到达一个合法状态。</strong>例如”abba”路径是S1846，”bbab”路径是S5467。<strong>而对于其他不是S子串的字符串，最终会“无路可走”。</strong>例如”aba”对应S18X，”aaba”对应S123X。（X表示没有转移匹配该字符）</p><p>小Ho：好像很厉害的样子！对于任意字符串都能构造出一个SAM吗？另外图中那些绿色虚线是什么？</p><p>小Hi：是的，任意字符串都能构造出一个SAM。我们知道SAM本质上是一个DFA，DFA可以用一个五元组<strong>&lt;字符集，状态集，转移函数、起始状态、终结状态集&gt;</strong>来表示。下面我们将依次介绍对于一个给定的字符串S如何确定它对应的<strong>状态集</strong>和<strong>转移函数</strong>。至于那些绿色虚线虽然不是DFA的一部分，却是SAM的重要部分，有了这些链接SAM是如虎添翼，我们后面再细讲。</p><h2 id="SAM的States"><a href="#SAM的States" class="headerlink" title="SAM的States"></a>SAM的States</h2><p>小Hi：这一节我们将介绍给定一个字符串S，如何确定S对应的SAM有哪些状态。首先我们先介绍一个概念<strong>子串的结束位置集合</strong>endpos。对于S的一个子串s，endpos(s) = s在S中所有出现的结束位置集合。还是以S=”aabbabd”为例，endpos(“ab”) = {3, 6}，因为”ab”一共出现了2次，结束位置分别是3和6。同理endpos(“a”) = {1, 2, 5}, endpos(“abba”) = {5}。</p><p>小Hi：我们把S的所有子串的endpos都求出来。如果两个子串的endpos相等，就把这两个子串归为一类。最终这些endpos的等价类就构成的SAM的状态集合。例如对于S=”aabbabd”：</p><table><thead><tr><th>状态</th><th>子串</th><th>endpos</th></tr></thead><tbody><tr><td>S</td><td>空串</td><td>{0,1,2,3,4,5,6}</td></tr><tr><td>1</td><td>a</td><td>{1,2,5}</td></tr><tr><td>2</td><td>aa</td><td>{2}</td></tr><tr><td>3</td><td>aab</td><td>{3}</td></tr><tr><td>4</td><td>aabb,abb,bb</td><td>{4}</td></tr><tr><td>5</td><td>b</td><td>{3,4,6}</td></tr><tr><td>6</td><td>aabba,abba,bba,ba</td><td>{5}</td></tr><tr><td>7</td><td>aabbab,abbab,bbab,bab</td><td>{6}</td></tr><tr><td>8</td><td>ab</td><td>{3,6}</td></tr><tr><td>9</td><td>aabbabd,abbabd,bbabd,babd,abd,bd,d</td><td>{7}</td></tr></tbody></table><p>小Ho：这些状态恰好就是上面SAM图中的状态。</p><p>小Hi：没错。此外，这些状态还有一些美妙的性质，且等我一一道来。首先对于S的两个子串s1和s2，不妨设length(s1) &lt;= length(s2)，那么<strong>s1是s2的后缀当且仅当endpos(s1) ⊇ endpos(s2)，s1不是s2的后缀当且仅当endpos(s1) ∩ endpos(s2) = ∅。</strong></p><p>小Ho：我验证一下啊… 比如”ab”是”aabbab”的后缀，而endpos(“ab”)={3,6}，endpos(“aabbab”)={6}，是成立的。”b”是”ab”的后缀，endpos(“b”)={3,4,6}, endpos(“ab”)={3,6}也是成立的。”ab”不是”abb”的后缀，endpos(“ab”)={3,6}，endpos(“abb”)={4}，两者没有交集也是成立的。怎么证明呢？</p><p>小Hi：证明还是比较直观的。首先证明<strong>s1是s2的后缀=&gt;endpos(s1) ⊇ endpos(s2)</strong>：既然s1是s2后缀，所以每次s2出现时s1以必然伴随出现，所以有endpos(s1) ⊇ endpos(s2)。再证明<strong>endpos(s1) ⊇ endpos(s2)=&gt;s1是s2的后缀</strong>：我们知道对于S的子串s2，endpos(s2)不会是空集，所以endpos(s1) ⊇ endpos(s2)=&gt;存在结束位置x使得s1结束于x，并且s2也结束于x，又length(s1) &lt;= length(s2)，所以s1是s2的后缀。综上我们可知<strong>s1是s2的后缀当且仅当endpos(s1) ⊇ endpos(s2)。s1不是s2的后缀当且仅当endpos(s1) ∩ endpos(s2) = ∅</strong>是一个简单的推论，不再赘述。</p><p>小Ho：我好像对SAM的状态有一些认识了！我刚才看上面的表格就觉得SAM的一个状态里包含的子串好像有规律。考虑到SAM中的一个状态包含的子串都具有相同的endpos，那它们应该都互为后缀？</p><p>小Hi：你观察力还挺敏锐的。下面我们就来讲讲一个状态包含的子串究竟有什么关系。上文提到我们把S的所有子串按endpos分类，每一类就代表一个状态，所以我们可以认为一个状态包含了若干个子串。我们用substrings(st)表示状态st中包含的所有子串的集合，longest(st)表示st包含的最长的子串，shortest(st)表示st包含的最短的子串。例如对于状态7，substring(7)={aabbab,abbab,bbab,bab}，longest(7)=aabbab，shortest(7)=bab。</p><p>小Hi：<strong>对于一个状态st，以及任意s∈substrings(st)，都有s是longest(st)的后缀。</strong>证明比较容易，因为endpos(s)=endpos(longest(st))，所以endpos(s) ⊇ endpos(longest(st))，根据我们刚才证明的结论有s是longest(st)的后缀。</p><p>小Hi：此外，<strong>对于一个状态st，以及任意的longest(st)的后缀s，如果s的长度满足：length(shortest(st)) &lt;= length(s) &lt;= length(longsest(st))，那么s∈substrings(st)。</strong>证明也是比较容易，因为：length(shortest(st)) &lt;= length(s) &lt;= length(longsest(st))，所以endpos(shortest(st)) ⊇ endpos(s) ⊇ endpos(longest(st))， 又endpos(shortest(st)) = endpos(longest(st))，所以endpos(shortest(st)) = endpos(s) = endpos(longest(st))，所以s∈substrings(st)。</p><p>小Ho：这么说来，substrings(st)包含的是longest(st)的一系列<strong>连续</strong>后缀？</p><p>小Hi：没错。比如你看状态7中包含的就是aabbab的长度分别是6，5，4，3的后缀；状态6包含的是aabba的长度分别是5，4，3，2的后缀。</p><h2 id="SAM的Suffix-Links"><a href="#SAM的Suffix-Links" class="headerlink" title="SAM的Suffix Links"></a>SAM的Suffix Links</h2><p>小Hi：前面我们讲到substrings(st)包含的是longest(st)的一系列<strong>连续</strong>后缀。这连续的后缀在某个地方会“断掉”。比如状态7，包含的子串依次是aabbab,abbab,bbab,bab。按照连续的规律下一个子串应该是”ab”，但是”ab”没在状态7里，你能想到这是为什么么？</p><p>小Ho：aabbab,abbab,bbab,bab的endpos都是{6}，下一个”ab”当然也在结束位置6出现过，但是”ab”还在结束位置3出现过，所以”ab”比aabbab,abbab,bbab,bab出现次数更多，于是就被分配到一个新的状态中了。</p><p>小Hi：没错，当longest(st)的某个后缀s在新的位置出现时，就会“断掉”，s会属于新的状态。比如上例中”ab”就属于状态8，endpos(“ab”}={3,6}。当我们进一步考虑”ab”的下一个后缀”b”时，也会遇到相同的情况：”b”还在新的位置4出现过，所以endpos(“b”)={3,4,6}，b属于状态5。在接下去处理”b”的后缀我们会遇到空串，endpos(“”)={0,1,2,3,4,5,6}，状态是起始状态S。</p><p>小Hi：于是我们可以发现一条状态序列：7-&gt;8-&gt;5-&gt;S。这个序列的意义是longest(7)即aabbab的后缀依次在状态7、8、5、S中。我们用Suffix Link这一串状态链接起来，这条link就是上图中的绿色虚线。</p><p>小Ho：原来如此。</p><p>小Hi：Suffix Links后面会有妙用，我们暂且按下不表。</p><h2 id="SAM的Transition-Function"><a href="#SAM的Transition-Function" class="headerlink" title="SAM的Transition Function"></a>SAM的Transition Function</h2><p>小Hi：最后我们来介绍SAM的转移函数。对于一个状态st，我们首先找到从它开始下一个遇到的字符可能是哪些。我们将st遇到的下一个字符集合记作next(st)，有next(st) = {S[i+1] | i ∈ endpos(st)}。例如next(S)={S[1], S[2], S[3], S[4], S[5], S[6], S[7]}={a, b, d}，next(8)={S[4], S[7]}={b, d}。</p><p>小Hi：对于一个状态st来说和一个next(st)中的字符c，你会发现substrings(st)中的所有子串后面接上一个字符c之后，新的子串仍然都属于同一个状态。比如对于状态4，next(4)={a}，aabb,abb,bb后面接上字符a得到aabba，abba，bba，这些子串都属于状态6。</p><p>小Hi：所以我们对于一个状态st和一个字符c∈next(st)，可以定义转移函数trans(st, c) = x | longest(st) + c ∈ substrings(x) 。换句话说，我们在longest(st)（随便哪个子串都会得到相同的结果）后面接上一个字符c得到一个新的子串s，找到包含s的状态x，那么trans(st, c)就等于x。</p><p>小Ho：吼~ 终于把SAM中各个部分搞明白了。</p><p>小Hi：SAM的构造有时空复杂度均为O(length(S))的算法，我们将在后面介绍。这一期你可以先用暴力算法依照定义构造SAM，先对SAM有个直观认识再说。</p><p>小Ho：没问题，暴力算法我最拿手了。我先写程序去了。</p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2017年多校联训9 部分题解</title>
      <link href="/blog/2017/08/23/2017multi9/"/>
      <content type="html"><![CDATA[<h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><p>仅含题解，代码详见<a href="https://github.com/Smlight/ACMer/tree/master/2017/08/22/2017%E5%A4%9A%E6%A0%A19" target="_blank" rel="noopener">github</a>。<del>喜欢的话点个star</del></p><h3 id="1002-Ch’s-gift"><a href="#1002-Ch’s-gift" class="headerlink" title="1002.    Ch’s gift"></a>1002.    Ch’s gift</h3><p>首先考虑序列上的问题。</p><p>$a$ 是一个二维数组，如果第 $i$ 位置的值为 $j$，就在 $a_{i,j}$上加上 $j$ 。那么某个询问 $x,y,a,b$ 的答案就是子矩阵的和。如果一开始就把二维前缀和算出来的话就可以回答$O(1)$，答案等于 $(Sum(y,b)-Sum(y,a-1))-(Sum(x,b)-Sum(x,a-1))$ 。</p><p>考虑到 $a,b$ 的范围非常大，可以把所有询问离散化。当然就算离散化，预处理二维前缀和还是不行的，我们发现前缀和相当于把 $[a,b]$ 拆成 $[1,b]-[1,a-1]$，联想到扫描线，把 $a,b$ 这一维的每个区间拆成两条线，用扫描线从小到大扫这一维，$x,y$ 这一维直接预处理一下前缀和每次 $O(1)$ 查就行了。</p><p>再搬到树上，直接套一个树链剖分就行了，树状数组就能维护。</p><p>ps: 可持久化线段树可以在线回答，等写出来了更新</p><h3 id="1005-FFF-at-Valentine"><a href="#1005-FFF-at-Valentine" class="headerlink" title="1005.    FFF at Valentine"></a>1005.    FFF at Valentine</h3><p>强连通缩点加拓扑序判分叉，不多说了。</p><h3 id="1006-Senior-Pan"><a href="#1006-Senior-Pan" class="headerlink" title="1006.    Senior Pan"></a>1006.    Senior Pan</h3><p>这题主要是题意有点不清楚。。。大小为 $k$ 的端点集合，题目的意思是起点终点不能是同一个【不过也是有道理的。。。</p><p>拆点，加超级源超级汇，再跑一下dij 。这个限制可以每个点维护一下被谁松弛过，比如现在想用 $i$ 松弛 $j’$，如果 $j$ 松弛过 $i’$，直接不让松弛就行了。一个点被松弛的次数小于总点数，复杂度也就是多个 $logn$，具体表现可能比20次dij好一点吧。</p><h3 id="1008-Numbers"><a href="#1008-Numbers" class="headerlink" title="1008.    Numbers"></a>1008.    Numbers</h3><p>从小到大取，$O(n^2logm)$，$n$ 是 $\sqrt{m}$ 级别。</p><h3 id="1010-Two-strings"><a href="#1010-Two-strings" class="headerlink" title="1010.    Two strings"></a>1010.    Two strings</h3><p>主要还是题意比较坑。。。匹配<code>.*</code>是要把<code>.</code>先变成某个字符再处理<code>*</code>。。。</p><p>队友(<em>wenwenla</em>)写了一种dp，先预处理pattern，dp[i]保存pattern前i个字符为止可以匹配到text的最左和最右，可以证明这个界里面的每一个都是可取的。</p><p>具体实现加一维表示最左最右，然后发现第一维可以去掉。</p><p><a href="https://github.com/Smlight/ACMer/blob/master/2017/08/22/2017%E5%A4%9A%E6%A0%A19/1010.cpp" target="_blank" rel="noopener">1010.cpp</a></p><p>时间0ms，就是容易写错。。。比赛的时候前面WA的都交上去了，最后一次AC的代码却没交上去[cry]。。。而且我们亲眼看到点了submit以后页面跳转了。。。结果连提交记录都没有？？</p><p>后来有人说了才发现这样直接正则就能过。<del>这题出得真好？？</del></p><p><a href="https://github.com/Smlight/ACMer/blob/master/2017/08/22/2017%E5%A4%9A%E6%A0%A19/1010_regex.cpp" target="_blank" rel="noopener">1010_regex.cpp</a></p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hdu 6158 The Designer</title>
      <link href="/blog/2017/08/20/hdu6158/"/>
      <content type="html"><![CDATA[<h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><p>比赛之后有大佬说这题可以用圆的反演来做，学习了一下。</p><p>以两个大圆的切点为反演中心，任取一个反演半径，两个大圆会变成两条平行线。再考虑小圆的反演，由于相切的性质不变，小圆的反演圆就是一列夹在平行线中间的小圆。</p><p>示意图：</p><p><img src="http://img.blog.csdn.net/20170820182706028" alt="圆的反演"></p><p>当然这样还是 $O(n)$ 的，但是看题目里的图就知道小圆会越来越小，小到一定程度以后直接不考虑就行了。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#include &lt;bits/stdc++.h&gt;</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="title">std</span>;</div><div class="line"></div><div class="line">typedef <span class="keyword">long</span> <span class="keyword">double</span> ld;</div><div class="line"><span class="keyword">const</span> ld IR2=<span class="number">100</span>;</div><div class="line"><span class="keyword">const</span> ld PI=<span class="number">3.141592653589793238462643383279502884197169399375105820974944592307816</span>L;</div><div class="line"><span class="keyword">struct</span> Point &#123;</div><div class="line">    ld x,y;</div><div class="line">    Point(ld _x=<span class="number">0</span>,ld _y=<span class="number">0</span>):x(_x),y(_y) &#123;&#125;</div><div class="line">    Point <span class="keyword">operator</span> +(<span class="keyword">const</span> Point &amp;R) &#123;</div><div class="line">        <span class="keyword">return</span> Point(R.x+x,R.y+y);</div><div class="line">    &#125;</div><div class="line">    Point <span class="keyword">operator</span> -(<span class="keyword">const</span> Point &amp;R) &#123;</div><div class="line">        <span class="keyword">return</span> Point(R.x-x,R.y-y);</div><div class="line">    &#125;</div><div class="line">    ld <span class="keyword">operator</span> *(<span class="keyword">const</span> Point &amp;R) &#123;</div><div class="line">        <span class="keyword">return</span> R.x*x+R.y*y;</div><div class="line">    &#125;</div><div class="line">    Point <span class="keyword">operator</span> *(<span class="keyword">const</span> ld &amp;R) &#123;</div><div class="line">        <span class="keyword">return</span> Point(x*R,y*R);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">double</span> o1=x,o2=y;</div><div class="line">        cout&lt;&lt;o1&lt;&lt;<span class="string">" "</span>&lt;&lt;o2&lt;&lt;<span class="string">"\n"</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> sqr(x) ((x)*(x))</span></div><div class="line"><span class="function">ld <span class="title">inv_circle</span>(<span class="params">Point O,Point C,ld r</span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> IR2*r/(sqr(O-C)-sqr(r));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T;</div><div class="line">    scanf(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="function">Point <span class="title">O</span>(<span class="params"><span class="number">0</span>,<span class="number">0</span></span>)</span>;</div><div class="line">    <span class="keyword">while</span> (T--) &#123;</div><div class="line">        <span class="keyword">double</span> t1,t2;</div><div class="line">        scanf(<span class="string">"%lf%lf"</span>,&amp;t1,&amp;t2);</div><div class="line">        <span class="keyword">if</span> (t1&gt;t2) swap(t1,t2);</div><div class="line">        ld r=t1,R=t2;</div><div class="line">        <span class="keyword">int</span> n;</div><div class="line">        scanf(<span class="string">"%d"</span>,&amp;n);</div><div class="line">        <span class="function">Point <span class="title">P</span>(<span class="params"><span class="number">0.5</span>*IR2/R,<span class="number">0</span></span>)</span>;</div><div class="line">        <span class="function">Point <span class="title">Q</span>(<span class="params"><span class="number">0.5</span>*IR2/r,<span class="number">0</span></span>)</span>;</div><div class="line">        ld L=Q.x-P.x;</div><div class="line">        <span class="function">Point <span class="title">o</span>(<span class="params">(P+Q</span>)*0.5)</span>;</div><div class="line">        ld ans=<span class="number">0</span>;</div><div class="line">        <span class="keyword">if</span> (n%<span class="number">2</span>==<span class="number">0</span>) &#123;</div><div class="line">            <span class="function">Point <span class="title">C</span>(<span class="params">o.x,o.y+(n/<span class="number">2</span></span>)*L)</span>;</div><div class="line">            ld rr=inv_circle(O,C,L*<span class="number">0.5</span>);</div><div class="line">            ans+=PI*rr*rr;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i+i<span class="number">-1</span>&lt;=n;i++) &#123;</div><div class="line">            <span class="function">Point <span class="title">C</span>(<span class="params">o.x,o.y+(i<span class="number">-1</span></span>)*L)</span>;</div><div class="line">            ld rr=inv_circle(O,C,L*<span class="number">0.5</span>);</div><div class="line">            ld area=PI*rr*rr;</div><div class="line">            <span class="keyword">if</span> (area&lt;<span class="number">1e-12</span>) <span class="keyword">break</span>;</div><div class="line">            ans+=area;</div><div class="line">            <span class="keyword">if</span> (i&gt;<span class="number">1</span>) ans+=area;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">double</span> <span class="keyword">out</span>=ans;</div><div class="line">        printf(<span class="string">"%.5f\n"</span>,<span class="keyword">out</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h3><p>大佬不愿意透露id，鸣谢csust？</p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hdu 6156 Palindrome Function</title>
      <link href="/blog/2017/08/20/hdu6156/"/>
      <content type="html"><![CDATA[<h3 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h3><p>定义函数 $f(n,k)$，当 $n$ 在 $k$ 进制表示为回文数时，$f(n,k)=k$；否则 $f(n,k)=1$ 。求 $\sum_{i=L}^{R}\sum_{j=l}^{r}f(i,j)$ 。（$1 \leq T \leq 10^5, 1 \leq L \leq R \leq 10^9, 2 \leq l \leq r \leq 36$）</p><h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><p>可以发现 $l,r$ 的范围很小，直接枚举 $j$ 代表 $j$ 进制，对于 $i$ 用数位dp统计即可。</p><p>比赛的时候竟然没做这一题。。。蠢死了 ┭┮﹏┭┮ </p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#include &lt;bits/stdc++.h&gt;</span></div><div class="line">using namespace std;</div><div class="line"></div><div class="line">typedef long long ll;</div><div class="line">const <span class="keyword">int</span> B=<span class="number">40</span>;</div><div class="line"><span class="keyword">int</span> dig[B],tmp[B];</div><div class="line">ll dp[B][B][B];</div><div class="line"><span class="keyword">int</span> base;</div><div class="line"></div><div class="line">ll dfs(<span class="keyword">int</span> <span class="keyword">pos</span>,<span class="keyword">int</span> start,bool limit)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">pos</span>&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span> (!limit&amp;&amp;dp[base][<span class="keyword">pos</span>][start]!=-<span class="number">1</span>) &#123;</div><div class="line">        <span class="keyword">return</span> dp[base][<span class="keyword">pos</span>][start];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> <span class="keyword">last</span>=limit?dig[<span class="keyword">pos</span>]:base-<span class="number">1</span>;</div><div class="line">    ll res=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=<span class="keyword">last</span>;i++) &#123;</div><div class="line">        tmp[<span class="keyword">pos</span>]=i;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">pos</span>==start&amp;&amp;i==<span class="number">0</span>) &#123;</div><div class="line">            res+=dfs(<span class="keyword">pos</span>-<span class="number">1</span>,start-<span class="number">1</span>,limit&amp;&amp;(i==<span class="keyword">last</span>));</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">pos</span>&lt;(start+<span class="number">1</span>)/<span class="number">2</span>) &#123;</div><div class="line">            <span class="keyword">if</span> (i==tmp[start-<span class="keyword">pos</span>]) &#123;</div><div class="line">                res+=dfs(<span class="keyword">pos</span>-<span class="number">1</span>,start,limit&amp;&amp;(i==<span class="keyword">last</span>));</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            res+=dfs(<span class="keyword">pos</span>-<span class="number">1</span>,start,limit&amp;&amp;(i==<span class="keyword">last</span>));</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (!limit) dp[base][<span class="keyword">pos</span>][start]=res;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"></div><div class="line">ll calc(<span class="keyword">int</span> <span class="keyword">x</span>)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> len=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> (<span class="keyword">x</span>) &#123;</div><div class="line">        dig[len++]=<span class="keyword">x</span>%base;</div><div class="line">        <span class="keyword">x</span>/=base;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> dfs(len-<span class="number">1</span>,len-<span class="number">1</span>,<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">int</span> main()</div><div class="line">&#123;</div><div class="line">    memset(dp,-<span class="number">1</span>,sizeof(dp));</div><div class="line">    <span class="keyword">int</span> T,cas=<span class="number">0</span>;</div><div class="line">    scanf(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">while</span> (T--) &#123;</div><div class="line">        <span class="keyword">int</span> L,R,l,r;</div><div class="line">        scanf(<span class="string">"%d%d%d%d"</span>,&amp;L,&amp;R,&amp;l,&amp;r);</div><div class="line">        ll ans=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (base=l;base&lt;=r;base++) &#123;</div><div class="line">            ll cnt=calc(R)-calc(L-<span class="number">1</span>);</div><div class="line">            ans+=cnt*base+(R-L+<span class="number">1</span>-cnt);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">printf</span>(<span class="string">"Case #%d: %lld\n"</span>,++cas,ans);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2017年多校联训8 部分题解</title>
      <link href="/blog/2017/08/18/2017multi8/"/>
      <content type="html"><![CDATA[<h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><p>仅含题解，代码详见<a href="https://github.com/Smlight/ACMer/tree/master/2017/08/17/2017%E5%A4%9A%E6%A0%A18" target="_blank" rel="noopener">github</a>。<del>喜欢的话点个star</del></p><h3 id="1001-Army-Formations"><a href="#1001-Army-Formations" class="headerlink" title="1001.    Army Formations"></a>1001.    Army Formations</h3><p>感觉题意有点绕。。。其实就是每个节点一开始就有整个子树的序列，那么这个序列一定是先输入小的再输入大的才能最优。</p><p>不过这个事情也不是两个有序表合并这么简单，因为对于两个序列，只有把某个序列的数一个一个地插入到另一个才能算出答案。这时候就要用到启发式合并，什么是启发式的策略，通俗来讲就是人脑比较倾向于选择的策略。比如在这里就是把短的序列一个一个插到长的里面，比赛的写的线段树合并结果写了一大坨还没调出来，太蠢了😂。。。然后照着题解写了一个树状数组。。。</p><p>代码见附录，<code>dfs</code>用来得到轻重儿子，<code>solve</code>就是插入和合并，要递归重儿子时直接把轻儿子的全部删掉就行了。</p><h3 id="1002-Battlestation-Operational"><a href="#1002-Battlestation-Operational" class="headerlink" title="1002.    Battlestation Operational"></a>1002.    Battlestation Operational</h3><p>求 $f(n)=\sum_{i=1}^{n}\sum_{j=1}^{i} \left\lceil \frac{i}{j} \right\rceil \left[ (i, j) = 1\right]$ 。</p><p>比赛的时候算是瞎猜了一下。。。其实这题反演的理论性还是很好的。</p><p>以下 $n,i,j,k,d$ 均为正整数，且<strong>用 $(i,j)$ 表示 $i$ 和 $j$ 的最大公约数</strong>。</p><p>记 $h(i)=\sum_{j=1}^{i} \left\lceil \frac{i}{j} \right\rceil \left[ (i, j) = 1\right]$，显然 $f(n)$ 为 $h(i)$ 的前缀和。<br>考虑到 $h(i)$ 中与互质有关，不易直接求解，直接令 $g(i)=\sum_{j=1}^{i} \left\lceil \frac{i}{j} \right\rceil$ 。</p><p>将 $g(i)$ 中的 $\left\lceil \frac{i}{j} \right\rceil$ 按 $(i,j)$ 分类。枚举可能的 $(i,j)=d$，则有 $d|i，j=kd，k\le \frac{i}{d}$ 且 $(i,kd)=d$（注意， $k$ 不是从 $1$ 到 $\frac{i}{d}$ 的全集）。现只对这一类求和：<br>$$ \begin{equation}\begin{split}<br> &amp;\sum_{k=1}^{\frac{i}{d}}\left\lceil \frac{i}{kd} \right\rceil \left[ (i, kd) = d\right] \<br>=&amp; \sum_{k=1}^{\frac{i}{d}}\left\lceil \cfrac{\frac{i}{d}}{k} \right\rceil \left[ (\frac{i}{d}, k) = 1\right] \<br>=&amp;\ h(\frac{i}{d})<br>\end{split}\end{equation}$$<br>当 $d$ 取遍 $i$ 的约数，我们有 $g(i)=\sum_{d|i}h(\frac{i}{d})$。<br>由约数的性质，也即 $g(i)=\sum_{d|i}h(d)$ 。<br>这是标准的莫比乌斯反演形式，可以得到 $h(i)=\sum_{d|i} \mu(d) g(\frac{i}{d})$ 。</p><p>小结一下。</p><p><em>如何求解 $f(n)$：</em>$h(i)$ 的前缀和；</p><p><em>如何求解 $h(i)$：</em>莫比乌斯反演；</p><p><em>如何求解 $\mu(i)$：</em>线性筛模板；</p><p><em>如何求解 $g(i)$：</em>按常规考虑枚举分母（$j$），则对于 $i=j$ 的 $g(i)$ 要+1，对于 $i=j+1…2j$ 的 $g(i)$ 要+2，……，也就是说一个 $j$ 相当于多次区间加法；但是这里不需要动态维护，只需要最终结果，所以利用差分的思想，即 $g’(i)=g(i)-g(i-1)$，回顾上述过程就是对 $g’(i)$ 在 $j,j+1,2j+1…$ 的单点修改，容易很多，最后再对 $g’(i)$ 求和即可。</p><p>鸣谢 <strong>quailty, forever97</strong>！</p><h3 id="1008-Hybrid-Crystals"><a href="#1008-Hybrid-Crystals" class="headerlink" title="1008.    Hybrid Crystals"></a>1008.    Hybrid Crystals</h3><h3 id="1011-Killer-Names"><a href="#1011-Killer-Names" class="headerlink" title="1011.    Killer Names"></a>1011.    Killer Names</h3><p><code>dp[i][j]</code>表示前<code>i</code>个字符恰好用到<code>j</code>种字符的方案数，然后把组合数表和dp表预处理一下，每次 $O(m^2)$ 回答。</p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hihocoder 1553 区间统计</title>
      <link href="/blog/2017/08/17/hihocoder1553/"/>
      <content type="html"><![CDATA[<h3 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h3><p><a href="http://hihocoder.com/problemset/problem/1553" target="_blank" rel="noopener">#1553 : 区间统计</a> 中文题。</p><h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><p>首先预处理所有幂次的结果，$O(NK)$；还有IO时间一定要注意。以下均不讨论。</p><p>一看题，无修改区间询问，莫队走起。但是用map复杂度太高了，没算错的话应该是 $O(n^{1.5}logn+m\sqrt{n})$ 。</p><p>考虑到A[]的范围不大，可以对A[]计数，不过没什么卵用。但是对A[]计数以后可以发现，我们不仅可以对值计数还可以对次数计数，也就是说has[i]表示有多少数在当前询问中的<strong>出现次数</strong>等于 i 。</p><p>到这里还是比较容易的，但是如果直接扫has[]复杂度并没有降低 $O(n^{1.5}+mn)$ 。。。</p><p>仍然是考虑分治思想，一次询问最多是整个区间，整个区间中出现次数大于 $\sqrt{n}$ 的数不会超过 $\sqrt{n}$ 个，还可以进行另外的预处理，我就直接<code>multiset</code>暴力了。。。复杂度大概是 $O(n^{1.5}+m\sqrt{n}+(n+m)log{\sqrt{n}})$ 。。。(已经不会算了 _(:△」∠)_ )</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MO=<span class="number">1000000007</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100010</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">100010</span>;</div><div class="line"><span class="keyword">int</span> len;</div><div class="line"><span class="keyword">int</span> po[N][<span class="number">105</span>];</div><div class="line"><span class="keyword">int</span> cnt[N],has[N];</div><div class="line"><span class="keyword">int</span> a[N],anss[M];</div><div class="line"><span class="built_in">multiset</span>&lt;<span class="keyword">int</span>&gt; ss;</div><div class="line"></div><div class="line"><span class="keyword">namespace</span> fastIO &#123;</div><div class="line">    <span class="meta">#<span class="meta-keyword">define</span> BUF_SIZE 100000</span></div><div class="line">    <span class="comment">//fread -&gt; read</span></div><div class="line">    <span class="keyword">bool</span> IOerror = <span class="number">0</span>;</div><div class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">char</span> <span class="title">nc</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">static</span> <span class="keyword">char</span> buf[BUF_SIZE], *p1 = buf + BUF_SIZE, *pend = buf + BUF_SIZE;</div><div class="line">        <span class="keyword">if</span>(p1 == pend) &#123;</div><div class="line">            p1 = buf;</div><div class="line">            pend = buf + fread(buf, <span class="number">1</span>, BUF_SIZE, <span class="built_in">stdin</span>);</div><div class="line">            <span class="keyword">if</span>(pend == p1) &#123;</div><div class="line">                IOerror = <span class="number">1</span>;</div><div class="line">                <span class="keyword">return</span> <span class="number">-1</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> *p1++;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">blank</span><span class="params">(<span class="keyword">char</span> ch)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> ch == <span class="string">' '</span> || ch == <span class="string">'\n'</span> || ch == <span class="string">'\r'</span> || ch == <span class="string">'\t'</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">(<span class="keyword">int</span> &amp;x)</span> </span>&#123;</div><div class="line">        <span class="keyword">char</span> ch;</div><div class="line">        <span class="keyword">while</span>(blank(ch = nc()));</div><div class="line">        <span class="keyword">if</span>(IOerror)</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        <span class="keyword">for</span>(x = ch - <span class="string">'0'</span>; (ch = nc()) &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>; x = x * <span class="number">10</span> + ch - <span class="string">'0'</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="meta">#<span class="meta-keyword">undef</span> BUF_SIZE</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">struct</span> Query &#123;</div><div class="line">    <span class="keyword">int</span> L, R, k, ID, block;</div><div class="line">    Query() &#123;&#125;</div><div class="line">    Query(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> k, <span class="keyword">int</span> ID):L(l), R(r), k(k), ID(ID) &#123;</div><div class="line">        block = l / len;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Query &amp;rhs) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">if</span>(block == rhs.block) <span class="keyword">return</span> R &lt; rhs.R;</div><div class="line">        <span class="keyword">return</span> block &lt; rhs.block;</div><div class="line">    &#125;</div><div class="line">&#125; queries[M];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> n)</span></span></div><div class="line">&#123;</div><div class="line">    --has[cnt[n]];</div><div class="line">    <span class="keyword">if</span> (cnt[n]&gt;len) &#123;</div><div class="line">        ss.erase(ss.find(cnt[n]));</div><div class="line">    &#125;</div><div class="line">    ++cnt[n];</div><div class="line">    ++has[cnt[n]];</div><div class="line">    <span class="keyword">if</span> (cnt[n]&gt;len) &#123;</div><div class="line">        ss.insert(cnt[n]);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">erase</span><span class="params">(<span class="keyword">int</span> n)</span></span></div><div class="line">&#123;</div><div class="line">    --has[cnt[n]];</div><div class="line">    <span class="keyword">if</span> (cnt[n]&gt;len) &#123;</div><div class="line">        ss.erase(ss.find(cnt[n]));</div><div class="line">    &#125;</div><div class="line">    --cnt[n];</div><div class="line">    ++has[cnt[n]];</div><div class="line">    <span class="keyword">if</span> (cnt[n]&gt;len) &#123;</div><div class="line">        ss.insert(cnt[n]);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T;</div><div class="line">    fastIO::read(T);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">100000</span>;i++) &#123;</div><div class="line">        po[i][<span class="number">0</span>]=<span class="number">1</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">100</span>;j++) &#123;</div><div class="line">            po[i][j]=<span class="number">1L</span>L*po[i][j<span class="number">-1</span>]*i%MO;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">while</span> (T--) &#123;</div><div class="line">        <span class="keyword">int</span> n, m;</div><div class="line">        fastIO::read(n);</div><div class="line">        fastIO::read(m);</div><div class="line">        len = <span class="built_in">sqrt</span>(n);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</div><div class="line">            fastIO::read(a[i]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</div><div class="line">            <span class="keyword">int</span> l,r,k;</div><div class="line">            fastIO::read(l);</div><div class="line">            fastIO::read(r);</div><div class="line">            fastIO::read(k);</div><div class="line">            queries[i] = Query(l, r, k, i);</div><div class="line">        &#125;</div><div class="line">        sort(queries + <span class="number">1</span>, queries + m + <span class="number">1</span>);</div><div class="line">        <span class="keyword">int</span> L = <span class="number">1</span>, R = <span class="number">1</span>;</div><div class="line">        <span class="built_in">memset</span>(cnt,<span class="number">0</span>,<span class="keyword">sizeof</span>(cnt));</div><div class="line">        <span class="built_in">memset</span>(has,<span class="number">0</span>,<span class="keyword">sizeof</span>(has));</div><div class="line">        cnt[a[<span class="number">1</span>]]=<span class="number">1</span>;</div><div class="line">        has[<span class="number">1</span>]=<span class="number">1</span>;</div><div class="line">        ss.clear();</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</div><div class="line">            Query &amp;qi = queries[i];</div><div class="line">            <span class="keyword">while</span>(R &lt; qi.R) insert(a[++R]);</div><div class="line">            <span class="keyword">while</span>(L &gt; qi.L) insert(a[--L]);</div><div class="line">            <span class="keyword">while</span>(R &gt; qi.R) erase(a[R--]);</div><div class="line">            <span class="keyword">while</span>(L &lt; qi.L) erase(a[L++]);</div><div class="line">            ll ans = <span class="number">0</span>;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=len;j++) &#123;</div><div class="line">                ans+=<span class="number">1L</span>L*has[j]*po[j][qi.k]%MO;</div><div class="line">                ans%=MO;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> x:ss) &#123;</div><div class="line">                ans+=po[x][qi.k];</div><div class="line">                ans%=MO;</div><div class="line">            &#125;</div><div class="line">            anss[qi.ID]=ans;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,anss[i]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h3><p>特别鸣谢 <strong>Claris</strong>！！</p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hdu 6129 Just do it</title>
      <link href="/blog/2017/08/17/hdu6129/"/>
      <content type="html"><![CDATA[<h3 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h3><p>有一个长度为 $n$ 的整数序列 ${a_n}$，对其做 $m$ 次前缀异或和，求最终的序列。</p><h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><p>对这个过程手动模拟几行，注意不要消去，可以发现第 $m$ 次第 $i$ 个数的结果包含了 $C_{m-1+i-j}^{i-j}$ 次第 $j$ 个数($j\le i$) 。</p><p>首先我们需要判断它的奇偶性。奇偶性相当于2进制的结果，2为质数，可以使用Lucas定理。2进制的每一位只有四种情况，其中 $C_{0}^{1}=0，C_{0}^{0}=C_{1}^{0}=C_{1}^{1}=1$ 。</p><p>将 $m-1$ 和 $i-j$ 的每一位展开，在第 $k$ 位上，如果 $m-1$ 和 $i-j$ 都是 1，那么结果就是 0 。</p><p>从小到大枚举 $k$ ，表示 $i-j$ 的第 $k$ 位为 1，若 $m-1$ 的第 $k$ 位不为 1，那么直接更新<strong>a序列本身</strong>。也就是说，每次只用满足 $i-j=2^{k}$ 的 $a[j]$ 更新 $a[i]$，然而此时的 $a[j]$ 已经被 $k$ 取 $0\dots k-1$ 更新过了，所以相当于考虑了 $i-j$ 在 $0\dots k$ 位的所有情况。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">2e5</span>+<span class="number">5</span>;</div><div class="line"><span class="keyword">int</span> a[N];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T,n,m;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">while</span> (T--) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,a+i);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> k=<span class="number">1</span>;m--;</div><div class="line">        <span class="keyword">while</span> (k&lt;n) &#123;</div><div class="line">            <span class="keyword">if</span> ((m&amp;<span class="number">1</span>)==<span class="number">0</span>) &#123;</div><div class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i=n;i&gt;k;i--) &#123;</div><div class="line">                    a[i]^=a[i-k];</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            m&gt;&gt;=<span class="number">1</span>;k&lt;&lt;=<span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d%c"</span>,a[i],<span class="string">" \n"</span>[i==n]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hdu 5893 List wants to travel</title>
      <link href="/blog/2017/08/09/hdu5893/"/>
      <content type="html"><![CDATA[<h3 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h3><p>给出一棵树，要求支持：</p><ol><li>询问从u到v整条路径有几段边权（相同边权连成一段）；</li><li>修改从u到v整条路径的边权。</li></ol><h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><p>首先考虑在序列上的问题，可以用线段树维护颜色段数以及左右端的颜色。<br>对于树上的问题，用树链剖分变成序列上的问题即可。</p><p>但是写起来并不是那么好写的。。。泄露出来的标程写了 6KB 还特别恶心。。。<br>还好我搜到了一份<a href="http://blog.csdn.net/basasuya/article/details/52625574" target="_blank" rel="noopener">非常漂亮的代码</a>，同时建议做树链剖分时把线段树整体作为一个结构体~</p><p>回答询问时还要注意因为两条链都是由浅到深的，拼起来必须有一个要反过来。</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#include &lt;bits/stdc++.h&gt;</span></div><div class="line">using namespace std;</div><div class="line"></div><div class="line">const <span class="keyword">int</span> N=<span class="number">4</span>e4+<span class="number">5</span>;</div><div class="line">struct Edge &#123;</div><div class="line">    <span class="keyword">int</span> go,<span class="keyword">next</span>;</div><div class="line">&#125; eg[N&lt;&lt;<span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> <span class="keyword">last</span>[N],tot,e[N][<span class="number">3</span>];</div><div class="line"><span class="keyword">int</span> num[N],son[N],dep[N],fa[N],<span class="keyword">pos</span>;</div><div class="line"><span class="keyword">int</span> top[N],p[N],fp[N];</div><div class="line"><span class="keyword">int</span> col[N];</div><div class="line"></div><div class="line">void init()</div><div class="line">&#123;</div><div class="line">    tot=<span class="number">0</span>;<span class="keyword">pos</span>=<span class="number">0</span>;</div><div class="line">    memset(<span class="keyword">last</span>,-<span class="number">1</span>,sizeof(<span class="keyword">last</span>));</div><div class="line">    memset(son,-<span class="number">1</span>,sizeof(son));</div><div class="line">&#125;</div><div class="line"></div><div class="line">void addedge(<span class="keyword">int</span> <span class="keyword">x</span>,<span class="keyword">int</span> <span class="keyword">y</span>)</div><div class="line">&#123;</div><div class="line">    eg[tot]=&#123;<span class="keyword">y</span>,<span class="keyword">last</span>[<span class="keyword">x</span>]&#125;;</div><div class="line">    <span class="keyword">last</span>[<span class="keyword">x</span>]=tot++;</div><div class="line">&#125;</div><div class="line"></div><div class="line">void dfs(<span class="keyword">int</span> u,<span class="keyword">int</span> pre,<span class="keyword">int</span> d)</div><div class="line">&#123;</div><div class="line">    dep[u]=d;</div><div class="line">    fa[u]=pre;</div><div class="line">    num[u]=<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="keyword">last</span>[u];i!=-<span class="number">1</span>;i=eg[i].next) &#123;</div><div class="line">        <span class="keyword">int</span> &amp;v=eg[i].go;</div><div class="line">        <span class="keyword">if</span> (v!=pre) &#123;</div><div class="line">            dfs(v,u,d+<span class="number">1</span>);</div><div class="line">            num[u]+=num[v];</div><div class="line">            <span class="keyword">if</span> (son[u]==-<span class="number">1</span>||num[v]&gt;num[son[u]]) &#123;</div><div class="line">                son[u]=v;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">void getpos(<span class="keyword">int</span> u,<span class="keyword">int</span> sp)</div><div class="line">&#123;</div><div class="line">    top[u]=sp;</div><div class="line">    p[u]=++<span class="keyword">pos</span>;</div><div class="line">    fp[p[u]]=u;</div><div class="line">    <span class="keyword">if</span> (son[u]==-<span class="number">1</span>) <span class="keyword">return</span>;</div><div class="line">    getpos(son[u],sp);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="keyword">last</span>[u];i!=-<span class="number">1</span>;i=eg[i].next) &#123;</div><div class="line">        <span class="keyword">int</span> &amp;v=eg[i].go;</div><div class="line">        <span class="keyword">if</span> (v!=son[u]&amp;&amp;v!=fa[u]) &#123;</div><div class="line">            getpos(v,v);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">struct SegTree &#123;</div><div class="line">    struct Node &#123;</div><div class="line">        <span class="keyword">int</span> <span class="keyword">lc</span>,rc,cnt;</div><div class="line">        Node(<span class="keyword">int</span> a=-<span class="number">1</span>,<span class="keyword">int</span> b=<span class="number">0</span>,<span class="keyword">int</span> c=<span class="number">0</span>):<span class="keyword">lc</span>(a),rc(b),cnt(c) &#123;&#125;</div><div class="line">        Node operator +(const Node &amp;R) const &#123;</div><div class="line">            <span class="keyword">if</span> (!cnt) <span class="keyword">return</span> R;</div><div class="line">            <span class="keyword">if</span> (!R.cnt) <span class="keyword">return</span> *this;</div><div class="line">            <span class="keyword">return</span> &#123;<span class="keyword">lc</span>,R.rc,cnt+R.cnt-(rc==R.lc)&#125;;</div><div class="line">        &#125;</div><div class="line">        Node rev() &#123;</div><div class="line">            <span class="keyword">return</span> &#123;rc,<span class="keyword">lc</span>,cnt&#125;;</div><div class="line">        &#125;</div><div class="line">        void <span class="keyword">print</span>() &#123;</div><div class="line">            <span class="keyword">printf</span>(<span class="string">"%d %d %d\n"</span>,<span class="keyword">lc</span>,rc,cnt);</div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">tr</span>[N&lt;&lt;<span class="number">2</span>];</div><div class="line">    <span class="keyword">int</span> flag[N&lt;&lt;<span class="number">2</span>];</div><div class="line">    <span class="comment">#define lson rt&lt;&lt;1,l,m</span></div><div class="line">    <span class="comment">#define rson rt&lt;&lt;1|1,m+1,r</span></div><div class="line">    void push_up(<span class="keyword">int</span> rt)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">tr</span>[rt]=<span class="keyword">tr</span>[rt&lt;&lt;<span class="number">1</span>]+<span class="keyword">tr</span>[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</div><div class="line">    &#125;</div><div class="line">    void push_down(<span class="keyword">int</span> rt)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> (flag[rt]!=-<span class="number">1</span>) &#123;</div><div class="line">            flag[rt&lt;&lt;<span class="number">1</span>]=flag[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]=flag[rt];</div><div class="line">            <span class="keyword">tr</span>[rt&lt;&lt;<span class="number">1</span>]=<span class="keyword">tr</span>[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]=&#123;flag[rt],flag[rt],<span class="number">1</span>&#125;;</div><div class="line">            flag[rt]=-<span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    void build(<span class="keyword">int</span> rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</div><div class="line">    &#123;</div><div class="line">        flag[rt]=-<span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> (l==r) &#123;</div><div class="line">            <span class="keyword">tr</span>[rt]=&#123;col[l],col[l],<span class="number">1</span>&#125;;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> <span class="keyword">m</span>=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">        build(lson);</div><div class="line">        build(rson);</div><div class="line">        push_up(rt);</div><div class="line">    &#125;</div><div class="line">    void update(<span class="keyword">int</span> rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> col)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> (L&lt;=l&amp;&amp;r&lt;=R) &#123;</div><div class="line">            <span class="keyword">tr</span>[rt]=&#123;col,col,<span class="number">1</span>&#125;;</div><div class="line">            flag[rt]=col;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        push_down(rt);</div><div class="line">        <span class="keyword">int</span> <span class="keyword">m</span>=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> (L&lt;=<span class="keyword">m</span>) update(lson,L,R,col);</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">m</span>&lt;R) update(rson,L,R,col);</div><div class="line">        push_up(rt);</div><div class="line">    &#125;</div><div class="line">    Node getsum(<span class="keyword">int</span> rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> L,<span class="keyword">int</span> R)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> (L&lt;=l&amp;&amp;r&lt;=R) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">tr</span>[rt];</div><div class="line">        &#125;</div><div class="line">        push_down(rt);</div><div class="line">        <span class="keyword">int</span> <span class="keyword">m</span>=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">        Node res;</div><div class="line">        <span class="keyword">if</span> (L&lt;=<span class="keyword">m</span>) res=res+getsum(lson,L,R);</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">m</span>&lt;R) res=res+getsum(rson,L,R);</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">    void change(<span class="keyword">int</span> <span class="keyword">x</span>,<span class="keyword">int</span> <span class="keyword">y</span>,<span class="keyword">int</span> col)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">int</span> tx=top[<span class="keyword">x</span>],ty=top[<span class="keyword">y</span>];</div><div class="line">        <span class="keyword">while</span> (tx!=ty) &#123;</div><div class="line">            <span class="keyword">if</span> (dep[tx]&lt;dep[ty]) &#123;</div><div class="line">                swap(tx,ty);</div><div class="line">                swap(<span class="keyword">x</span>,<span class="keyword">y</span>);</div><div class="line">            &#125;</div><div class="line">            update(<span class="number">1</span>,<span class="number">1</span>,<span class="keyword">pos</span>,p[tx],p[<span class="keyword">x</span>],col);</div><div class="line">            <span class="keyword">x</span>=fa[tx];</div><div class="line">            tx=top[<span class="keyword">x</span>];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">x</span>==<span class="keyword">y</span>) <span class="keyword">return</span>;</div><div class="line">        <span class="keyword">if</span> (dep[<span class="keyword">x</span>]&gt;dep[<span class="keyword">y</span>]) &#123;</div><div class="line">            swap(<span class="keyword">x</span>,<span class="keyword">y</span>);</div><div class="line">        &#125;</div><div class="line">        update(<span class="number">1</span>,<span class="number">1</span>,<span class="keyword">pos</span>,p[son[<span class="keyword">x</span>]],p[<span class="keyword">y</span>],col);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> query(<span class="keyword">int</span> <span class="keyword">x</span>,<span class="keyword">int</span> <span class="keyword">y</span>)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">int</span> tx=top[<span class="keyword">x</span>],ty=top[<span class="keyword">y</span>];</div><div class="line">        Node X,Y;</div><div class="line">        <span class="keyword">while</span> (tx!=ty) &#123;</div><div class="line">            <span class="keyword">if</span> (dep[tx]&lt;dep[ty]) &#123;</div><div class="line">                Y=getsum(<span class="number">1</span>,<span class="number">1</span>,<span class="keyword">pos</span>,p[ty],p[<span class="keyword">y</span>])+Y;</div><div class="line">                <span class="keyword">y</span>=fa[ty];</div><div class="line">                ty=top[<span class="keyword">y</span>];</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                X=getsum(<span class="number">1</span>,<span class="number">1</span>,<span class="keyword">pos</span>,p[tx],p[<span class="keyword">x</span>])+X;</div><div class="line">                <span class="keyword">x</span>=fa[tx];</div><div class="line">                tx=top[<span class="keyword">x</span>];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        Node ans;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">x</span>==<span class="keyword">y</span>) &#123;</div><div class="line">            ans=X.rev()+Y;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">if</span> (dep[<span class="keyword">x</span>]&gt;dep[<span class="keyword">y</span>]) &#123;</div><div class="line">                ans=Y.rev()+getsum(<span class="number">1</span>,<span class="number">1</span>,<span class="keyword">pos</span>,p[son[<span class="keyword">y</span>]],p[<span class="keyword">x</span>])+X;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                ans=X.rev()+getsum(<span class="number">1</span>,<span class="number">1</span>,<span class="keyword">pos</span>,p[son[<span class="keyword">x</span>]],p[<span class="keyword">y</span>])+Y;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ans.cnt;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">#undef lson</span></div><div class="line">    <span class="comment">#undef rson</span></div><div class="line">&#125; mytree;</div><div class="line"></div><div class="line"><span class="keyword">int</span> main()</div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> n,<span class="keyword">m</span>;</div><div class="line">    <span class="keyword">while</span> (scanf(<span class="string">"%d%d"</span>,&amp;n,&amp;<span class="keyword">m</span>)!=EOF) &#123;</div><div class="line">        init();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++) &#123;</div><div class="line">            scanf(<span class="string">"%d%d%d"</span>,&amp;e[i][<span class="number">0</span>],&amp;e[i][<span class="number">1</span>],&amp;e[i][<span class="number">2</span>]);</div><div class="line">            addedge(e[i][<span class="number">0</span>],e[i][<span class="number">1</span>]);</div><div class="line">            addedge(e[i][<span class="number">1</span>],e[i][<span class="number">0</span>]);</div><div class="line">        &#125;</div><div class="line">        dfs(<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line">        getpos(<span class="number">1</span>,<span class="number">1</span>);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++) &#123;</div><div class="line">            <span class="keyword">if</span> (dep[e[i][<span class="number">0</span>]]&lt;dep[e[i][<span class="number">1</span>]]) &#123;</div><div class="line">                swap(e[i][<span class="number">0</span>],e[i][<span class="number">1</span>]);</div><div class="line">            &#125;</div><div class="line">            col[p[e[i][<span class="number">0</span>]]]=e[i][<span class="number">2</span>];</div><div class="line">        &#125;</div><div class="line">        mytree.build(<span class="number">1</span>,<span class="number">1</span>,<span class="keyword">pos</span>);</div><div class="line">        <span class="keyword">while</span> (<span class="keyword">m</span>--) &#123;</div><div class="line">            char op[<span class="number">9</span>];</div><div class="line">            <span class="keyword">int</span> u,v,w;</div><div class="line">            scanf(<span class="string">"%s%d%d"</span>,op,&amp;u,&amp;v);</div><div class="line">            <span class="keyword">if</span> (op[<span class="number">0</span>]==<span class="string">'C'</span>) &#123;</div><div class="line">                scanf(<span class="string">"%d"</span>,&amp;w);</div><div class="line">                mytree.change(u,v,w);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">printf</span>(<span class="string">"%d\n"</span>,mytree.query(u,v));</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hdu 5901 Count primes</title>
      <link href="/blog/2017/08/05/hdu5901/"/>
      <content type="html"><![CDATA[<h3 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h3><p>输出[1..n]的质数个数 (1 &lt;= n &lt;= 1e11) 。时间限制6s，空间限制64M 。</p><h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><p>很显然，要用线性筛的话时间和空间都不够。</p><p>有一种<a href="https://en.wikipedia.org/wiki/Meissel%E2%80%93Lehmer_algorithm" target="_blank" rel="noopener">Meissel–Lehmer算法</a>可以解决该问题，不过本文要介绍的是一种dp解法。</p><p>定义$SR(n,p)$为，$2..n$被小于等于$p$的质数筛后剩下的数的个数；也就是说，在n的范围内，是质数，或者是只由大于$p$的质数相乘得到的数的个数。<br>记小于等于$n$的质数个数为$\pi(n)$，那么显然有$SR(n,n)=\pi(n)$ 。</p><p>对$SR(n,p)$分两类讨论：</p><ul><li>当$p$不是质数或者$n&lt;p^2$时，有$SR(n,p)=SR(n,p-1)$；</li><li>当$p$是质数且$n\ge p^2$时，$SR(n,p)$ 也可由 $SR(n,p-1)$ 推得：$$SR(n,p)= SR(n,p−1)− SR(\frac{n}{p}, p−1)+ SR(p−1,p−1)$$ 表示要从 $2..p-1$ 筛后剩下的数中去掉那些质因子均大于等于 $p$ 且含 $p$ 的数，因为若有小于 $p$ 的质因子则该数已经被筛去了，同理，该数除以p也一定不会被 $2..p-1$ 筛去，所以减去 $SR(\frac{n}{p}, p−1)$，与此同时 $2..p-1$ 的质数也被减掉了，所以加上 $SR(p-1,p-1)$ 。</li></ul><p>当然因为空间限制肯定不能直接这样dp，考虑到整个过程中只用到了 $p$ 和 $\frac{n}{p}$，我们直接分为两段dp， 用<code>H[k]</code>表示 $k\le \sqrt{n}$ 时 $SR(\frac{n}{k},p)$ 的值，用<code>L[k]</code>表示 $k \le \sqrt{n}$ 时 $SR(k,p)$ 的值。</p><p>先放出代码，原作者<em><a href="http://codeforces.com/profile/adkroxx" target="_blank" rel="noopener">adkroxx</a></em>：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">320000</span>;</div><div class="line">ll H[N],L[N];</div><div class="line"></div><div class="line"><span class="function">ll <span class="title">SR</span><span class="params">(ll n,ll p)</span></span></div><div class="line">&#123;</div><div class="line">    ll m;</div><div class="line">    <span class="keyword">for</span> (m=<span class="number">1</span>;m*m&lt;=n;++m) &#123;</div><div class="line">        H[m]=n/m<span class="number">-1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> (ll i=<span class="number">1</span>;i&lt;=m;++i) &#123;</div><div class="line">        L[i]=i<span class="number">-1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> (ll i=<span class="number">2</span>;i&lt;=m;++i)&#123;</div><div class="line">        <span class="keyword">if</span> (L[i]==L[i<span class="number">-1</span>]) <span class="keyword">continue</span>;</div><div class="line">        <span class="keyword">for</span> (ll j=<span class="number">1</span>;j&lt;=min(m<span class="number">-1</span>,n/i/i);++j) &#123;</div><div class="line">            <span class="keyword">if</span>(i*j&lt;m) H[j]-=H[i*j]-L[i<span class="number">-1</span>];</div><div class="line">            <span class="keyword">else</span> H[j]-=L[n/i/j]-L[i<span class="number">-1</span>];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (ll j=m;j&gt;=i*i;--j) &#123;</div><div class="line">            L[j]-=L[j/i]-L[i<span class="number">-1</span>];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> H[<span class="number">1</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    ll n;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;n)!=EOF) &#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,SR(n,n));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p><code>L[],H[]</code>初始化为筛内总的个数(不含1)。代码中的<code>i</code>用来枚举质数(<code>L[i]==L[i-1]</code>表示<code>i</code>不是质数)，然后对于 $j&gt;i^2$ 的 $j$ 都更新一遍dp值，只是放在了两个不同的数组而已：对于 $j\le \sqrt{n}$ 的$j$更新<code>L[]</code>，对于 $j&gt;\sqrt{n}$ 的 $j$ 更新<code>H[]</code>。只要理解了递推式代码还是很好理解的。</p><p>这个算法的时间复杂度为$O(n^{\frac{3}{4}})$（证明可以看参考资料内的下一条评论），虽然不如Meissel–Lehmer算法，但是dp的思想非常巧妙，值得学习。</p><h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>看到csdn和cnblogs上很多人都是把这份代码当作模板直接贴出来不讲解，不仅不尊重原作者，也有悖大家学习数据结构与算法的初衷，是以我不仅要翻译，还要加上一些自己的理解~~</p><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><a href="http://codeforces.com/blog/entry/44466?#comment-290036" target="_blank" rel="noopener">Editorial of Educational Codeforces Round 12</a></p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2017年多校联训3 部分题解</title>
      <link href="/blog/2017/08/02/2017multi3/"/>
      <content type="html"><![CDATA[<h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><p>仅含题解，代码详见<a href="https://github.com/Smlight/ACMer/tree/master/2017/08/01/2017%E5%A4%9A%E6%A0%A13" target="_blank" rel="noopener">github</a>。<del>喜欢的话点个star</del></p><h3 id="1003-Kanade’s-sum"><a href="#1003-Kanade’s-sum" class="headerlink" title="1003.    Kanade’s sum"></a>1003.    Kanade’s sum</h3><h3 id="1005-RXD-and-dividing"><a href="#1005-RXD-and-dividing" class="headerlink" title="1005.    RXD and dividing"></a>1005.    RXD and dividing</h3><h3 id="1006-RXD-and-functions"><a href="#1006-RXD-and-functions" class="headerlink" title="1006.    RXD and functions"></a>1006.    RXD and functions</h3><p>易得，$g_m(x)=f(x-\sum a_i)$ 。</p><p>记 $S=\sum a_i $，代入：</p><p>$$\large \begin{equation}\begin{split}<br>g_m(x)&amp;=\sum_{i=0}^{n}c_i(x-S)^i \\<br>&amp;=\sum_{i=0}^{n}c_i\sum_{j=0}^{i}C_{i}^{j}x^j(-S)^{i-j} \\<br>&amp;=x^0\sum_{j=0}^{n}c_jC_{j}^{0}(-S)^{j-0}+\cdots+x^n\sum_{j=0}^{n}c_jC_{j}^{n}(-S)^{j-n} \\<br>&amp;=\sum_{i=0}^{n}x^i\sum_{j=0}^{n}c_jC_{j}^{i}(-S)^{j-i} \\<br>&amp;=\sum_{i=0}^{n}x^i\sum_{j=i}^{n}c_j\cfrac{j!}{i!\cdot (j-i)!}(-S)^{j-i}<br>\end{split}\end{equation}$$<br>$\large \therefore b_i=\cfrac{1}{i!}\sum_{j=i}^{n}j!c_j\cdot \cfrac{(-S)^{j-i}}{(j-i)!}$<br>记$\large A_i=i!c_i，B_i=i!b_i，d_i=A_{n-i}，e_i=\cfrac{(-S)^{i}}{i!}，(1\le i\le n)$<br>$\large B_i=\sum_{k=i}^{n}A_k\cdot e_{k-i}=\sum_{k=0}^{n-i}d_{n-i-k}e_{k}$</p><p>考虑多项式乘法：<br>$A(x) = \sum_{i=0}^{n}a_ix^{i}$<br>$B(x) = \sum_{i=0}^{n}b_ix^{i}$<br>$C(x) = A(x)B(x) = \sum_{i=0}^{2n}c_ix^{i}$<br>$c_j = \sum_{i=0}^{j}a_ib_{j-i}$，</p><p>所以$B_i$即为多项式$D(x)E(x)$第$n-i$项的系数。</p><p>由于题目是在模意义下的，所以要用NTT，且费马质数必须为所给的模数。</p><h3 id="1011-RXD’s-date"><a href="#1011-RXD’s-date" class="headerlink" title="1011. RXD’s date"></a>1011. RXD’s date</h3>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2017年多校联训2 部分题解</title>
      <link href="/blog/2017/07/28/2017multi2/"/>
      <content type="html"><![CDATA[<h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><p>仅含题解，代码详见<a href="https://github.com/Smlight/ACMer/tree/master/2017/07/27/2017%E5%A4%9A%E6%A0%A12" target="_blank" rel="noopener">github</a>。<del>喜欢的话点个star</del></p><h3 id="1001-Is-Derek-lying"><a href="#1001-Is-Derek-lying" class="headerlink" title="1001.    Is Derek lying?"></a>1001.    Is Derek lying?</h3><p>两个人的分数差、分数和，分别满足一个不等式。</p><h3 id="1003-Maximum-Sequence"><a href="#1003-Maximum-Sequence" class="headerlink" title="1003.    Maximum Sequence"></a>1003.    Maximum Sequence</h3><p>贪心，题解里讲得很好。</p><h3 id="1004-Puzzle"><a href="#1004-Puzzle" class="headerlink" title="1004.    Puzzle"></a>1004.    Puzzle</h3><p>见题解。</p><h3 id="1006-Funny-Function"><a href="#1006-Funny-Function" class="headerlink" title="1006.    Funny Function"></a>1006.    Funny Function</h3><p>碰到这种看起来像找规律的题，先打一个表。<br>给一个打表程序吧。。。</p><p>最后的规律当然比题解复杂一点。。。</p><h3 id="1008-To-my-boyfriend"><a href="#1008-To-my-boyfriend" class="headerlink" title="1008.    To my boyfriend"></a>1008.    To my boyfriend</h3><p>求期望相当于求和，求和可以单点贡献相加。</p><p>因为计算不同的数，也就是相同的数只贡献一次，约定一个子矩阵内如果有多个相同的数字则仅由最上并且最左的那个数字贡献。</p><p>对于某行某列的数，考虑它在子矩阵内能产生贡献的边界：</p><ul><li>对于下边界，没有特别的限制；</li><li>对于上边界，不能到达该列相同的数；</li><li>对于左右边界，与上边界有关，且易知上边界越向上，左右边界越靠近该列。</li></ul><p>显然，对于上边界的限制，我们需要维护该列某数字上一次出现的行号。而对于左右边界，实际上也可以类似地获得。</p><p>记当前这个数为$col$，位于$x$行$y$列。用$j$<strong>由远及近</strong>枚举每一列，将第$j$列上$col$上一次出现的那行的$l$更新为$j$，枚举每一列后，再根据上述左右边界的性质，从第$x-1$行向上不断对$l$取$max$(越来越靠近第$y$列)。$r$也是类似地处理。最后再枚举子矩阵的上界，对于每个上界可以$O(1)$累加贡献。总的复杂度$O(n^3)$。</p><p>最后由于我们约定的是最上且最左，所以左边界要考虑到同一行，右边界不用考虑同一行，这一点在读入前清空数组就会自动满足。</p><h3 id="1009-TrickGCD"><a href="#1009-TrickGCD" class="headerlink" title="1009.    TrickGCD"></a>1009.    TrickGCD</h3><p>栗子原话：</p><blockquote><p>现在感觉数列的值域化考的很多啊<br>数列的值域化，还有n/1+n/2+…+n/n=nlogn<br>这两个东西放在一起很热门</p></blockquote><p>根据题目，其实我们只要保证 1~n 总的gcd满足条件即可。</p><p>首先，我们从2开始枚举x，表示总的gcd至少为x，然后就需要容斥，大概感觉一下容斥系数就是 $-\mu(x)$（不会证），所以最终答案 $\large ans=\sum_{x=2}^{min{a_i}} -\mu(x) \prod_{i=1}^{i=n}\lfloor\cfrac{a_i}{x}\rfloor $ 。</p><p>这时候有两个想法。。。</p><p>一是确定的 $a$ 对于某一段 $x$ 总是同一个值，然后按照类似杜教筛的做法，共有 $2\sqrt{a}$ 段，每一段相当于一次区间乘法，可以类似差分地在区间前后打个标记，复杂度$2n\sqrt{A},A=max{a_i}$，然后就TLE了。。。</p><p>二是确定的 $x$ 对于值域在某一段的 $a$ 总是同一个值，因为答案跟 $a$ 序列的顺序无关，就可以直接把 $a$ 序列值域化，然后对于确定的 $x$ 再枚举 $\lfloor\cfrac{a}{x}\rfloor$ 即可，总的复杂度 $O(MlogM),M=10^5$ 。</p><h3 id="1011-Regular-polygon"><a href="#1011-Regular-polygon" class="headerlink" title="1011.    Regular polygon"></a>1011.    Regular polygon</h3><p>整点结论：只有正四边形。可以 $O(1)$ 映射。</p><h3 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h3><ol><li><a href="http://bestcoder.hdu.edu.cn/blog/2017-multi-university-training-contest-2-solutions-by-%E7%94%B5%E5%AD%90%E7%A7%91%E6%8A%80%E5%A4%A7%E5%AD%A6/" target="_blank" rel="noopener">solutions BY 电子科技大学</a></li><li><a href="https://raw.githubusercontent.com/Smlight/ACMer/master/2017/07/27/2017%E5%A4%9A%E6%A0%A12/%E5%9B%BD%E5%AE%B6%E9%9B%86%E8%AE%AD%E9%98%9F2017%E8%AE%BA%E6%96%87%E9%9B%86.pdf" target="_blank" rel="noopener">国家集训队2017论文集</a></li><li><a href="http://www.cnblogs.com/nicetomeetu/p/7261147.html" target="_blank" rel="noopener"> To my boyfriend [ 分析,期望 ] </a></li></ol>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2017年多校联训1 部分题解</title>
      <link href="/blog/2017/07/26/2017multi1/"/>
      <content type="html"><![CDATA[<h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><p>仅含题解，代码详见<a href="https://github.com/Smlight/ACMer/tree/master/2017/07/25/2017%E5%A4%9A%E6%A0%A11" target="_blank" rel="noopener">github</a>。<del>喜欢的话点个star</del></p><h3 id="1001-Add-More-Zero"><a href="#1001-Add-More-Zero" class="headerlink" title="1001. Add More Zero"></a>1001. Add More Zero</h3><h3 id="1002-Balala-Power"><a href="#1002-Balala-Power" class="headerlink" title="1002. Balala Power!"></a>1002. Balala Power!</h3><p>每个字符对答案的贡献都可以看作一个26进制的数字，直接按26进制的从高到低位比较大小。由排序不等式，显然贡献越大的对应的数字越大时答案最大。</p><p>注意点：一个字符一旦做过最高位(位数大于1)就不能被赋值为0。</p><h3 id="1003-Colorful-Tree"><a href="#1003-Colorful-Tree" class="headerlink" title="1003. Colorful Tree"></a>1003. Colorful Tree</h3><p>单独考虑每一种颜色，答案就是对于每种颜色，至少经过一次这种颜色的路径条数之和。反过来思考只需要求有多少条路径没有经过这种颜色即可。</p><p>记$u$的颜色为col[u]。对于$v$，若在子树$v$中取$x$，在子树$v$外取$y$，则这些路径一定会经过col[v]。那么有两个推论：</p><ul><li>不经过col[v]的路径的两端$x,y$一定同在子树$v$；</li><li>对于$v$的祖先$u$，若col[v]==col[u]，则在$u$上计算时整棵子树$v$都要被排除。</li></ul><p>这样我们可以用合并线段树的方法解决，复杂度$O(nlogn)$，详见附录2。</p><p>又发现线段树实际上只维护了单点增加的操作，可以用sum[i]表示颜色i需要排除的节点数<strong>对于dfs序</strong>的前缀和，复杂度$O(n)$。</p><h3 id="1006-Function"><a href="#1006-Function" class="headerlink" title="1006. Function"></a>1006. Function</h3><p>考虑置换$a$的一个循环节，长度为$l$，那么有$$\LARGE f(i) = b_{f(a_i)} = b_{b_{f(a_{a_i})}} = \underbrace{b_{\cdots b_{f(i)}}}_{l\text{ times }b}$$</p><p>那么 $f(i)$ 的值在置换 $b$ 中所在的循环节的长度必须为 $l$ 的因数。</p><p>而如果 $f(i)$ 的值确定下来了，这个循环节的另外 $l - 1$ 个数的函数值也都确定下来了。</p><p>答案就是$\sum_{i = 1}^{k} \sum_{j | l_i} {j \cdot cal_j}$，其中 $k$ 是置换 $a$ 中循环节的个数，$l_i$ 表示置换 $a$ 中第 $i$ 个循环节的长度， $cal_j$​​ 表示置换 $b$ 中长度为 $j$ 的循环节的个数。</p><h3 id="1008-Hints-of-sd0061"><a href="#1008-Hints-of-sd0061" class="headerlink" title="1008. Hints of sd0061"></a>1008. Hints of sd0061</h3><h3 id="1009-I-Curse-Myself"><a href="#1009-I-Curse-Myself" class="headerlink" title="1009. I Curse Myself"></a>1009. I Curse Myself</h3><p>按题解写出来的那个方法过的，时间很险，3697ms。。。</p><h3 id="1011-KazaQ’s-Socks"><a href="#1011-KazaQ’s-Socks" class="headerlink" title="1011. KazaQ’s Socks"></a>1011. KazaQ’s Socks</h3><h3 id="1012-Limited-Permutation"><a href="#1012-Limited-Permutation" class="headerlink" title="1012. Limited Permutation"></a>1012. Limited Permutation</h3><p>题目给的信息实际上就是 $p[l_i…r_i]\ge p[i]$。</p><p>首先必须有一个位置 $i$ 满足 $l_i=1,r_i=n$，否则方案数为 0 。考虑 $i$ 左右的两段数，因为 $p[i]$ 是最小的，所以左边数向右的界不会越过 $i$，即 $(r_j \lt i)$ ；右边数向左的界不会越过 $i$，即 $(l_k \gt i)$ 。可以发现：左边数和右边数不会再有任何联系，是完全相同的两个子问题。每次递归给答案累乘<strong>从 $r_i-l_i$ 个数中选出一部分作为左边数</strong>的方案数即可。思路来自附录3，对应<code>1012_NlogN.cpp</code>。</p><p>很显然，递归算法的瓶颈不在于递归本身而在于利用映射查询是否有位置对应$[L,R]$ 。某大佬：用一个栈搞一搞就行了，对应<code>1012.cpp</code>。</p><h3 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h3><ol><li><a href="http://bestcoder.hdu.edu.cn/blog/2017-multi-university-training-contest-8-solutions-by-%E5%8C%97%E4%BA%AC%E8%88%AA%E7%A9%BA%E8%88%AA%E5%A4%A9%E5%A4%A7%E5%AD%A6/" target="_blank" rel="noopener">solutions BY 北京航空航天大学</a></li><li><a href="http://blog.csdn.net/banfcc/article/details/76091240" target="_blank" rel="noopener">HDU6035 Colorful Tree</a></li><li><a href="http://blog.csdn.net/say\_c\_box/article/details/76147001" target="_blank" rel="noopener">HDU6044 Limited Permutation</a></li></ol>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hihocoder 1529 不上升序列</title>
      <link href="/blog/2017/07/02/hihocoder1529/"/>
      <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>听说最早的题目原型是<a href="http://codeforces.com/problemset/problem/13/C" target="_blank" rel="noopener">CF13C</a><br>下面按这题来讲，其实就是换成了不降。</p><h3 id="朴素DP"><a href="#朴素DP" class="headerlink" title="朴素DP"></a>朴素DP</h3><p>定义$f_i(X)$ 为前$i$个数变为不降序列且$a_i\le X$的最小步数。<br>显然有<br>$f_1(X) = min_{Y\le X}{|a_1-Y|}$<br>$f_i(X) = min_{Y\le X}{f_{i-1}(Y)+|a_i-Y|}$</p><h3 id="离散的DP"><a href="#离散的DP" class="headerlink" title="离散的DP"></a>离散的DP</h3><p>可以令${b_i}$为${a_i}$的一个有序copy，复杂度$O(n^2)$。<br>详情请阅 <a href="http://codeforces.com/blog/entry/364" target="_blank" rel="noopener">CF13C Tutorial</a> 。</p><h3 id="单调性优化"><a href="#单调性优化" class="headerlink" title="单调性优化"></a>单调性优化</h3><p>$f_i(X) = min_{Y\le X}{f_{i-1}(Y)+|a_i-Y|}=min(f_i(X-1),f_{i-1}(X)+|a_i-X|)$<br>由绝对值和最小值的性质，$f_i$对于$X$是一个单减的非负函数，并最后保持一个非负值。<br>考虑其“斜率函数” $g_i(X)=f_i(X+1)-f_i(X)$，则$g_i(X)$单增（不会证）。<br>$g_i(X)$的值域为有限个小于等于0的整数，我们将值域中每个数对应的最小的$x$写为一个序列（即“变化点”），即序列的最后一个数为使得$g_i(x)=0$的最小的$x$，……</p><p>突然发现我还是不会证，，那就没必要了，，大家还是看资料吧。。</p><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ol><li><a href="http://codeforces.com/blog/entry/47821" target="_blank" rel="noopener">http://codeforces.com/blog/entry/47821</a></li><li><a href="http://codeforces.com/blog/entry/47094?#comment-315161" target="_blank" rel="noopener">http://codeforces.com/blog/entry/47094?#comment-315161</a></li><li><a href="https://media.hihocoder.com/contests/challenge29/sol.pdf" target="_blank" rel="noopener">https://media.hihocoder.com/contests/challenge29/sol.pdf</a></li></ol>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2017年上海金马五校赛 解题报告</title>
      <link href="/blog/2017/06/04/2017%E5%B9%B4%E4%B8%8A%E6%B5%B7%E9%87%91%E9%A9%AC%E4%BA%94%E6%A0%A1%E8%B5%9B%E8%A7%A3%E9%A2%98%E6%8A%A5%E5%91%8A/"/>
      <content type="html"><![CDATA[<h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><p>因为题目实在太多了，代码就不贴在博客里了。。。想看代码的童鞋可以去<a href="https://github.com/Smlight/ACMer/tree/master/2017/6%E6%9C%88/%E9%87%91%E9%A9%AC%E4%BA%94%E6%A0%A1%E8%B5%9B" target="_blank" rel="noopener">github</a>上看看。<br>题目似乎看不了了，我只能凭感觉复述一下题意了。。。</p><h3 id="Before"><a href="#Before" class="headerlink" title="Before"></a>Before</h3><p>这个比赛有一个资格赛，但是跟蓝桥杯决赛冲突了所以不能参加，没想到老师帮我们申请了参赛资格，意外之喜。<br>热身刚结束实验室就断电了。。然后吃完饭背着电脑去了没空调的教室。。。</p><h3 id="WarmUp"><a href="#WarmUp" class="headerlink" title="WarmUp"></a>WarmUp</h3><p>B题就不说了，反正一眼。A题首先肯定要把质数都筛出来，本来想在质数表里直接做的，但是发现写不出来。。。主要是因为对于 $a\leq x\leq b-m+1$ 都要成立，这个放到质数表里细节太多。。。所以想还不如直接交个很好写的二分答案，结果一发过了。。。很无语，要不是怕复杂度不太对这个也是看一眼就能写 = = 。。。C题比较难懂，它定义的线段能组成方形实际上跟线段本身的长度没有关系，读了好久才读懂，反正不会做也无所谓了 =。=</p><h3 id="A"><a href="#A" class="headerlink" title="A"></a>A</h3><p>题意：D、E、E、S、T 做全排列并且按字典序排序，输出第$n$个$(n\leq 60)$。<br>题解：用<code>next_permutation</code>打个表就行啦 <del>虽然CE了两次</del></p><h3 id="B"><a href="#B" class="headerlink" title="B"></a>B</h3><p>题意：给出一个 $n\times n$ 四连通的字符地图$(n\leq 50)$，只包含’*‘,’#’两种字符，从’*‘到’#’要消耗1点能量，从’#’到其他也要消耗1点能量。问从$(1,1)$到$(n,n)$至少要消耗多少能量。<br>题解：每个字符与相邻的字符建图，做一次单源最短路。可以用dijkstra+队列优化，时间复杂度$O(2n^2logn+4n^2)$。</p><h3 id="C"><a href="#C" class="headerlink" title="C"></a>C</h3><p>题意：给出$n$个数的序列$(n\leq 20)$，每个数之前可以加正号或者负号，各个数也可以换位置，问最终能有多少不用的结果。<br>题解：显然换位置对于最后答案没有影响，只需要考虑是正是负就可以了。直接dfs，用<code>set</code>去重一下，时间复杂度$O(2^nnlog2)$。</p><h3 id="D"><a href="#D" class="headerlink" title="D"></a>D</h3><p>题意：有一个无穷的字符串序列${a,b,\dots,z,aa,\dots,az,ba,\dots }$，称不含a也不含bc的字符串为beautiful。给出一个串，问这个串之前有多少beautiful的字符串$(|S|\leq 100)$。<br>题目：很明显的数位dp，实际上跟hdu上的<a href="http://acm.hdu.edu.cn/showproblem.php?pid=2089" target="_blank" rel="noopener">不要62</a>差不多，不过这个是不能含a，相当于数字不能含0，那么就不能用前导0来补位了。。。刚开始也想怎么改一改模板，好像改了几十分钟都没搞定，最后就直接各种位数都算一遍就行了 =。= 单组时间复杂度$O(26n^2)$，不过根本到不了，多组就更无压力了。</p><h3 id="E"><a href="#E" class="headerlink" title="E"></a>E</h3><p>题意：求最长回文子串的长度$(|S|&lt;=50)$。<br>题解：枚举中心和中心对暴力，时间复杂度$O(n^2)$。manacher的板子当然更无压力。</p><h3 id="F"><a href="#F" class="headerlink" title="F"></a>F</h3><p>题意：有$n$条公交路线，问从S到T至少转车几次，如果多个方案输出时间最短的。<br>题解：做过类似的，写起来太麻烦没写，所以数据范围也没记清楚。仍然是建图dijkstra，中间好像要处理一下不太记得了 = = </p><h3 id="G"><a href="#G" class="headerlink" title="G"></a>G</h3><p>题意：A和B在$n\times m$的网格图中移动一枚棋子，棋子的初始位置是$(1,1)$，每次只能向右或者向下移动，不能移动者失败。B后手认为游戏不太公平，增加规则，他可以在游戏开始前破坏<strong>至多</strong>一个格子（不能破坏左上角和右下角），游戏中两人不能移动到这个格子。在A最优策略的情况下，问B有没有必胜策略。<br>题解：首先考虑不破坏的情况，显然总共需要$n-1+m-1$步，如果这个数是偶数，那B必胜。再考虑需要破坏的，不妨令$n \lt m$，先填入SG值，$(n,m)$没有后继。</p><table><thead><tr><th style="text-align:center">0</th><th style="text-align:center">1</th><th style="text-align:center">2</th><th style="text-align:center">4</th><th style="text-align:center">5</th><th style="text-align:center">6</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td></tr></tbody></table><p>可以发现，破坏中间的格子是没有用的，始终都有向右向下两个方向，要破坏就破坏底边的格子。当底边某个格子被破坏后，它左边的格子会没有后继变成0，所以破坏当前是1的格子也是没有用的，我们试着破坏$(3,4)$。</p><table><thead><tr><th style="text-align:center">1</th><th style="text-align:center">2</th><th style="text-align:center">3</th><th style="text-align:center">4</th><th style="text-align:center">5</th><th style="text-align:center">6</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:center">2</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">2</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">X</td><td style="text-align:center">1</td><td style="text-align:center">0</td></tr></tbody></table><p>可以发现，$(1,1)$的状态确实变了，变成了0，也就是先手必败。再仔细观察，$(1,4),(2,5)$也发生了改变，而且实际上右边还有多少列也没有关系，比如再多两列。</p><table><thead><tr><th style="text-align:center">1</th><th style="text-align:center">2</th><th style="text-align:center">3</th><th style="text-align:center">4</th><th style="text-align:center">5</th><th style="text-align:center">6</th><th style="text-align:center">7</th><th style="text-align:center">8</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:center">2</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">2</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">X</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td></tr></tbody></table><p>相当于用X在左边规划了一个正方形，后手一定能把棋子移动到X的左边。那么样例的$(3,4)$为什么不行呢？因为要划一个$3\times 3$的正方形必须要破坏$(3,4)$，然而B不能破坏右下角，所以就不能必胜了。<br>综上，$n+m$是偶数或者$abs(n-m)$是大于1的奇数时有必胜策略。</p><h3 id="H"><a href="#H" class="headerlink" title="H"></a>H</h3><p>题意：$n$个数，大小为$k$的滑动窗口从左往右滑动$(k\leq n\leq 10^7)$，求滑动过程中，最大值的平均数、平均数的最大值、标准差的最小值。<br>题解：求平均数和标准差只要维护一下区间和跟区间平方和就行了，求最大值的话参考<a href="http://poj.org/problem?id=2823" target="_blank" rel="noopener">poj2823</a>，可以用双端队列维护。计算过程可以用<code>long double</code>，<code>scanf</code>和<code>printf</code>要用<code>double</code>。。。</p><h3 id="I"><a href="#I" class="headerlink" title="I"></a>I</h3><p>题意：环上有$0\dots n-1$这$n$个点$(n\leq 1000000)$，青蛙从$0$开始每一步跳$x$，问有多少$x$使得青蛙能到达所有的点，青蛙可以跳无穷多次。<br>题解：题意即 $ax-bn=c$ 对于 $c&gt;0$ 均有解。由裴蜀定理可以推知 $gcd(x,n)=1$。输出 $\varphi(n)$ 即可，预处理$O(N)$，回答$O(1)$。</p><h3 id="J"><a href="#J" class="headerlink" title="J"></a>J</h3><p>题意：二维平面有$n$个点，以第一个点为起点、终点，每次走直线段去其他的点，直线段不能相交，问最后能围住多大的面积。<br>题解：刚读完的时候以为求个凸包就行了，后来发现规定了起点终点可能走不了凸包。。。然后就没做了，所以题目记得也不是很清楚。<br><img src="http://img.blog.csdn.net/20170604104149087" alt=""></p><h3 id="K"><a href="#K" class="headerlink" title="K"></a>K</h3><p>题意：在$n\times m$的方格中从(1,1)开始顺时针地蛇形填数，输出结果$(n,m\leq 100)$。</p><blockquote><p>输入：<br>3 3<br>1 2 3 4 5 6 7 8 9<br>输出：<br>1 2 3<br>8 9 4<br>7 6 5</p></blockquote><p>题解：好像有个巧妙的方法，实在不行四种情况都判断一下就行，总之就是模拟。</p><h3 id="L"><a href="#L" class="headerlink" title="L"></a>L</h3><p>没读</p><h3 id="M"><a href="#M" class="headerlink" title="M"></a>M</h3><p>题意：给一个$n\times m$的矩阵D，再给一个kernel，即$3\times 3$的矩阵K，求D关于K的卷积$(n,m\leq 100)$。<br>题解：这题要是不给卷积的公式还真能难倒很多人。。。实际上就是按公式计算一下$$\large C_{i,j}=\sum_{a=0}^{min(n-i-1,2)}\sum_{b=0}^{min(m-j-1,2)}D_{i+a,j+b}\times K_{a,b}$$时间复杂度$O(3^2nm)$。</p><h3 id="N"><a href="#N" class="headerlink" title="N"></a>N</h3><p>题意：$n$可以分解成$k$个正整数$(k\leq n\leq 1000)$，即$\sum_{i=1}^{k}a_i=n$，$a_i$递增，对于每种分解，它的值是这些数两两相乘的和，即$\sum_{i=1}^{k-1}\sum_{j=i+1}^{k}a_i*a_j$。求所有分解的和模$p$，保证$p$是一个奇质数。</p><blockquote><p>输入：<br>5 1000000007<br>输出：<br>44<br>输出解释：<br>5=1+1+1+1+1 值为10<br>5=1+1+1+2   值为9<br>5=1+2+2     值为8<br>5=1+1+3     值为7<br>5=2+3       值为6<br>5=1+4       值为4<br>5=5         值为0</p></blockquote><p>题解：$$记S=\sum_{i=1}^{k-1}\sum_{j=i+1}^{k}a_i*a_j$$ $$\because (\sum_{i=1}^{k}a_i)^2=\sum_{i=1}^{k}a_i^2+2S$$ $$\therefore S=\frac{1}{2}(n^2-\sum_{i=1}^{k}a_i^2)$$由于$S$的值很难维护，我们转而去求所有分解中的数的平方和。借用整数划分的记忆化搜索方法，<code>getspilit(n,m)</code>表示要分解$n$，且分解中出现的数都不超过$m$。分为 $m&gt;n$，$m==n$，$m&lt;n$ 三种情况，后两种再分为最终分解中包不包含m，这样不会重复。同时用<code>f[][]</code>记录不同分解数，<code>g[][]</code>记录所有分解的所有数字的平方和，用<code>f[n][n]</code>倍的$n^2$减去<code>g[n][n]</code>，最后再乘以2的逆元就可以了，时间复杂度$O(n^2)$。</p><h3 id="O"><a href="#O" class="headerlink" title="O"></a>O</h3><p>题意：给出$2n$个数，两两一组，使得每组两个数的差的绝对值之和最小，求这个最小的和。<br>题解：由绝对值的性质，排序后两两分组即可。（可以用初中的数形结合全都标到数轴上证明）</p><h3 id="After"><a href="#After" class="headerlink" title="After"></a>After</h3><p>比赛的时候查了不少资料，还复制粘贴了很多模板，结果竟然还是没打过现场赛的人。。。感觉很多知识点虽然知道但是不太熟练。。。继续学习。。。</p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Piece1</title>
      <link href="/blog/2017/06/04/Piece1/"/>
      <content type="html"><![CDATA[<p>三月份以后就一直没有发过博客蓝桥杯那两篇也是因为跟别人承诺过因为蓝桥杯省赛基本上都是水题实在是没啥好写的压轴题做了也没地方能交毫无意义。比完蓝桥杯省赛以后又开始学dp和流做的都是sb题和old题也没啥好写的。五月份每个周末都有比赛：先是江苏省赛又是买的题还跟湘潭赛一样真tm难还好没有完全按照去年的模式准备这场主要的遗憾是有一个写起来很短的前缀和的题目没想到，再是陕西邀请赛这场主要的遗憾是有一个sb题写得太慢了另外一个矩形枚举倒是没开错但是想法也不对，最后是蓝桥杯决赛每次都很无语填空题和大题的跨度实在太大了权当是旅游。<br>其实蓝桥杯决赛前后已经没做题了一直在做软件杯的网站和各种杂事昨天打了金马五校赛和计祘客一下子做了这么多题而且感觉还不错于是决定今天还是要把解题报告发一下然后一打开博客发现都这么久没更新了又有这么多次比赛没总结所以又临时加了这一篇。从它仅有的标点判断我觉得能看完的人一定都是真爱23333333</p>]]></content>
      
      
        <tags>
            
            <tag> Life </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Django时间时区问题</title>
      <link href="/blog/2017/05/06/Django%E6%97%B6%E9%97%B4%E6%97%B6%E5%8C%BA%E9%97%AE%E9%A2%98/"/>
      <content type="html"><![CDATA[<p>唉。。。写篇blog纪念一下浪费了我半个上午时间的问题。。。<br>写的是这么一个代码：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">while pre<span class="selector-class">.time</span> != now<span class="selector-class">.time</span>:</div></pre></td></tr></table></figure></p><p><code>pre</code>是从数据库取出来的一条记录，<code>now</code>是我准备插入的一条记录，<code>.time</code>是<code>datetimeField</code>，对应程序里就是一个<code>datetime</code>对象。<br>结果这个条件怎么都是真的，也就是说<code>pre.time</code>和<code>now.time</code>总是不相等，我输出了一下发现<code>pre.time</code>是utc时间而且最后会带一个<code>+00:00</code>。<br>想到以前看到过的warning其实很好查到。<code>now.time</code>是一个 <strong>naive</strong> time，而<code>pre.time</code>是一个 aware time，其实就是带不带时区的问题，所以只要让<code>now.time</code>带上时区变成 aware time 就可以了。<br>然后就去查怎么变，其实第一个查到的就是对的。。。只是代码给的不全导致我产生了误解。。。查到的代码是：<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">aware_time</span> = naive_time.replace(tzinfo=utc)</div></pre></td></tr></table></figure></p><p>写进去就显示 unresolved reference 我就觉得它很不靠谱，接着就查到了其他的问题。。。</p><ol><li><p>比如一个字符串<code>Sun, 28 Aug 2016 11:42:00 +0200</code>其实最后是带着时区的，那么怎么转换成 aware time呢？方案是：</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">from datetime import datetime</div><div class="line">date_published = datetime.strptime(date_published, <span class="string">"%a, %d %b %Y %H:%M:%S %z"</span>)</div></pre></td></tr></table></figure><p>看起来很棒棒啊！我就想直接给我的字符串也带上时区：<code>time_str += u&#39; +0800&#39;</code>，然后再用这个方法岂不是美滋滋？<br>结果就是一直 not match 。%z %Z +08:00 utc+8 都试了，甚至还查到了CCT啥的，还是不行。。。<del>SO要给我精神损失费啊TAT</del></p></li><li>attribute ‘tzinfo’ of ‘datetime.datetime’ objects is not writable<br>题主写的是 <code>book.creationTime.tzinfo = EST</code><br>答主说改成 <code>book.creationTime = book.creationTime.replace(tzinfo=EST)</code><br>我一想这人有点傻啊，但是他能用<code>EST</code>我也能用吧，反正加上了时区一切好说，大不了我再加加减减调整一下。。。大概是<code>aware_time = naive_time.replace(tzinfo=EST)</code> 很显然还是不行TAT</li></ol><p>最终解决方案：看这些查到的代码我一直以为既然有tzinfo这个类，应该就会有实现好的类，然而问这些的人可能都<code>import pytz</code>了。。。所以如果不想加上pytz实际上最佳的方案就是<strong>实现一个tzinfo的类</strong>。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timedelta, tzinfo</div><div class="line"></div><div class="line">ZERO_TIME_DELTA = timedelta(<span class="number">0</span>)</div><div class="line">LOCAL_TIME_DELTA = timedelta(hours=<span class="number">8</span>)  <span class="comment"># 本地时区偏差</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">LocalTimezone</span><span class="params">(tzinfo)</span>:</span></div><div class="line">    <span class="string">"""实现北京时间的类"""</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">utcoffset</span><span class="params">(self, dt)</span>:</span></div><div class="line">        <span class="keyword">return</span> LOCAL_TIME_DELTA</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dst</span><span class="params">(self, dt)</span>:</span></div><div class="line">        <span class="keyword">return</span> ZERO_TIME_DELTA</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tzname</span><span class="params">(self, dt)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">'+08:00'</span></div><div class="line"></div><div class="line"></div><div class="line">forma = <span class="string">"%Y-%m-%d %H:%M"</span></div><div class="line">now.time = datetime.strptime(time_str, forma).replace(tzinfo=LocalTimezone())</div></pre></td></tr></table></figure></p><p><em>update</em>：实际上<code>import pytz</code>就是最佳的解决方案，这些方法实在是太挫了。。。</p>]]></content>
      
      
        <tags>
            
            <tag> Bug </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2015年蓝桥杯省赛C/C++ A组题解（含题目）</title>
      <link href="/blog/2017/03/22/2015lanqiao1/"/>
      <content type="html"><![CDATA[<h3 id="1-方程整数解"><a href="#1-方程整数解" class="headerlink" title="1. 方程整数解"></a>1. 方程整数解</h3><blockquote><p>方程: a^2 + b^2 + c^2 = 1000<br>这个方程有整数解吗？有：a,b,c=6,8,30 就是一组解。<br>你能算出另一组合适的解吗？<br>请填写该解中最小的数字。<br>注意：你提交的应该是一个整数，不要填写任何多余的内容或说明性文字。 </p></blockquote><p>枚举<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">33</span>;i++) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j=i;j&lt;=<span class="number">33</span>;j++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k=j;k&lt;=<span class="number">33</span>;k++) &#123;</div><div class="line">                <span class="keyword">if</span> (i*i+j*j+k*k==<span class="number">1000</span>) &#123;</div><div class="line">                    <span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>,i,j,k);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>答案：<code>10</code></p><h3 id="2-星系炸弹"><a href="#2-星系炸弹" class="headerlink" title="2. 星系炸弹"></a>2. 星系炸弹</h3><blockquote><p>在X星系的广袤空间中漂浮着许多X星人造“炸弹”，用来作为宇宙中的路标。<br>每个炸弹都可以设定多少天之后爆炸。<br>比如：阿尔法炸弹2015年1月1日放置，定时为15天，则它在2015年1月16日爆炸。<br>有一个贝塔炸弹，2014年11月9日放置，定时为1000天，请你计算它爆炸的准确日期。<br>请填写该日期，格式为 yyyy-mm-dd<br>即4位年份2位月份2位日期。比如：<br>2015-02-19<br>请严格按照格式书写。不能出现其它文字或符号。</p></blockquote><p>想一下，我们用的可是一台电脑！写这个程序的话实在是太费时间了。</p><h4 id="Step1"><a href="#Step1" class="headerlink" title="Step1."></a>Step1.</h4><p>复制“2014年11月9日”，粘贴到excel，并把单元格格式改成日期<br><img src="http://img.blog.csdn.net/20170313161320145" alt=""></p><h4 id="Step2"><a href="#Step2" class="headerlink" title="Step2."></a>Step2.</h4><p>移动到A2，输入”=SUM(A1,1000)”，按一下回车<br><img src="http://img.blog.csdn.net/20170313162201986" alt=""></p><p>欧了 =。= 开心不<br>答案：<code>2017-08-05</code></p><h3 id="3-奇妙的数字"><a href="#3-奇妙的数字" class="headerlink" title="3. 奇妙的数字"></a>3. 奇妙的数字</h3><blockquote><p>小明发现了一个奇妙的数字。它的平方和立方正好把0~9的10个数字每个用且只用了一次。<br>你能猜出这个数字是多少吗？<br>请填写该数字，不要填写任何多余的内容。</p></blockquote><p>枚举+模拟<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> b[<span class="number">10</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">solu</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> b[])</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">while</span> (x) &#123;</div><div class="line">        b[x%<span class="number">10</span>]++;</div><div class="line">        x/=<span class="number">10</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>,j;i&lt;<span class="number">9999</span>;i++) &#123;</div><div class="line">        <span class="built_in">memset</span>(b,<span class="number">0</span>,<span class="keyword">sizeof</span>(b));</div><div class="line">        solu(i*i,b);</div><div class="line">        solu(i*i*i,b);</div><div class="line">        <span class="keyword">for</span> (j=<span class="number">0</span>;j&lt;=<span class="number">9</span>;j++)</div><div class="line">            <span class="keyword">if</span> (b[j]!=<span class="number">1</span>) <span class="keyword">break</span>;</div><div class="line">        <span class="comment">//每个b[i]都等于1，j才会大于9</span></div><div class="line">        <span class="keyword">if</span> (j&gt;<span class="number">9</span>) &#123;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,i);</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>答案：<code>69</code></p><h3 id="4-格子中输出"><a href="#4-格子中输出" class="headerlink" title="4. 格子中输出"></a>4. 格子中输出</h3><blockquote><p>StringInGrid函数会在一个指定大小的格子中打印指定的字符串。<br>要求字符串在水平、垂直两个方向上都居中。<br>如果字符串太长，就截断。<br>如果不能恰好居中，可以稍稍偏左或者偏上一点。<br>下面的程序实现这个逻辑，请填写划线部分缺少的代码。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">StringInGrid</span><span class="params">(<span class="keyword">int</span> width, <span class="keyword">int</span> height, <span class="keyword">const</span> <span class="keyword">char</span>* s)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> i,k;</div><div class="line">    <span class="keyword">char</span> buf[<span class="number">1000</span>];</div><div class="line">    <span class="built_in">strcpy</span>(buf, s);</div><div class="line">    <span class="keyword">if</span>(<span class="built_in">strlen</span>(s)&gt;width<span class="number">-2</span>) buf[width<span class="number">-2</span>]=<span class="number">0</span>;</div><div class="line">    </div><div class="line">    <span class="built_in">printf</span>(<span class="string">"+"</span>);</div><div class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;width<span class="number">-2</span>;i++) <span class="built_in">printf</span>(<span class="string">"-"</span>);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"+\n"</span>);</div><div class="line">    </div><div class="line">    <span class="keyword">for</span>(k=<span class="number">1</span>; k&lt;(height<span class="number">-1</span>)/<span class="number">2</span>;k++)&#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"|"</span>);</div><div class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;width<span class="number">-2</span>;i++) <span class="built_in">printf</span>(<span class="string">" "</span>);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"|\n"</span>);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="built_in">printf</span>(<span class="string">"|"</span>);</div><div class="line">    </div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%*s%s%*s"</span>,__________________________________);  <span class="comment">//填空</span></div><div class="line">             </div><div class="line">    <span class="built_in">printf</span>(<span class="string">"|\n"</span>);</div><div class="line">    </div><div class="line">    <span class="keyword">for</span>(k=(height<span class="number">-1</span>)/<span class="number">2</span>+<span class="number">1</span>; k&lt;height<span class="number">-1</span>; k++)&#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"|"</span>);</div><div class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;width<span class="number">-2</span>;i++) <span class="built_in">printf</span>(<span class="string">" "</span>);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"|\n"</span>);</div><div class="line">    &#125; </div><div class="line">    </div><div class="line">    <span class="built_in">printf</span>(<span class="string">"+"</span>);</div><div class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;width<span class="number">-2</span>;i++) <span class="built_in">printf</span>(<span class="string">"-"</span>);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"+\n"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    StringInGrid(<span class="number">20</span>,<span class="number">6</span>,<span class="string">"abcd1234"</span>);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>对于题目中数据，应该输出：<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="code">+------------------+</span></div><div class="line">|                  |</div><div class="line">|     abcd1234     |</div><div class="line">|                  |</div><div class="line"><span class="section">|                  |</span></div><div class="line">+------------------+</div></pre></td></tr></table></figure></p><p>注意：只填写缺少的内容，不要书写任何题面已有代码或说明性文字。</p></blockquote><p>很明显，填空的上面是输出上半部分，下面是输出下半部分，所以我们填的这个就是正中间那行。<br>要做这题首先要知道<code>%*s</code>是个什么。。。<del>我也不知道啊</del><br>反正当年是没填出的居多  <a href="https://zhidao.baidu.com/question/310414478.html" target="_blank" rel="noopener">输出控制符资料</a><br>也就是说碰到*的时候我们要额外给一个整型参数控制宽度。</p><p>我们看到第9行，buf已经完成了截断，而s没有截断，所以我们要用也只能用buf。<br>然后我们算出左边右边的宽度，值得注意的是，左右的宽度表达式是不一样的。<br>因为题目里说了不对称是要靠左，可以把<code>abcd1234</code>最后的4去掉看看效果。<br>感觉查了这么多博客都没一个人填对的。。。唉= =</p><p>答案：<code>(width-strlen(buf)-2)/2,&quot;&quot;,buf,(width-strlen(buf)-2+1)/2,&quot;&quot;</code></p><h3 id="5-九数组分数"><a href="#5-九数组分数" class="headerlink" title="5. 九数组分数"></a>5. 九数组分数</h3><blockquote><p>1,2,3…9 这九个数字组成一个分数，其值恰好为1/3，如何组法？<br>下面的程序实现了该功能，请填写划线部分缺失的代码。<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line"></div><div class="line">void test(int x[])</div><div class="line">&#123;</div><div class="line">    int a = x[<span class="number">0</span>]*<span class="number">1000</span> + x[<span class="number">1</span>]*<span class="number">100</span> + x[<span class="number">2</span>]*<span class="number">10</span> + x[<span class="number">3</span>];</div><div class="line">    int b = x[<span class="number">4</span>]*<span class="number">10000</span> + x[<span class="number">5</span>]*<span class="number">1000</span> + x[<span class="number">6</span>]*<span class="number">100</span> + x[<span class="number">7</span>]*<span class="number">10</span> + x[<span class="number">8</span>];</div><div class="line">    </div><div class="line">    if(a*<span class="number">3</span>==b) printf(<span class="string">"%d / %d<span class="subst">\n</span>"</span>, a, b);</div><div class="line">&#125;</div><div class="line">    </div><div class="line">void f(int x[], int k)</div><div class="line">&#123;</div><div class="line">    int i,t;</div><div class="line">    if(k&gt;=<span class="number">9</span>)&#123;</div><div class="line">        test(x);</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    for(i=k; i&lt;<span class="number">9</span>; i++)&#123;</div><div class="line">        &#123;t=x[k]; x[k]=x[i]; x[i]=t;&#125;</div><div class="line">        f(x,k+<span class="number">1</span>);</div><div class="line">        _________________________________ <span class="comment">// 填空处</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    int x[] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;;</div><div class="line">    f(x,<span class="number">0</span>);  </div><div class="line">    return <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>注意：只填写缺少的内容，不要书写任何题面已有代码或说明性文字。</p></blockquote><p>这主要考的是回溯的基本概念  <a href="http://www.cnblogs.com/steven_oyj/archive/2010/05/22/1741376.html" target="_blank" rel="noopener">回溯资料</a><br>简单的说这一次做的改变肯定要复原。</p><p>答案：<code>{t=x[k]; x[k]=x[i]; x[i]=t;}</code></p><h3 id="6-牌型种数"><a href="#6-牌型种数" class="headerlink" title="6. 牌型种数"></a>6. 牌型种数</h3><blockquote><p>小明被劫持到X赌城，被迫与其他3人玩牌。<br>一副扑克牌（去掉大小王牌，共52张），均匀发给4个人，每个人13张。<br>这时，小明脑子里突然冒出一个问题：<br>如果不考虑花色，只考虑点数，也不考虑自己得到的牌的先后顺序，自己手里能拿到的初始牌型组合一共有多少种呢？<br>请填写该整数，不要填写任何多余的内容或说明文字。</p></blockquote><p>dfs，当然首先要知道每个数字都有四张牌。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> cnt[<span class="number">15</span>],ans=<span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> dep,<span class="keyword">int</span> last)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (dep&gt;<span class="number">13</span>) &#123;</div><div class="line">        ans++;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=last;i&lt;=<span class="number">13</span>;i++) &#123;</div><div class="line">        <span class="keyword">if</span> (cnt[i]&lt;<span class="number">4</span>) &#123;</div><div class="line">            cnt[i]++;</div><div class="line">            dfs(dep+<span class="number">1</span>,i);</div><div class="line">            cnt[i]--;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    dfs(<span class="number">1</span>,<span class="number">1</span>);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>答案：<code>3598180</code></p><h3 id="7-手链样式"><a href="#7-手链样式" class="headerlink" title="7. 手链样式"></a>7. 手链样式</h3><blockquote><p>小明有3颗红珊瑚，4颗白珊瑚，5颗黄玛瑙。<br>他想用它们串成一圈作为手链，送给女朋友。<br>现在小明想知道：如果考虑手链可以随意转动或翻转，一共可以有多少不同的组合样式呢？ 请你提交该整数。不要填写任何多余的内容或说明性的文字。</p></blockquote><p>dfs写起来比较难受，这题就用<code>next_permutation</code>  <a href="http://blog.csdn.net/aipb2008/article/details/2227490" target="_blank" rel="noopener">next_permutation参考资料</a><br>本来想先用一个最朴素的方法试一试，结果很快就出来了。<br>所以只要把所有答案都记录下来，每次都正反判断一遍即可。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> res[<span class="number">10000</span>][<span class="number">12</span>],a[<span class="number">12</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">same</span><span class="params">(<span class="keyword">int</span> a[],<span class="keyword">int</span> b[])</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;<span class="number">12</span>;k++) &#123;</div><div class="line">        <span class="keyword">bool</span> f=<span class="literal">true</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">12</span>;i++) &#123;</div><div class="line">            <span class="keyword">if</span> (a[i]!=b[(i+k)%<span class="number">12</span>]) &#123;</div><div class="line">                f=<span class="literal">false</span>;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (f) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">        f=<span class="literal">true</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">12</span>;i++) &#123;</div><div class="line">            <span class="keyword">if</span> (a[<span class="number">11</span>-i]!=b[(i+k)%<span class="number">12</span>]) &#123;</div><div class="line">                f=<span class="literal">false</span>;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (f) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line">    a[<span class="number">0</span>]=a[<span class="number">1</span>]=a[<span class="number">2</span>]=<span class="number">1</span>;</div><div class="line">    a[<span class="number">3</span>]=a[<span class="number">4</span>]=a[<span class="number">5</span>]=a[<span class="number">6</span>]=<span class="number">2</span>;</div><div class="line">    a[<span class="number">7</span>]=a[<span class="number">8</span>]=a[<span class="number">9</span>]=a[<span class="number">10</span>]=a[<span class="number">11</span>]=<span class="number">3</span>;</div><div class="line">    <span class="keyword">do</span> &#123;</div><div class="line">        <span class="keyword">bool</span> ok=<span class="literal">true</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=ans;i++) &#123;</div><div class="line">            <span class="keyword">if</span> (same(res[i],a)) &#123;</div><div class="line">                ok=<span class="literal">false</span>;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (ok) &#123;</div><div class="line">            ans++;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">12</span>;i++) &#123;</div><div class="line">                res[ans][i]=a[i];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">while</span> (next_permutation(a,a+<span class="number">12</span>));</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h3 id="8-饮料换购"><a href="#8-饮料换购" class="headerlink" title="8. 饮料换购"></a>8. 饮料换购</h3><blockquote><p>乐羊羊饮料厂正在举办一次促销优惠活动。乐羊羊C型饮料，凭3个瓶盖可以再换一瓶C型饮料，并且可以一直循环下去(但不允许暂借或赊账)。</p><p>请你计算一下，如果小明不浪费瓶盖，尽量地参加活动，那么，对于他初始买入的n瓶饮料，最后他一共能喝到多少瓶饮料。</p><p>输入：一个整数n，表示开始购买的饮料数量（0 &lt; n &lt; 10000）<br>输出：一个整数，表示实际得到的饮料数</p><p>例如：<br>用户输入：<br>100<br>程序应该输出：<br>149</p><p>用户输入：<br>101<br>程序应该输出：<br>151</p><p>资源约定：<br>峰值内存消耗 &lt; 256M<br>CPU消耗  &lt; 1000ms</p><p>请严格按要求输出，不要画蛇添足地打印类似：“请您输入…” 的多余内容。<br>所有代码放在同一个源文件中，调试通过后，拷贝提交该源码。<br>注意: main函数需要返回0<br>注意: 只使用ANSI C/ANSI C++ 标准，不要调用依赖于编译环境或操作系统的特殊函数。<br>注意: 所有依赖的函数必须明确地在源文件中 #include <xxx>， 不能通过工程设置而省略常用头文件。<br>提交时，注意选择所期望的编译器类型。</xxx></p></blockquote><p>简单模拟<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> s,n;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">    s=n;</div><div class="line">    <span class="keyword">while</span> (n&gt;=<span class="number">3</span>) &#123;</div><div class="line">        s+=n/<span class="number">3</span>;</div><div class="line">        n=n/<span class="number">3</span>+n%<span class="number">3</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,s);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h3 id="9-垒骰子"><a href="#9-垒骰子" class="headerlink" title="9. 垒骰子"></a>9. 垒骰子</h3><p><a href="../2015lanqiao2">垒骰子题解</a></p><h3 id="10-灾后重建"><a href="#10-灾后重建" class="headerlink" title="10. 灾后重建"></a>10. 灾后重建</h3><blockquote><p>Pear市一共有N（&lt;=50000）个居民点，居民点之间有M（&lt;=200000）条双向道路相连。这些居民点两两之间都可以通过双向道路到达。这种情况一直持续到最近，一次严重的地震毁坏了全部M条道路。<br>震后，Pear打算修复其中一些道路，修理第i条道路需要Pi的时间。不过，Pear并不打算让全部的点连通，而是选择一些标号特殊的点让他们连通。<br>Pear有Q（&lt;=50000）次询问，每次询问，他会选择所有编号在[l,r]之间，并且 编号 mod K  = C 的点，修理一些路使得它们连通。由于所有道路的修理可以同时开工，所以完成修理的时间取决于花费时间最长的一条路，即涉及到的道路中Pi的最大值。</p><p>你能帮助Pear计算出每次询问时需要花费的最少时间么？这里询问是独立的，也就是上一个询问里的修理计划并没有付诸行动。</p><p>【输入格式】<br>第一行三个正整数N、M、Q，含义如题面所述。<br>接下来M行，每行三个正整数Xi、Yi、Pi，表示一条连接Xi和Yi的双向道路，修复需要Pi的时间。可能有自环，可能有重边。1&lt;=Pi&lt;=1000000。<br>接下来Q行，每行四个正整数Li、Ri、Ki、Ci，表示这次询问的点是[Li,Ri]区间中所有编号Mod Ki=Ci的点。保证参与询问的点至少有两个。</p><p>【输出格式】<br>输出Q行，每行一个正整数表示对应询问的答案。</p><p>【样例输入】<br>7 10 4<br>1 3 10<br>2 6 9<br>4 1 5<br>3 7 4<br>3 6 9<br>1 5 8<br>2 7 4<br>3 2 10<br>1 7 6<br>7 6 9<br>1 7 1 0<br>1 7 3 1<br>2 5 1 0<br>3 7 2 1</p><p>【样例输出】<br>9<br>6<br>8<br>8</p><p>【数据范围】<br>对于20%的数据，N,M,Q&lt;=30<br>对于40%的数据，N,M,Q&lt;=2000<br>对于100%的数据，N&lt;=50000,M&lt;=2*10^5,Q&lt;=50000. Pi&lt;=10^6.<br>Li,Ri,Ki均在[1,N]范围内，Ci在[0,对应询问的Ki)范围内。</p><p>资源约定：<br>峰值内存消耗 &lt; 256M<br>CPU消耗  &lt; 5000ms</p><p>请严格按要求输出，不要画蛇添足地打印类似：“请您输入…” 的多余内容。<br>所有代码放在同一个源文件中，调试通过后，拷贝提交该源码。<br>注意: main函数需要返回0<br>注意: 只使用ANSI C/ANSI C++ 标准，不要调用依赖于编译环境或操作系统的特殊函数。<br>注意: 所有依赖的函数必须明确地在源文件中 #include <xxx>， 不能通过工程设置而省略常用头文件。<br>提交时，注意选择所期望的编译器类型。</xxx></p></blockquote><p>不会。。。看了<a href="http://blog.csdn.net/werkeytom_ftd/article/details/50839250" target="_blank" rel="noopener">好像挺靠谱的题解</a>感觉要写好久，而且不一定能写对，所以就先不加这题的代码了。。。</p><p>以上各题的解法和答案，如有错误，请及时指出，谢谢！</p>]]></content>
      
      
        <tags>
            
            <tag> 蓝桥杯 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2015年蓝桥杯省赛C/C++ A组 垒骰子</title>
      <link href="/blog/2017/03/22/2015lanqiao2/"/>
      <content type="html"><![CDATA[<h3 id="9-垒骰子"><a href="#9-垒骰子" class="headerlink" title="9. 垒骰子"></a>9. 垒骰子</h3><blockquote><p>赌圣atm晚年迷恋上了垒骰子，就是把骰子一个垒在另一个上边，不能歪歪扭扭，要垒成方柱体。<br>经过长期观察，atm发现了稳定骰子的奥秘：有些数字的面贴着会互相排斥！<br>我们先来规范一下骰子：1 的对面是 4，2 的对面是 5，3 的对面是 6。<br>假设有 m 组互斥现象，每组中的那两个数字的面紧贴在一起，骰子就不能稳定的垒起来。<br>atm想计算一下有多少种不同的可能的垒骰子方式。<br>两种垒骰子方式相同，当且仅当这两种方式中对应高度的骰子的对应数字的朝向都相同。<br>由于方案数可能过多，请输出模 10^9 + 7 的结果。<br>不要小看了 atm 的骰子数量哦～</p><p>「输入格式」<br>第一行两个整数 n m<br>n表示骰子数目<br>接下来 m 行，每行两个整数 a b ，表示 a 和 b 数字不能紧贴在一起。</p><p>「输出格式」<br>一行一个数，表示答案模 10^9 + 7 的结果。</p><p>「样例输入」<br>2 1<br>1 2</p><p>「样例输出」<br>544</p><p>「数据范围」<br>对于 30% 的数据：n &lt;= 5<br>对于 60% 的数据：n &lt;= 100<br>对于 100% 的数据：0 &lt; n &lt;= 10^9, m &lt;= 36</p><p>资源约定：<br>峰值内存消耗 &lt; 256M<br>CPU消耗  &lt; 2000ms</p><p>请严格按要求输出，不要画蛇添足地打印类似：“请您输入…” 的多余内容。<br>所有代码放在同一个源文件中，调试通过后，拷贝提交该源码。<br>注意: main函数需要返回0<br>注意: 只使用ANSI C/ANSI C++ 标准，不要调用依赖于编译环境或操作系统的特殊函数。<br>注意: 所有依赖的函数必须明确地在源文件中 #include <xxx>， 不能通过工程设置而省略常用头文件。<br>提交时，注意选择所期望的编译器类型。</xxx></p></blockquote><p>这道题首先要会递推的做法。<br>很自然的，我们可以用$f[i][j]$表示垒了$i$个骰子，并且最上面的骰子$j$面朝上。<br>那么递推式就是$$f[i][j]=\sum_{k=1}^{6} f[i-1][k]\quad coop[op[j]][k]$$<br>其中$op[j]$表示$j$的背面，$coop[op[j]][k]$就表示$j$的背面是可以跟$k$放在一起的。<br>这样每次没有讨论侧面的朝向，所以最后乘以$4^n$。<br>如果想要实现的好的话还要使用滚动数组  <a href="http://www.cnblogs.com/acm-bingzi/p/3264883.html" target="_blank" rel="noopener">滚动数组资料</a></p><p>放一个搜到的代码吧。。。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="comment">// ...冲突记录: Compact[i][j]=false代表点数为i的面与点数为j的面存在冲突</span></div><div class="line"><span class="keyword">bool</span> Compact[<span class="number">7</span>][<span class="number">7</span>];</div><div class="line"></div><div class="line"><span class="comment">// ...Parner[i]=j代表 点数为i的面 的对立面点数为j</span></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> Parner[<span class="number">7</span>]=&#123; <span class="number">0</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span> &#125;;</div><div class="line"><span class="keyword">const</span> <span class="keyword">long</span> <span class="keyword">long</span> MOD = <span class="number">1000000007</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>** argv)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">long</span> <span class="keyword">long</span>  N; <span class="comment">// 骰子高度</span></div><div class="line">    <span class="keyword">int</span> M; <span class="comment">// 冲突组数</span></div><div class="line">    <span class="keyword">int</span> s1,s2;</div><div class="line">    <span class="built_in">cin</span> &gt;&gt; N &gt;&gt; M;</div><div class="line">    <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">7</span>; ++i)</div><div class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">7</span>;++j)</div><div class="line">            Compact[i][j]=<span class="literal">true</span>;</div><div class="line"></div><div class="line">    <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; M; ++i ) &#123;</div><div class="line">        <span class="built_in">cin</span> &gt;&gt; s1 &gt;&gt; s2;</div><div class="line">        <span class="comment">// ...点数为s1的面与点数为s2的面存在冲突</span></div><div class="line">        Compact[s1][s2] = Compact[s2][s1] = <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">long</span> <span class="keyword">long</span> dp[<span class="number">2</span>][<span class="number">7</span>]; <span class="comment">// 滚动数组</span></div><div class="line">    <span class="keyword">long</span> <span class="keyword">long</span> C = <span class="number">4</span>;</div><div class="line">    <span class="keyword">int</span> e = <span class="number">0</span>;          <span class="comment">// 滚动标志</span></div><div class="line">    <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">7</span>; ++i )</div><div class="line">        dp[e][i] = <span class="number">1</span>;</div><div class="line"></div><div class="line">    <span class="comment">// dp[i][j]代表高度为i的,顶面点数为j的叠骰子方案数</span></div><div class="line">    <span class="comment">// 在这里忽略每个骰子可以四面转向的情况, 把该情况留到最后乘上去就可以了</span></div><div class="line">    <span class="keyword">int</span> j,k;</div><div class="line">    <span class="keyword">for</span>( <span class="keyword">long</span> <span class="keyword">long</span> i = <span class="number">2</span>; i &lt;= N; ++i )&#123;</div><div class="line">        e = <span class="number">1</span>-e;    <span class="comment">// ...滚动处理</span></div><div class="line">        C = (C*<span class="number">4</span>)%MOD;</div><div class="line">        <span class="keyword">for</span>( j = <span class="number">1</span>; j &lt; <span class="number">7</span>; ++j )&#123;</div><div class="line">            dp[e][j] = <span class="number">0</span>;</div><div class="line">            <span class="keyword">for</span>( k = <span class="number">1</span>; k &lt; <span class="number">7</span>; ++k)</div><div class="line">                <span class="keyword">if</span>( Compact[ Parner[j] ][k] )</div><div class="line">                    dp[e][j] += dp[<span class="number">1</span>-e][k];</div><div class="line">            dp[e][j]%=MOD;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> sum=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">7</span>; ++i)</div><div class="line">        sum = (sum+dp[e][i])%MOD;</div><div class="line">    sum = (sum*C)%MOD;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; sum;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>核心代码的复杂度$T(n)=36n$，就算给了2s肯定也是不能全通过的，我们需要一个更快的方法。<br>分析可以发现其实每一步递推对应的关系都是一样的，就是最开始给出的那些关系。<br>所以我们可以用矩阵来进行递推，再使用快速幂即可  <a href="http://www.cnblogs.com/tmzbot/p/3930206.html" target="_blank" rel="noopener">矩阵递推资料</a></p><p>代码用了模板技术，大家凭感觉吧。。。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MO=<span class="number">1e9</span>+<span class="number">7</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> opps[]=&#123;<span class="number">0</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</div><div class="line"></div><div class="line"><span class="keyword">struct</span> Mat &#123;</div><div class="line">    <span class="keyword">int</span> r,c;</div><div class="line">    ll el[<span class="number">10</span>][<span class="number">10</span>];</div><div class="line">    Mat() &#123;&#125;</div><div class="line">    Mat(ll x) &#123;</div><div class="line">        r=c=<span class="number">6</span>;</div><div class="line">        <span class="built_in">memset</span>(el,<span class="number">0</span>,<span class="keyword">sizeof</span>(el));</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=r;i++) &#123;</div><div class="line">            el[i][i]=x;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    Mat(<span class="keyword">int</span> _r,<span class="keyword">int</span> _c,ll x) &#123;</div><div class="line">        r=_r;c=_c;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=r;i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=c;j++) &#123;</div><div class="line">                el[i][j]=x;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    Mat <span class="keyword">operator</span> *(<span class="keyword">const</span> Mat &amp;b) &#123;</div><div class="line">        <span class="function">Mat <span class="title">res</span><span class="params">(r,b.c,<span class="number">0</span>)</span></span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=r;i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=b.c;j++) &#123;</div><div class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=c;k++) &#123;</div><div class="line">                    res.el[i][j]+=el[i][k]*b.el[k][j];</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">    Mat <span class="keyword">operator</span> %(<span class="keyword">const</span> <span class="keyword">int</span> Mo) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=r;i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=c;j++) &#123;</div><div class="line">                el[i][j]=el[i][j]%Mo;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> (*<span class="keyword">this</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=r;i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=c;j++) &#123;</div><div class="line">                <span class="built_in">printf</span>(<span class="string">"%I64d "</span>,el[i][j]);</div><div class="line">            &#125;</div><div class="line">            <span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> DataType&gt;</div><div class="line"><span class="function">DataType <span class="title">fpow</span><span class="params">(DataType x,<span class="keyword">int</span> n)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="function">DataType <span class="title">res</span><span class="params">(<span class="number">1</span>)</span></span>;</div><div class="line">    <span class="keyword">while</span> (n) &#123;</div><div class="line">        <span class="keyword">if</span> (n&amp;<span class="number">1</span>) &#123;</div><div class="line">            res=x*res%MO;</div><div class="line">        &#125;</div><div class="line">        x=x*x%MO;</div><div class="line">        n&gt;&gt;=<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> n,m;</div><div class="line">    <span class="function">Mat <span class="title">coop</span><span class="params">(<span class="number">6</span>,<span class="number">6</span>,<span class="number">1</span>)</span></span>;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">        <span class="keyword">int</span> x,y;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</div><div class="line">        coop.el[x][opps[y]]=<span class="number">0</span>;</div><div class="line">        coop.el[y][opps[x]]=<span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    coop=fpow(coop,n<span class="number">-1</span>);</div><div class="line">    <span class="function">Mat <span class="title">cnt</span><span class="params">(<span class="number">6</span>,<span class="number">1</span>,<span class="number">1</span>)</span></span>;</div><div class="line">    cnt=coop*cnt%MO;</div><div class="line">    ll ans=<span class="number">0</span>,fo=<span class="number">4</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">6</span>;i++) &#123;</div><div class="line">        ans=(ans+cnt.el[i][<span class="number">1</span>])%MO;</div><div class="line">    &#125;</div><div class="line">    ans=ans*fpow(fo,n)%MO;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%I64d\n"</span>,ans);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>]]></content>
      
      
        <tags>
            
            <tag> 蓝桥杯 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>天梯赛练习集 L3-006 迎风一刀斩</title>
      <link href="/blog/2017/03/14/gpltL3-006/"/>
      <content type="html"><![CDATA[<h3 id="迎风一刀斩"><a href="#迎风一刀斩" class="headerlink" title="迎风一刀斩"></a><a href="https://www.patest.cn/contests/gplt/L3-006" target="_blank" rel="noopener">迎风一刀斩</a></h3><p>看到这题的时候一脸懵逼。。。后来才发现原来旋转角度只有90度、180度、或270度。。。不过还是查了一下题解。。。</p><p>其实只有四种情况，只要会画就差不多会写了。</p><p><img src="http://img.blog.csdn.net/20170314192751351" alt="这里写图片描述"></p><p>解释一下代码。。。<br><code>check()</code>可以通过引用返回横向的长(X)短(x)边，纵向的长(Y)短(y)边，以及平行坐标轴的边数(strt)。<br><code>penta()</code>本来是用来判断五边形和三角形的，后来发现前三个写起来都一样就都合在一起了。<br><code>quaqua()</code>用来判断两个四边形能不能拼成矩形，其中两个矩形是一种特殊情况 ，如果一个的边长是(A, B)，另一个是(X, Y)，只要A/B中的一个和X/Y中的一个相等就可以了。<br>其他一般的情况都是通过图中的相等关系判断的。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</div><div class="line">PII a[<span class="number">6</span>],b[<span class="number">6</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">input</span><span class="params">(PII a[],<span class="keyword">int</span> &amp;n)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</div><div class="line">        <span class="keyword">int</span> x,y;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</div><div class="line">        a[i]=PII(x,y);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">check</span><span class="params">(PII a[],<span class="keyword">int</span> n,<span class="keyword">int</span> &amp;X,<span class="keyword">int</span> &amp;x,<span class="keyword">int</span> &amp;Y,<span class="keyword">int</span> &amp;y,<span class="keyword">int</span> &amp;strt)</span></span></div><div class="line">&#123;</div><div class="line">    X=x=Y=y=strt=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</div><div class="line">        <span class="keyword">if</span> (a[i].first==a[(i+<span class="number">1</span>)%n].first) &#123;</div><div class="line">            strt++;</div><div class="line">            <span class="keyword">int</span> tmp=<span class="built_in">abs</span>(a[i].second-a[(i+<span class="number">1</span>)%n].second);</div><div class="line">            <span class="keyword">if</span> (tmp&gt;Y) y=Y,Y=tmp;</div><div class="line">            <span class="keyword">else</span> y=tmp;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[i].second==a[(i+<span class="number">1</span>)%n].second) &#123;</div><div class="line">            strt++;</div><div class="line">            <span class="keyword">int</span> tmp=<span class="built_in">abs</span>(a[i].first-a[(i+<span class="number">1</span>)%n].first);</div><div class="line">            <span class="keyword">if</span> (tmp&gt;X) x=X,X=tmp;</div><div class="line">            <span class="keyword">else</span> x=tmp;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">penta</span><span class="params">(<span class="keyword">int</span> n,<span class="keyword">int</span> m)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> x,X,y,Y,strt;</div><div class="line">    check(b,m,X,x,Y,y,strt);</div><div class="line">    <span class="keyword">if</span> (strt!=m<span class="number">-1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    <span class="keyword">int</span> A=Y-y,B=X-x;</div><div class="line">    check(a,n,X,x,Y,y,strt);</div><div class="line">    <span class="keyword">if</span> (strt!=n<span class="number">-1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    <span class="keyword">return</span> (X==A&amp;&amp;Y==B)||(X==B&amp;&amp;Y==A);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">quaqua</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> x,X,y,Y,strt;</div><div class="line">    check(b,<span class="number">4</span>,X,x,Y,y,strt);</div><div class="line">    <span class="keyword">if</span> (strt&lt;<span class="number">3</span>) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    <span class="keyword">if</span> (strt==<span class="number">4</span>) &#123;</div><div class="line">        <span class="keyword">int</span> A=X,B=Y;</div><div class="line">        check(a,<span class="number">4</span>,X,x,Y,y,strt);</div><div class="line">        <span class="keyword">if</span> (strt!=<span class="number">4</span>) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        <span class="keyword">return</span> A==X||A==Y||B==X||B==Y;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> height,A,B;</div><div class="line">    <span class="keyword">if</span> (y==<span class="number">0</span>) &#123;</div><div class="line">        height=Y;A=X;B=x;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        height=X;A=Y;B=y;</div><div class="line">    &#125;</div><div class="line">    check(a,<span class="number">4</span>,X,x,Y,y,strt);</div><div class="line">    <span class="keyword">if</span> (strt&lt;<span class="number">3</span>) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    <span class="keyword">if</span> (y==<span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">return</span> height==Y&amp;&amp;x+A==X+B;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> height==X&amp;&amp;y+A==Y+B;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T,n,m;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">while</span> (T--) &#123;</div><div class="line">        input(a,n);</div><div class="line">        input(b,m);</div><div class="line">        <span class="keyword">if</span> (n&gt;m) &#123;</div><div class="line">            swap(n,m);</div><div class="line">            swap(a,b);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">bool</span> f=<span class="literal">false</span>;</div><div class="line">        <span class="keyword">if</span> (n==<span class="number">4</span>&amp;&amp;m==<span class="number">4</span>) f=quaqua();</div><div class="line">        <span class="keyword">else</span> f=penta(n,m);</div><div class="line">        <span class="built_in">puts</span>(f?<span class="string">"YES"</span>:<span class="string">"NO"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>独立写的代码一发过，很开心。</p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2016年蓝桥杯省赛C/C++ A组 最大比例</title>
      <link href="/blog/2017/03/13/2016lanqiao2/"/>
      <content type="html"><![CDATA[<h3 id="10-最大比例"><a href="#10-最大比例" class="headerlink" title="10. 最大比例"></a>10. 最大比例</h3><blockquote><p>X星球的某个大奖赛设了M级奖励。每个级别的奖金是一个正整数。<br>并且，相邻的两个级别间的比例是个固定值。<br>也就是说：所有级别的奖金数构成了一个等比数列。比如：<br>16,24,36,54<br>其等比值为：3/2<br>现在，我们随机调查了一些获奖者的奖金数。<br>请你据此推算可能的最大的等比值。</p><p>输入格式：<br>第一行为数字N(n&lt;100)，表示接下的一行包含N个正整数<br>第二行N个正整数Xi(Xi&lt;1 000 000 000 000)，用空格分开。每个整数表示调查到的某人的奖金数额<br>要求输出：<br>一个形如A/B的分数，要求A、B互质。表示可能的最大比例系数<br>测试数据保证了输入格式正确，并且最大比例是存在的。 </p><p>例如，输入：<br>3<br>1250 200 32<br>程序应该输出：<br>25/4<br>再例如，输入：<br>4<br>3125 32 32 200<br>程序应该输出：<br>5/2<br>再例如，输入：<br>3<br>549755813888 524288 2<br>程序应该输出：<br>4/1</p><p>资源约定：<br>峰值内存消耗 &lt; 256M<br>CPU消耗  &lt; 3000ms </p><p>请严格按要求输出，不要画蛇添足地打印类似：“请您输入…” 的多余内容。   所有代码放在同一个源文件中，调试通过后，拷贝提交该源码。<br>注意: main函数需要返回0  注意: 只使用ANSI C/ANSI C++ 标准，不要调用依赖于编译环境或操作系统的特殊函数。 注意:<br>所有依赖的函数必须明确地在源文件中 #include <xxx>， 不能通过工程设置而省略常用头文件。<br>提交时，注意选择所期望的编译器类型。</xxx></p></blockquote><p>这题比较复杂，我们需要分析一下。<br>首先比值都是相邻级别的，所以我们可以将这n个数排序再去重，<br>（如果只剩一个数的话，那答案应该是无穷大，这里就不考虑了）<br>然后把相邻的比值都算出来，为了方便讨论，再进行排序去重。<br>得到一个序列，$f_0=q^{k_0}, f_1=q^{k_1}, \dots, f_{n-1}=q^{k_{n-1}}$，$k_i$ 严格递增。</p><p>如果我们真的知道$q$和这些整数$k$，那么答案就是$q^g$，其中$g$是所有$k$的最大公约数。<br>为什么呢？<br>因为我们要找的是一个$x$，使得 $\log_{q^x}f_i$ 均为整数，即$\frac{k_i}{x}\log_qq=\frac{k_i}{x}$均为整数，<br>显然$x$是所有$k$的约数，且$x$最大，所以所求的$x$就是$g$。</p><p>当然问题在于我们根本不知道$q$和这些$k$，但是我们很惊喜的看到了最大公约数。<br>这里我们可以借鉴辗转相减法的操作 <a href="http://baike.baidu.com/item/%E8%BE%97%E8%BD%AC%E7%9B%B8%E5%87%8F" target="_blank" rel="noopener">辗转相减法资料</a><br>不妨取两个数，定义$Q(a,b)$是由$a,b$唯一确定的最大比例，<br>且$Q$定义在无序对上，即$Q(b,a)=Q(a,b)$。<br>那么$Q(a,b)=Q(q^x,q^y)=q^{gcd(x,y)}=Q(q^x,q^{y-x})=Q(a,\frac{b}{a})\quad a&lt;b$<br>所以我们只需要重复这个“辗转相减法”就可以得到最后的答案。</p><p>具体实现的时候可以每次只操作相邻的两个比值。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">110</span>;</div><div class="line"><span class="keyword">const</span> ll MAX=<span class="number">1000000000000</span>;</div><div class="line">ll a[N];</div><div class="line"></div><div class="line"><span class="function">ll <span class="title">gcd</span><span class="params">(ll a,ll b)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (!b) <span class="keyword">return</span> a;</div><div class="line">    <span class="keyword">return</span> gcd(b,a%b);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">struct</span> Frac</div><div class="line">&#123;</div><div class="line">    ll up,dw;</div><div class="line">    Frac() &#123;&#125;</div><div class="line">    Frac(ll a,ll b) &#123;</div><div class="line">        <span class="keyword">if</span> (a==<span class="number">0</span>) &#123;</div><div class="line">            up=<span class="number">0</span>;dw=<span class="number">1</span>;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        ll g=gcd(a,b);</div><div class="line">        up=a/g;dw=b/g;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt;(<span class="keyword">const</span> Frac &amp;b) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">return</span> up*b.dw&lt;dw*b.up;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> ==(<span class="keyword">const</span> Frac &amp;b) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">return</span> !((*<span class="keyword">this</span>)&lt;b)&amp;&amp;!(b&lt;(*<span class="keyword">this</span>));</div><div class="line">    &#125;</div><div class="line">    Frac <span class="keyword">operator</span> /(<span class="keyword">const</span> Frac &amp;b) &#123;</div><div class="line">        <span class="keyword">return</span> Frac(up*b.dw,dw*b.up);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%I64d/%I64d\n"</span>,up,dw);</div><div class="line">    &#125;</div><div class="line">&#125; f[N];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> n;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%I64d"</span>,&amp;a[i]);</div><div class="line">    &#125;</div><div class="line">    sort(a,a+n);</div><div class="line">    n=unique(a,a+n)-a<span class="number">-1</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</div><div class="line">        f[i]=Frac(a[i+<span class="number">1</span>],a[i]);</div><div class="line">    &#125;</div><div class="line">    <span class="function">Frac <span class="title">ans</span><span class="params">(MAX,<span class="number">1</span>)</span></span>;</div><div class="line">    <span class="keyword">while</span> (n&gt;<span class="number">1</span>) &#123;</div><div class="line">        sort(f,f+n);</div><div class="line">        <span class="keyword">if</span> (f[<span class="number">0</span>]&lt;ans) ans=f[<span class="number">0</span>];</div><div class="line">        n=unique(f,f+n)-f<span class="number">-1</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</div><div class="line">            f[i]=f[i+<span class="number">1</span>]/f[i];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (f[<span class="number">0</span>]&lt;ans) ans=f[<span class="number">0</span>];</div><div class="line">    ans.print();</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>]]></content>
      
      
        <tags>
            
            <tag> 蓝桥杯 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2016年蓝桥杯省赛C/C++ A组题解（含题目）</title>
      <link href="/blog/2017/03/13/2016lanqiao1/"/>
      <content type="html"><![CDATA[<h3 id="1-网友年龄"><a href="#1-网友年龄" class="headerlink" title="1.  网友年龄"></a>1.  网友年龄</h3><blockquote><p>某君新认识一网友。 当问及年龄时，他的网友说： “我的年龄是个2位数，我比儿子大27岁,  如果把我的年龄的两位数字交换位置，刚好就是我儿子的年龄”<br>请你计算：网友的年龄一共有多少种可能情况？<br>提示：30岁就是其中一种可能哦.   请填写表示可能情况的种数。<br>注意：你提交的应该是一个整数，不要填写任何多余的内容或说明性文字。</p></blockquote><p>小学奥数或者枚举一下：<code>7</code></p><h3 id="2-生日蜡烛"><a href="#2-生日蜡烛" class="headerlink" title="2.  生日蜡烛"></a>2.  生日蜡烛</h3><blockquote><p>某君从某年开始每年都举办一次生日party，并且每次都要吹熄与年龄相同根数的蜡烛。 现在算起来，他一共吹熄了236根蜡烛。<br>请问，他从多少岁开始过生日party的？<br>请填写他开始过生日party的年龄数。<br>注意：你提交的应该是一个整数，不要填写任何多余的内容或说明性文字。</p></blockquote><p>等差数列，枚举首项：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">100</span>;i++) &#123;</div><div class="line">        <span class="keyword">int</span> sum=<span class="number">0</span>,j=i;</div><div class="line">        <span class="keyword">while</span> (sum&lt;<span class="number">236</span>) &#123;</div><div class="line">            sum+=j++;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (sum==<span class="number">236</span>) &#123;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>,i,j);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>我觉得枚举首项从1到100是比较合理的。。。<del>有人说答案是236我觉得他可能没救了…</del><br>正确答案：<code>26</code></p><h3 id="3-方格填数"><a href="#3-方格填数" class="headerlink" title="3.  方格填数"></a>3.  方格填数</h3><blockquote><p>如下的10个格子<br><img src="http://img.blog.csdn.net/20160320183620161" alt="方格"><br>填入0~9的数字。要求：连续的两个数字不能相邻。 （左右、上下、对角都算相邻）<br>一共有多少种可能的填数方案？<br>请填写表示方案数目的整数。<br>注意：你提交的应该是一个整数，不要填写任何多余的内容或说明性文字。</p></blockquote><p>dfs，不过不优化的话有$10!$种，边填边判断即可。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="comment">/*本来要判断八个格子，</span></div><div class="line"> *但是由于是从左往右从上往下填的，</div><div class="line"> *只要判断左、左上、上、右上</div><div class="line">*/</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> dx[]=&#123;<span class="number">0</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>&#125;;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> dy[]=&#123;<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">1</span>&#125;;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">1e9</span>;</div><div class="line"><span class="keyword">bool</span> used[<span class="number">10</span>];</div><div class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line"><span class="keyword">int</span> a[<span class="number">5</span>][<span class="number">5</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">alright</span><span class="params">(<span class="keyword">int</span> n,<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++) &#123;</div><div class="line">        <span class="keyword">int</span> xx=x+dx[i],yy=y+dy[i];</div><div class="line">        <span class="keyword">if</span> (xx&lt;<span class="number">1</span>||yy&lt;<span class="number">1</span>||xx&gt;<span class="number">3</span>||yy&gt;<span class="number">4</span>) <span class="keyword">continue</span>;</div><div class="line">        <span class="keyword">if</span> (<span class="built_in">abs</span>(n-a[xx][yy])==<span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (x==<span class="number">3</span>&amp;&amp;y==<span class="number">4</span>) &#123;</div><div class="line">        ans++;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">9</span>;i++) &#123;</div><div class="line">        <span class="keyword">if</span> (!used[i]&amp;&amp;alright(i,x,y)) &#123;</div><div class="line">            a[x][y]=i;</div><div class="line">            used[i]=<span class="literal">true</span>;</div><div class="line">            <span class="keyword">if</span> (y==<span class="number">4</span>) dfs(x+<span class="number">1</span>,<span class="number">1</span>);</div><div class="line">            <span class="keyword">else</span> dfs(x,y+<span class="number">1</span>);</div><div class="line">            used[i]=<span class="literal">false</span>;</div><div class="line">            a[x][y]=-INF;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">3</span>;i++) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">4</span>;j++) &#123;</div><div class="line">            a[i][j]=-INF;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    dfs(<span class="number">1</span>,<span class="number">2</span>);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>正确答案：<code>1580</code></p><h3 id="4-快速排序"><a href="#4-快速排序" class="headerlink" title="4.  快速排序"></a>4.  快速排序</h3><blockquote><p>排序在各种场合经常被用到。 快速排序是十分常用的高效率的算法。<br>其思想是：先选一个“标尺”， 用它把整个队列过一遍筛子，<br>以保证：其左边的元素都不大于它，其右边的元素都不小于它。<br>这样，排序问题就被分割为两个子区间。 再分别对子区间排序就可以了。<br>下面的代码是一种实现，请分析并填写划线部分缺少的代码。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> t = a[i];</div><div class="line">    a[i] = a[j];</div><div class="line">    a[j] = t;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> p, <span class="keyword">int</span> r)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> i = p;</div><div class="line">    <span class="keyword">int</span> j = r + <span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span> x = a[p];</div><div class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</div><div class="line">        <span class="keyword">while</span>(i&lt;r &amp;&amp; a[++i]&lt;x);</div><div class="line">        <span class="keyword">while</span>(a[--j]&gt;x);</div><div class="line">        <span class="keyword">if</span>(i&gt;=j) <span class="keyword">break</span>;</div><div class="line">        swap(a,i,j);</div><div class="line">    &#125;</div><div class="line">    ______________________;</div><div class="line">    <span class="keyword">return</span> j;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">quicksort</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> p, <span class="keyword">int</span> r)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span>(p&lt;r)&#123;</div><div class="line">        <span class="keyword">int</span> q = partition(a,p,r);</div><div class="line">        quicksort(a,p,q<span class="number">-1</span>);</div><div class="line">        quicksort(a,q+<span class="number">1</span>,r);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">    </div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> i;</div><div class="line">    <span class="keyword">int</span> a[] = &#123;<span class="number">5</span>,<span class="number">13</span>,<span class="number">6</span>,<span class="number">24</span>,<span class="number">2</span>,<span class="number">8</span>,<span class="number">19</span>,<span class="number">27</span>,<span class="number">6</span>,<span class="number">12</span>,<span class="number">1</span>,<span class="number">17</span>&#125;;</div><div class="line">    <span class="keyword">int</span> N = <span class="number">12</span>;</div><div class="line">    </div><div class="line">    quicksort(a, <span class="number">0</span>, N<span class="number">-1</span>);</div><div class="line">    </div><div class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;N; i++) <span class="built_in">printf</span>(<span class="string">"%d "</span>, a[i]);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>注意：只填写缺少的内容，不要书写任何题面已有代码或说明性文字。</p></blockquote><p>答案：<code>swap(a,p,j)</code> <a href="http://www.cnblogs.com/cylee025/archive/2011/05/11/2043714.html" target="_blank" rel="noopener">快速排序资料</a></p><h3 id="5-消除尾一"><a href="#5-消除尾一" class="headerlink" title="5.  消除尾一"></a>5.  消除尾一</h3><blockquote><p>下面的代码把一个整数的二进制表示的最右边的连续的1全部变成0<br>如果最后一位是0，则原数字保持不变。<br>如果采用代码中的测试数据，应该输出：<br><figure class="highlight basic"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">00000000000000000000000001100111 </span>  <span class="number">00000000000000000000000001100000</span></div><div class="line"><span class="symbol">00000000000000000000000000001100 </span>  <span class="number">00000000000000000000000000001100</span></div></pre></td></tr></table></figure></p><p>请仔细阅读程序，填写划线部分缺少的代码。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> x)</span> </span></div><div class="line">&#123;  </div><div class="line">    <span class="keyword">int</span> i; </div><div class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;<span class="number">32</span>; i++) <span class="built_in">printf</span>(<span class="string">"%d"</span>, (x&gt;&gt;(<span class="number">31</span>-i))&amp;<span class="number">1</span>);  </div><div class="line">    <span class="built_in">printf</span>(<span class="string">"   "</span>);</div><div class="line">    </div><div class="line">    x = _______________________;   </div><div class="line">    </div><div class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;<span class="number">32</span>; i++) <span class="built_in">printf</span>(<span class="string">"%d"</span>, (x&gt;&gt;(<span class="number">31</span>-i))&amp;<span class="number">1</span>);  </div><div class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);  </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></div><div class="line">&#123; </div><div class="line">    f(<span class="number">103</span>);  </div><div class="line">    f(<span class="number">12</span>);  </div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>; </div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>注意：只填写缺少的内容，不要书写任何题面已有代码或说明性文字。</p></blockquote><p>要做这道题首先要知道位运算，<a href="http://www.cnblogs.com/911/archive/2008/05/20/1203477.html" target="_blank" rel="noopener">位运算资料</a><br>最好还要知道负数怎么参与位运算，<a href="http://blog.csdn.net/hnlyyk/article/details/47804885" target="_blank" rel="noopener">补码资料</a><br>如果想要了解我的做法还要学习lowbit，<a href="http://www.cnblogs.com/chenzhiyin/p/5292798.html" target="_blank" rel="noopener">lowbit资料</a></p><p>这题当时我想了很久，因为它必须在一行内就算出来，所以我想到了lowbit，它可以很方便的得到。<br>然而怎么让它套用上lowbit也不是一件容易的事。。。不过最后还是做出来了~</p><p>要消除x末尾所有的1，可以先把x加上1：<br><figure class="highlight basic"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">00000000000000000000000001100111 </span>+ <span class="number">1</span> =</div><div class="line"><span class="number">00000000000000000000000001101000</span></div></pre></td></tr></table></figure></p><p>再减去新的数的lowbit：<br><figure class="highlight basic"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">00000000000000000000000001101000 </span>- <span class="number">00000000000000000000000000001000</span> =</div><div class="line"><span class="number">00000000000000000000000001100000</span></div></pre></td></tr></table></figure></p><p>所以我的答案是：<code>x+1-((x+1)&amp;(-x-1))</code><br>当然标准答案更加简单：<code>x&amp;(x+1)</code></p><h3 id="6-寒假作业"><a href="#6-寒假作业" class="headerlink" title="6.  寒假作业"></a>6.  寒假作业</h3><blockquote><p>现在小学的数学题目也不是那么好玩的。<br>看看这个寒假作业：<br>□ + □ = □<br>□ - □ = □<br>□ × □ = □<br>□ ÷ □ = □<br>每个方块代表1~13中的某一个数字，但不能重复。<br>比如：<br>6  + 7 = 13<br>9  - 8 = 1<br>3  * 4 = 12<br>10 / 2 = 5<br>以及：<br>7  + 6 = 13<br>9  - 8 = 1<br>3  * 4 = 12<br>10 / 2 = 5<br>就算两种解法。（加法，乘法交换律后算不同的方案）<br>你一共找到了多少种方案？<br>请填写表示方案数目的整数。<br>注意：你提交的应该是一个整数，不要填写任何多余的内容或说明性文字。 </p></blockquote><p>dfs一个一个填，每个等式判断一下。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">bool</span> used[<span class="number">15</span>];</div><div class="line"><span class="keyword">int</span> a[<span class="number">15</span>];</div><div class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> dep)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (dep==<span class="number">13</span>) &#123;</div><div class="line">        <span class="comment">//必须整除，变成乘法判断</span></div><div class="line">        <span class="keyword">if</span> (a[<span class="number">10</span>]==a[<span class="number">11</span>]*a[<span class="number">12</span>]) ans++;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (dep==<span class="number">10</span>) &#123;</div><div class="line">        <span class="keyword">if</span> (a[<span class="number">7</span>]*a[<span class="number">8</span>]!=a[<span class="number">9</span>]) <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (dep==<span class="number">7</span>) &#123;</div><div class="line">        <span class="keyword">if</span> (a[<span class="number">4</span>]-a[<span class="number">5</span>]!=a[<span class="number">6</span>]) <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (dep==<span class="number">4</span>) &#123;</div><div class="line">        <span class="keyword">if</span> (a[<span class="number">1</span>]+a[<span class="number">2</span>]!=a[<span class="number">3</span>]) <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">13</span>;i++) &#123;</div><div class="line">        <span class="keyword">if</span> (!used[i]) &#123;</div><div class="line">            used[i]=<span class="literal">true</span>;</div><div class="line">            a[dep]=i;</div><div class="line">            dfs(dep+<span class="number">1</span>);</div><div class="line">            a[dep]=<span class="number">-1</span>;</div><div class="line">            used[i]=<span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    dfs(<span class="number">1</span>);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>答案：<code>64</code> 详见PPT。</p><h3 id="7-剪邮票"><a href="#7-剪邮票" class="headerlink" title="7.  剪邮票"></a>7.  剪邮票</h3><blockquote><p>如【图1.jpg】, 有12张连在一起的12生肖的邮票。<br>现在你要从中剪下5张来，要求必须是连着的。 （仅仅连接一个角不算相连）<br>比如，【图2.jpg】，【图3.jpg】中，粉红色所示部分就是合格的剪取。</p><p><img src="http://images2015.cnblogs.com/blog/786516/201603/786516-20160325211748964-811180521.jpg" alt="图1"><br><img src="http://images2015.cnblogs.com/blog/786516/201603/786516-20160325211908714-1883305515.jpg" alt="图2"><br><img src="http://images2015.cnblogs.com/blog/786516/201603/786516-20160325211918464-1520496628.jpg" alt="图3"> </p></blockquote><p>原谅我好像又讲错了。。。<del>看来去年挂的就是这题。。。</del><br>这题不能直接按方向dfs。。。因为按方向的dfs实际上只是一笔画。。。<br>不过我们可以用dfs选出5个格子然后算一个连通块的大小看是不是等于5。<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#include &lt;bits/stdc++.h&gt;</span></div><div class="line">using namespace std;</div><div class="line"></div><div class="line"><span class="keyword">int</span> va[<span class="number">6</span>][<span class="number">6</span>],cor[<span class="number">13</span>][<span class="number">2</span>],<span class="string">q[6]</span>;</div><div class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> getsum(<span class="keyword">int</span> <span class="keyword">x</span>,<span class="keyword">int</span> <span class="keyword">y</span>)</div><div class="line">&#123;</div><div class="line">    <span class="regexp">//</span>值为<span class="number">0</span>的不用计算</div><div class="line">    <span class="keyword">if</span> (va[<span class="keyword">x</span>][<span class="keyword">y</span>]==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    <span class="regexp">//</span>算过一次就要清零，避免重复</div><div class="line">    va[<span class="keyword">x</span>][<span class="keyword">y</span>]=<span class="number">0</span>;</div><div class="line">    <span class="regexp">//</span>超出范围也没事，因为va数组的周围都是<span class="number">0</span></div><div class="line">    <span class="keyword">return</span> <span class="number">1</span>+getsum(<span class="keyword">x</span>-<span class="number">1</span>,<span class="keyword">y</span>)+getsum(<span class="keyword">x</span>+<span class="number">1</span>,<span class="keyword">y</span>)+getsum(<span class="keyword">x</span>,<span class="keyword">y</span>-<span class="number">1</span>)+getsum(<span class="keyword">x</span>,<span class="keyword">y</span>+<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">void dfs(<span class="keyword">int</span> dep,<span class="keyword">int</span> <span class="keyword">last</span>) &#123;</div><div class="line">    <span class="keyword">if</span> (dep==<span class="number">5</span>) &#123;</div><div class="line">        memset(va,<span class="number">0</span>,sizeof(va));</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++) &#123;</div><div class="line">            va[cor[<span class="string">q[i]</span>][<span class="number">0</span>]][cor[<span class="string">q[i]</span>][<span class="number">1</span>]]=<span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (getsum(cor[<span class="keyword">last</span>][<span class="number">0</span>],cor[<span class="keyword">last</span>][<span class="number">1</span>])==<span class="number">5</span>) ans++;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="keyword">last</span>+<span class="number">1</span>;i&lt;=<span class="number">12</span>;i++) &#123;</div><div class="line">        <span class="regexp">//q</span>数组保存我们选中的格子</div><div class="line">        <span class="string">q[dep]</span>=i;</div><div class="line">        dfs(dep+<span class="number">1</span>,i);</div><div class="line">        <span class="string">q[dep]</span>=-<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">int</span> main()</div><div class="line">&#123;</div><div class="line">    <span class="regexp">//</span>算出第n个格子的横纵坐标</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>,n=<span class="number">1</span>;i&lt;=<span class="number">3</span>;i++) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">4</span>;j++,n++) &#123;</div><div class="line">            cor[n][<span class="number">0</span>]=i;cor[n][<span class="number">1</span>]=j;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    dfs(<span class="number">0</span>,<span class="number">0</span>);</div><div class="line">    <span class="keyword">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>正确答案：<code>116</code></p><h3 id="8-四平方和"><a href="#8-四平方和" class="headerlink" title="8.   四平方和"></a>8.   四平方和</h3><blockquote><p>四平方和定理，又称为拉格朗日定理：<br>每个正整数都可以表示为至多4个正整数的平方和。<br>如果把0包括进去，就正好可以表示为4个数的平方和。</p><p>比如：<br>5 = 0^2 + 0^2 + 1^2 + 2^2<br>7 = 1^2 + 1^2 + 1^2 + 2^2<br>（^符号表示乘方的意思） </p><p>对于一个给定的正整数，可能存在多种平方和的表示法。<br>要求你对4个数排序： 0 &lt;= a &lt;= b &lt;= c &lt;= d<br>并对所有的可能表示法按 a,b,c,d 为联合主键升序排列，最后输出第一个表示法 </p><p>程序输入为一个正整数N (N&lt;5000000)<br>要求输出4个非负整数，按从小到大排序，中间用空格分开   </p><p>例如，输入：<br>5<br>则程序应该输出：<br>0 0 1 2<br>再例如，输入：<br>12<br>则程序应该输出：<br>0 2 2 2<br>再例如，输入：<br>773535<br>则程序应该输出：<br>1 1 267 838</p><p>资源约定：<br>峰值内存消耗 &lt; 256M<br>CPU消耗  &lt; 3000ms </p><p>请严格按要求输出，不要画蛇添足地打印类似：“请您输入…” 的多余内容。<br>所有代码放在同一个源文件中，调试通过后，拷贝提交该源码。<br>注意: main函数需要返回0<br>注意: 只使用ANSI C/ANSI C++ 标准，不要调用依赖于编译环境或操作系统的特殊函数。<br>注意: 所有依赖的函数必须明确地在源文件中 #include <xxx>， 不能通过工程设置而省略常用头文件。<br>提交时，注意选择所期望的编译器类型。 </xxx></p></blockquote><p>时间3s，直接枚举。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">resolve</span><span class="params">(<span class="keyword">int</span> n)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> n1=n;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=<span class="built_in">sqrt</span>(n1);i++) &#123;</div><div class="line">        <span class="keyword">int</span> n2=n1-i*i;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=<span class="built_in">sqrt</span>(n2);j++) &#123;</div><div class="line">            <span class="keyword">int</span> n3=n2-j*j;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;=<span class="built_in">sqrt</span>(n3);k++) &#123;</div><div class="line">                <span class="keyword">int</span> n4=n3-k*k;</div><div class="line">                <span class="keyword">int</span> l=<span class="built_in">sqrt</span>(n4);</div><div class="line">                <span class="keyword">if</span> (l*l==n4) &#123;</div><div class="line">                    <span class="built_in">printf</span>(<span class="string">"%d %d %d %d\n"</span>,i,j,k,l);</div><div class="line">                    <span class="keyword">return</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> n;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">    resolve(n);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h3 id="9-密码脱落"><a href="#9-密码脱落" class="headerlink" title="9.  密码脱落"></a>9.  密码脱落</h3><blockquote><p>X星球的考古学家发现了一批古代留下来的密码。<br>这些密码是由A、B、C、D 四种植物的种子串成的序列。<br>仔细分析发现，这些密码串当初应该是前后对称的（也就是我们说的镜像串）。<br>由于年代久远，其中许多种子脱落了，因而可能会失去镜像的特征。 </p><p>你的任务是：  给定一个现在看到的密码串，计算一下从当初的状态，它要至少脱落多少个种子，才可能会变成现在的样子。 </p><p>输入一行，表示现在看到的密码串（长度不大于1000）<br>要求输出一个正整数，表示至少脱落了多少个种子。 </p><p>例如，输入：<br>ABCBA<br>则程序应该输出：<br>0<br>再例如，输入：<br>ABECDCBABC<br>则程序应该输出：<br>3</p><p>资源约定：<br>峰值内存消耗 &lt; 256M<br>CPU消耗  &lt; 1000ms </p><p>请严格按要求输出，不要画蛇添足地打印类似：“请您输入…” 的多余内容。<br>所有代码放在同一个源文件中，调试通过后，拷贝提交该源码。<br>注意: main函数需要返回0<br>注意: 只使用ANSI C/ANSI C++ 标准，不要调用依赖于编译环境或操作系统的特殊函数。 注意: 所有依赖的函数必须明确地在源文件中 #include <xxx>， 不能通过工程设置而省略常用头文件。<br>提交时，注意选择所期望的编译器类型。 </xxx></p></blockquote><p>经典水题，不过可能要先了解一下动态规划 <a href="http://www.cnblogs.com/kkgreen/archive/2011/06/26/2090702.html" target="_blank" rel="noopener">动态规划资料</a><br>教材原题 <a href="http://www.wenkuxiazai.com/doc/e73fa90979563c1ec5da7182.html" target="_blank" rel="noopener">最小回文代价资料</a> 看前两页就可以了，教材的具体实现都是复杂化的。<br>原串和逆序串做LCS <a href="http://www.cnblogs.com/ranjiewen/p/5559490.html" target="_blank" rel="noopener">LCS资料</a><br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">char</span> s[<span class="number">1010</span>];</div><div class="line"><span class="keyword">int</span> dp[<span class="number">1010</span>][<span class="number">1010</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%s"</span>,s+<span class="number">1</span>);</div><div class="line">    <span class="keyword">int</span> n=<span class="built_in">strlen</span>(s+<span class="number">1</span>);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++) &#123;</div><div class="line">            <span class="keyword">if</span> (s[i]==s[n+<span class="number">1</span>-j]) &#123;</div><div class="line">                dp[i][j]=dp[i<span class="number">-1</span>][j<span class="number">-1</span>]+<span class="number">1</span>;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                dp[i][j]=max(dp[i<span class="number">-1</span>][j],dp[i][j<span class="number">-1</span>]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,n-dp[n][n]);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h3 id="10-最大比例"><a href="#10-最大比例" class="headerlink" title="10.  最大比例"></a>10.  最大比例</h3><p><a href="../2016lanqiao2">最大比例题解</a></p><p>以上各题的解法和答案，如有错误，请及时指出，谢谢！</p>]]></content>
      
      
        <tags>
            
            <tag> 蓝桥杯 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hdu 5730 Shell Necklace cdq分治+FFT</title>
      <link href="/blog/2017/03/02/hdu5730/"/>
      <content type="html"><![CDATA[<h3 id="Shell-Necklace"><a href="#Shell-Necklace" class="headerlink" title="Shell Necklace"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5730" target="_blank" rel="noopener">Shell Necklace</a></h3><p>有一个很显然的递推式：$dp[i]=\sum_{j=0}^{i-1} dp[j]a_{i-j}$，当然朴素的算法是$O(n^2)$，肯定过不了。观察这个式子，发现符合fft的形式（<a href="http://blog.csdn.net/Leo_h1104/article/details/51615710" target="_blank" rel="noopener">了解FFT</a>），所以使用cdq分治+FFT（套路），复杂度为$O(nlog^{2}n)$。</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div></pre></td><td class="code"><pre><div class="line">#include &lt;bits/stdc++.h&gt;</div><div class="line">using namespace std;</div><div class="line">const double <span class="built_in">PI</span>=<span class="built_in">acos</span>(-<span class="number">1.0</span>);</div><div class="line">const <span class="built_in">int</span> MO=<span class="number">313</span>;</div><div class="line">const <span class="built_in">int</span> <span class="built_in">N</span>=<span class="number">100010</span>;</div><div class="line">struct <span class="built_in">Complex</span> &#123;</div><div class="line">    double x,y;</div><div class="line">    <span class="built_in">Complex</span>(double _x = <span class="number">0.0</span>,double _y = <span class="number">0.0</span>)</div><div class="line">    &#123;</div><div class="line">        x = _x;</div><div class="line">        y = _y;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">Complex</span> operator -(const <span class="built_in">Complex</span> &amp;b)const</div><div class="line">    &#123;</div><div class="line">        return <span class="built_in">Complex</span>(x-b.x,y-b.y);</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">Complex</span> operator +(const <span class="built_in">Complex</span> &amp;b)const</div><div class="line">    &#123;</div><div class="line">        return <span class="built_in">Complex</span>(x+b.x,y+b.y);</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">Complex</span> operator *(const <span class="built_in">Complex</span> &amp;b)const</div><div class="line">    &#123;</div><div class="line">        return <span class="built_in">Complex</span>(x*b.x-y*b.y,x*b.y+y*b.x);</div><div class="line">    &#125;</div><div class="line">&#125; x[<span class="number">280000</span>],y[<span class="number">280000</span>];</div><div class="line"><span class="built_in">int</span> a[<span class="built_in">N</span>],dp[<span class="built_in">N</span>];</div><div class="line"></div><div class="line">void change(<span class="built_in">Complex</span> y[],<span class="built_in">int</span> <span class="built_in">len</span>)</div><div class="line">&#123;</div><div class="line">    <span class="built_in">int</span> i,j,k;</div><div class="line">    for(i = <span class="number">1</span>, j = <span class="built_in">len</span>/<span class="number">2</span>; i &lt;<span class="built_in">len</span>-<span class="number">1</span>; i++) &#123;</div><div class="line">        <span class="built_in">if</span>(i &lt; j)swap(y[i],y[j]);</div><div class="line">        k = <span class="built_in">len</span>/<span class="number">2</span>;</div><div class="line">        while(j &gt;= k) &#123;</div><div class="line">            j -= k;</div><div class="line">            k /= <span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">if</span>(j &lt; k)j += k;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">void fft(<span class="built_in">Complex</span> y[],<span class="built_in">int</span> <span class="built_in">len</span>,<span class="built_in">int</span> on)</div><div class="line">&#123;</div><div class="line">    change(y,<span class="built_in">len</span>);</div><div class="line">    for(<span class="built_in">int</span> h = <span class="number">2</span>; h &lt;= <span class="built_in">len</span>; h &lt;&lt;= <span class="number">1</span>) &#123;</div><div class="line">        <span class="built_in">Complex</span> wn(<span class="built_in">cos</span>(-on*<span class="number">2</span>*<span class="built_in">PI</span>/h),<span class="built_in">sin</span>(-on*<span class="number">2</span>*<span class="built_in">PI</span>/h));</div><div class="line">        for(<span class="built_in">int</span> j = <span class="number">0</span>; j &lt; <span class="built_in">len</span>; j+=h) &#123;</div><div class="line">            <span class="built_in">Complex</span> w(<span class="number">1</span>,<span class="number">0</span>);</div><div class="line">            for(<span class="built_in">int</span> k = j; k &lt; j+h/<span class="number">2</span>; k++) &#123;</div><div class="line">                <span class="built_in">Complex</span> u = y[k];</div><div class="line">                <span class="built_in">Complex</span> <span class="built_in">t</span> = w*y[k+h/<span class="number">2</span>];</div><div class="line">                y[k] = u+<span class="built_in">t</span>;</div><div class="line">                y[k+h/<span class="number">2</span>] = u-<span class="built_in">t</span>;</div><div class="line">                w = w*wn;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">if</span>(on == -<span class="number">1</span>) &#123;</div><div class="line">        for(<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">len</span>; i++)</div><div class="line">            y[i].x /= <span class="built_in">len</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">void cdq(<span class="built_in">int</span> l,<span class="built_in">int</span> r)</div><div class="line">&#123;</div><div class="line">    <span class="built_in">if</span> (l==r) &#123;</div><div class="line">        dp[l]+=a[l];</div><div class="line">        dp[l]%=MO;</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">int</span> <span class="built_in">mid</span>=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">    cdq(l,<span class="built_in">mid</span>);</div><div class="line">    <span class="built_in">int</span> len1=<span class="built_in">mid</span>-l+<span class="number">1</span>;</div><div class="line">    <span class="built_in">int</span> len2=r-l+<span class="number">1</span>;</div><div class="line">    <span class="built_in">int</span> <span class="built_in">len</span>=<span class="number">1</span>;</div><div class="line">    while (<span class="built_in">len</span>&lt;=len2) <span class="built_in">len</span>&lt;&lt;=<span class="number">1</span>;</div><div class="line">    for (<span class="built_in">int</span> i=<span class="number">0</span>;i&lt;len1;i++) &#123;</div><div class="line">        x[i]=<span class="built_in">Complex</span>(dp[l+i],<span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line">    for (<span class="built_in">int</span> i=len1;i&lt;<span class="built_in">len</span>;i++) &#123;</div><div class="line">        x[i]=<span class="built_in">Complex</span>(<span class="number">0</span>,<span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line">    for (<span class="built_in">int</span> i=<span class="number">0</span>;i&lt;len2;i++) &#123;</div><div class="line">        y[i]=<span class="built_in">Complex</span>(a[i],<span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line">    for (<span class="built_in">int</span> i=len2;i&lt;<span class="built_in">len</span>;i++) &#123;</div><div class="line">        y[i]=<span class="built_in">Complex</span>(<span class="number">0</span>,<span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line">    fft(x,<span class="built_in">len</span>,<span class="number">1</span>);</div><div class="line">    fft(y,<span class="built_in">len</span>,<span class="number">1</span>);</div><div class="line">    for (<span class="built_in">int</span> i=<span class="number">0</span>;i&lt;<span class="built_in">len</span>;i++) &#123;</div><div class="line">        x[i]=x[i]*y[i];</div><div class="line">    &#125;</div><div class="line">    fft(x,<span class="built_in">len</span>,-<span class="number">1</span>);</div><div class="line">    for (<span class="built_in">int</span> i=<span class="built_in">mid</span>+<span class="number">1</span>;i&lt;=r;i++) &#123;</div><div class="line">        dp[i]+=<span class="built_in">round</span>(x[i-l].x);</div><div class="line">        dp[i]%=MO;</div><div class="line">    &#125;</div><div class="line">    cdq(<span class="built_in">mid</span>+<span class="number">1</span>,r);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">int</span> main()</div><div class="line">&#123;</div><div class="line">    <span class="built_in">int</span> <span class="built_in">n</span>;</div><div class="line">    while (scanf(<span class="string">"%d"</span>,&amp;<span class="built_in">n</span>),<span class="built_in">n</span>) &#123;</div><div class="line">        for (<span class="built_in">int</span> i=<span class="number">1</span>;i&lt;=<span class="built_in">n</span>;i++) &#123;</div><div class="line">            scanf(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">            a[i]%=MO;</div><div class="line">        &#125;</div><div class="line">        memset(dp,<span class="number">0</span>,sizeof(dp));</div><div class="line">        dp[<span class="number">0</span>]=<span class="number">1</span>;</div><div class="line">        cdq(<span class="number">1</span>,<span class="built_in">n</span>);</div><div class="line">        printf(<span class="string">"%d\n"</span>,dp[<span class="built_in">n</span>]);</div><div class="line">    &#125;</div><div class="line">    return <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hdu 5729 Rigid Frameworks</title>
      <link href="/blog/2017/02/28/hdu5729/"/>
      <content type="html"><![CDATA[<p>题意：题目非常长，前面讲了一大堆刚性的和灵活的，但是问的是网格图。很显然网格图不是刚性的（如下图），但是我们可以通过添加对角线使得它变为刚性的，问有多少种添加的方法使变为刚性的。<br><img src="http://img.blog.csdn.net/20160804103901349" alt="网格图"><br>题解：可以<del>(很难)</del>发现，在摆动过程中，原来处于同一行的竖边一定平行；同理，原来处于同一列的横边一定平行。我们要做的即为所有横边垂直于所有竖边，那么一行和一列可以分别看做整体。更进一步地，如果两行竖边都垂直于同一列横边，这两行就属于同一个集合。<br>这里使用一个经典模型，将网格图的行和列作为二分图的左右两个点集，(x,y)连边就表示x行的竖边垂直于y列的横边，那么问题可以转化为最终n+m个点都连通的方案数。但是要注意，连边和添加对角线并不完全等价！添加对角线包含了主对角线和次对角线，而普通的连边没有这种含义。</p><p>我们设计一种动态规划（或者说递推），那它必然是总方案数减去不可行的方案数：<br>$$dp[n][m]=3^{nm}-\sum_{i=1,j=0}^{i&lt;n||j&lt;m} C_{n-1}^{i-1}C_{m}^{j}\cdot dp[i][j]\cdot 3^{(n-i)(m-j)}$$<br>$3^{nm}$表示对于每一个格子我们总是有无对角线，主对角线，次对角线三种选择。后面的减数项中，为了保证不重复，我们总是枚举左边明确的某一点（例如$1$号点）所在的连通块的左右大小。具体地，我们从$2-n$号点中选出$i-1$个，从$m$个点中选出$j$个，它们内部会有$dp[i][j]$种方案，至于剩下的$n-i$个点和$m-j$个点的关系，任意选择即可。</p><p>理解了之后写代码非常简单，可以用预处理做到$O(n^4)$<br><figure class="highlight prolog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">#include &lt;bits/stdc++.h&gt;</div><div class="line">using namespace std;</div><div class="line">typedef long long ll;</div><div class="line">const int <span class="symbol">N</span>=<span class="number">11</span>;</div><div class="line">const int <span class="symbol">MO</span>=<span class="number">1e9</span>+<span class="number">7</span>;</div><div class="line">ll <span class="symbol">C</span>[<span class="symbol">N</span>][<span class="symbol">N</span>],dp[<span class="symbol">N</span>][<span class="symbol">N</span>],po3[<span class="symbol">N</span>*<span class="symbol">N</span>];</div><div class="line"></div><div class="line">void init()</div><div class="line">&#123;</div><div class="line">    po3[<span class="number">0</span>]=<span class="number">1</span>;</div><div class="line">    for (int i=<span class="number">1</span>;i&lt;<span class="symbol">N</span>*<span class="symbol">N</span>;i++) &#123;</div><div class="line">        po3[i]=po3[i<span class="number">-1</span>]*<span class="number">3</span><span class="comment">%MO;</span></div><div class="line">    &#125;</div><div class="line">    <span class="symbol">C</span>[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">1</span>;</div><div class="line">    for (int i=<span class="number">1</span>;i&lt;<span class="symbol">N</span>;i++) &#123;</div><div class="line">        <span class="symbol">C</span>[i][<span class="number">0</span>]=<span class="symbol">C</span>[i][i]=<span class="number">1</span>;</div><div class="line">        for (int j=<span class="number">1</span>;j&lt;i;j++) &#123;</div><div class="line">            <span class="symbol">C</span>[i][j]=(<span class="symbol">C</span>[i<span class="number">-1</span>][j<span class="number">-1</span>]+<span class="symbol">C</span>[i<span class="number">-1</span>][j])<span class="comment">%MO;</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    for (int n=<span class="number">1</span>;n&lt;<span class="symbol">N</span>;n++) &#123;</div><div class="line">        for (int m=<span class="number">0</span>;m&lt;<span class="symbol">N</span>;m++) &#123;</div><div class="line">            dp[n][m]=po3[n*m];</div><div class="line">            for (int i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">                for (int j=<span class="number">0</span>;j&lt;=m;j++) &#123;</div><div class="line">                    if (i==n&amp;&amp;j==m) continue;</div><div class="line">                    dp[n][m]-=<span class="symbol">C</span>[n<span class="number">-1</span>][i<span class="number">-1</span>]*<span class="symbol">C</span>[m][j]<span class="comment">%MO*dp[i][j]%MO*po3[(n-i)*(m-j)]%MO;</span></div><div class="line">                    dp[n][m]=(dp[n][m]<span class="comment">%MO+MO)%MO;</span></div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    init();</div><div class="line">    int n,m;</div><div class="line">    while (scanf(<span class="string">"%d%d"</span>,&amp;n,&amp;m)!=<span class="symbol">EOF</span>) &#123;</div><div class="line">        printf(<span class="string">"%lld\n"</span>,dp[n][m]);</div><div class="line">    &#125;</div><div class="line">    return <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2016 China-Final 解题报告</title>
      <link href="/blog/2017/02/23/2016cnfinal/"/>
      <content type="html"><![CDATA[<h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><p>仅含题解，代码详见<a href="https://github.com/Smlight/ACMer/tree/master/2016/12/11/china_final" target="_blank" rel="noopener">github</a>。<del>喜欢的话点个star</del><br>这几天又把China-Final的题补了一些，比较蛋疼的是为啥根本搜不到题解。。。我觉得我要多加些关键字，2016 ICPC China-Final，<a href="http://codeforces.com/gym/101194" target="_blank" rel="noopener">codeforces gym101194</a>。题目在cf可以交，因为只有PDF就不每一题都加链接了。</p><h3 id="A-Number-Theory-Problem"><a href="#A-Number-Theory-Problem" class="headerlink" title="A.  Number Theory Problem"></a>A.  Number Theory Problem</h3><p>$7$的二进制表示为$111$，所以$111$, $1110$($111$移位的结果)都能被$7$整除。而$2^k-1$的二进制表示为$\underbrace{11\dots1}_{k\text{ times}}$。所以只需要$k$被$3$整除即可。</p><h3 id="C-Mr-Panda-and-Strips"><a href="#C-Mr-Panda-and-Strips" class="headerlink" title="C. Mr. Panda and Strips"></a>C. Mr. Panda and Strips</h3><p>这题据说比赛的时候$O(n^4)$加优化就能过。。。反正我们也没试。。。<br>我最开始看到的是出题人的题解，消化了很久并且按照他讲的写了，结果WA了以后仔细改了改又TLE了。然后再回去看他的题解，感觉错误不止一个啊。。。= =<br>我出于无奈只好直接问q巨要了一份代码。。。<br><a href="https://github.com/Smlight/ACMer/blob/master/2016/12/11/China-Final/C_Q.cpp" target="_blank" rel="noopener">C_Q.cpp</a><br>这个代码的意思大概就是先预处理每个颜色分布在哪几个位置，每个位置最多能延伸的区间。然后枚举第一个区间的右边界$i$，再枚举左边界$j$，$j$每减小1，就用新加入的颜色$a[j]$在之后出现的位置$x$（即$a[x]==a[j], x&gt;j$）去截保存在set里的一些区间（所有满足 $l\leq x \leq r$ 的区间）。对于每一个$x$，在全截完了以后再插入在$x$左边的最长的$[ml,x-1]$，在$x$右边的最长的$[x+1,mr]$。代码中<code>multiset&lt;int&gt; len</code>是辅助的保存长度的有序列。<br>这个算法对于每一个$i$都是先插入$O(n)$个区间，对于每个区间又会分割成$O(n)$个区间，显然复杂度是$O(n^3logn)$。时间达到了3.5s，常数比较大，操作的区间总个数更接近于$4n^2$。<br>后来又看到一份代码（是cf上的vj号交的，所以也不知道是哪位大侠）感觉很不错，跟这个其实是一个思路的，于是就学习了一下。<br>预处理时采用了时间戳的int数组，也可以像上面那样每次清空bool数组。<br><a href="https://github.com/Smlight/ACMer/blob/master/2016/12/11/China-Final/C.cpp" target="_blank" rel="noopener">C.cpp</a><br>这个方法更优的地方在于它并没有一定要保存合法的区间（如$[1,n]$通常不合法），它保存的是<strong>相对于第一个区间合法的区间</strong>，以及<strong>该区间内自我合法的最大长度</strong>。<br>复杂度同样为$O(n^3logn)$，但是实际操作区间接近$2n^2$，所以运行时间也大概是一半。</p><h3 id="D-Ice-Cream-Tower"><a href="#D-Ice-Cream-Tower" class="headerlink" title="D. Ice Cream Tower"></a>D. Ice Cream Tower</h3><p>这题应该说比较容易。读懂题目应该可以想到答案具有单调性，所以可以二分答案。记二分当前结果为$m$，那么问题转化为判定能不能堆出$m$个塔。这个也比较容易，我们只要将冰淇淋按从小到大排序，一层一层贪心地堆就可以了，因为这个冰淇淋如果当前不能用上，那么后续更不可能用上。（从大到小堆我没有测试，据说也可以通过）<br>不想动态申请内存的可以像这样使用滚动数组。</p><h3 id="E-Bet"><a href="#E-Bet" class="headerlink" title="E. Bet"></a>E. Bet</h3><p>。。。这题本身是容易的。。。但是。。。<br>记对第$i$个赌局下注$c_i$，则题意就是对于答案集合$S$中的每个$i$都有$$c_i+c_i*\cfrac{b_i}{a_i}&gt;\sum^{i\in S}_{i}c_i\quad=&gt;\quad \cfrac{c_i}{\sum^{i\in S}_{i}c_i}&gt;\cfrac{a_i}{a_i+b_i}$$该式对$i$求和可得$\sum^{i\in S}_{i}\cfrac{a_i}{a_i+b_i}&lt;1$。接下来排个序贪个心就不用说了吧。。。然而boss却是精度问题。。。多少队伍交了10+发就是因为精度问题。。。反正听说有1-(1e-50)的= =<br>于是我又是问q巨要的代码。。。然后我感觉Java很厉害。。。</p><h3 id="F-Mr-Panda-and-Fantastic-Beasts"><a href="#F-Mr-Panda-and-Fantastic-Beasts" class="headerlink" title="F. Mr. Panda and Fantastic Beasts"></a>F. Mr. Panda and Fantastic Beasts</h3><p>比赛的时候还什么都不会。。。现在知道可以用后缀数组或者后缀自动机做，先只学后缀数组吧。。。<br>这么多串第一步就是加特殊字符全连在一起，用倍增法实现SA。记第一个串为$S_1$，对于起点在$S_1$的每一个后缀$suffix(i)$，如果按字典序向前找到第一个不始于S1的后缀$suffix(p)$（位置越近重合长度越长），那么要想答案串在$S_1$之外的串中不出现，长度至少要$lcp(suffix(i),suffix(p))+1$，同理向后找，找到$suffix(q)$，长度至少要$lcp(suffix(i),suffix(q))+1$，所以用两者的最大值更新答案长度。注意，这个答案长度不能超过$S_1$剩下的部分！<br><strong>The solution above is based on forever97’ s.</strong><br>至于$lcp$可以用ST实现的RMQ，但是因为本来就是线性向前向后找，实际上使用最原始的一连串$height$值的最小值就可以啦。这个方法反而跑得飞快，10s的题在cf上只用了400+ms，复杂度我不太会分析。。。= =<br><a href="https://github.com/Smlight/ACMer/blob/master/2016/12/11/China-Final/F.cpp" target="_blank" rel="noopener">F.cpp</a><br><em>warning: 不赞成使用 height[0]/height[n+1] 。</em></p><h3 id="H-Great-Cells"><a href="#H-Great-Cells" class="headerlink" title="H. Great Cells"></a>H. Great Cells</h3><p>拆开来用贡献做实在是太神奇了。。。dp+容斥不太适合我的能力。。。<br>$$\sum^{NM}_{g=0}\ (g+1)\cdot A_g=\sum^{NM}_{g=0}\ g\cdot A_g+\sum^{NM}_{g=0}\ A_g$$第一项相当于每个格子当一次<strong>great cell</strong>就计数一次，第二项相当于所有填法的总和。<br>$$\sum^{NM}_{g=0}\ g\cdot A_g=NM\cdot contrib=NM\cdot \sum^{K}_{i=2}(i-1)^{N-1+M-1}\cdot K^{(N-1)(M-1)}$$第一项转化为每一个格子的贡献（当<strong>great cell</strong>的次数）。一个格子为<strong>great cell</strong>当且仅当这个格子填$i$时，它所在的行和列填的都是小于$i$的数($(i-1)^{N-1+M-1}$)，其他格子随便填($K^{(N-1)(M-1)}$)。注意，$N=1, M=1$需要另外讨论！<br>于是这道题成为了本场代码第二短的。。。</p><h3 id="L-World-Cup"><a href="#L-World-Cup" class="headerlink" title="L. World Cup"></a>L. World Cup</h3><p>总共六场比赛，每场三种结果，暴力。</p><h3 id="Coda"><a href="#Coda" class="headerlink" title="Coda"></a>Coda</h3><p>因为总是搜不到题解，于是就劳烦了好多人。。。但是大佬们都很友好，作为一个鶸我真的非常感动，值得学习！<br>特别鸣谢 <strong>quailty, forever97</strong> <del>我q人见人爱！</del></p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2016 CCPC 合肥站 解题报告</title>
      <link href="/blog/2017/02/18/2016ccpc_hefei/"/>
      <content type="html"><![CDATA[<h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><p>仅含题解，代码详见<a href="https://github.com/Smlight/ACMer/tree/master/2016/10/16/ccpc_hefei" target="_blank" rel="noopener">github</a>。<del>喜欢的话点个star</del><br>前几天终于把合肥的题补了一些。。。再往下就是lct了，暂时不学。</p><h3 id="A、传递"><a href="#A、传递" class="headerlink" title="A、传递"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5961" target="_blank" rel="noopener">A、传递</a></h3><p>题解：将P图和Q图的边取并生成一个新图（下称“合成”），有环则原来是不传递的。再将P图和Q的反图合成，有环则原来不传递的。<br>感觉知道结论还是不难理解的。。。反正我根本想不到。。。结束的时候听到有用最短路做的，这个才是重大失误，我们都没想到。<br>代码是按题解写的。</p><h3 id="C、朋友"><a href="#C、朋友" class="headerlink" title="C、朋友"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5963" target="_blank" rel="noopener">C、朋友</a></h3><p>分析：不与根相连的值为1的边操作两次可以变为0，与根相连的值为1的边操作一次可以变为0。推理可知，答案仅和与根直接相连的那些1有关。</p><h3 id="D、平行四边形"><a href="#D、平行四边形" class="headerlink" title="D、平行四边形"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5964" target="_blank" rel="noopener">D、平行四边形</a></h3><p>全场代码最短的题。。。我一直以为它代码是个几何题，好像读题的时候直接跳过了。。。现在发现只要敢做就能做出来= = 又是一个重大失误。<br>这题主要是一个数学推导的题目。。。<br>取两点 $v_1,v_2\in S,v_1\neq v_2$，可以利用平行四边形性质解得直线上的两点 $v_3,v_4$ 。<br>$$\begin{cases}<br>x_1+x_2=x_3+x_4 \\<br>y_1+y_2=y_3+y_4 \\<br>ax_3+by_3=0 \\<br>a’x_4+b’y_4=0<br>\end{cases}$$解得：$$\begin{cases}<br>x_3=\cfrac{a′bx_1+a′bx_2+bb′y_1+bb′y_2}{a′b-ab’} \\<br>y_3=\cfrac{aa′x_1+aa′x_2+ab′y_1+ab′y_2}{ab′-a′b}<br>\end{cases}$$再利用叉积计算面积：$$S=2\times \frac{1}{2}\times |\overrightarrow{v_1v_2}×\overrightarrow{v_1v_3}|=|(x_2-x_1)(y_3-y_1)-(y_2-y_1)(x_3-x_1)| \\<br>=|(ax_2+by_2)(a′x_2+b′y_2)-(ax_1+by_1)(a′x_1+b′y_1)|\triangleq |f(v_2)-f(v_1)|$$</p><h3 id="E、扫雷"><a href="#E、扫雷" class="headerlink" title="E、扫雷"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5965" target="_blank" rel="noopener">E、扫雷</a></h3><p>相邻两格的差等于外面两列的差，直接递推。要特判 $n=1$ 的情况。</p><h3 id="H、异或密码"><a href="#H、异或密码" class="headerlink" title="H、异或密码"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5968" target="_blank" rel="noopener">H、异或密码</a></h3><p>直接暴力。</p><h3 id="I、最大的位或"><a href="#I、最大的位或" class="headerlink" title="I、最大的位或"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5969" target="_blank" rel="noopener">I、最大的位或</a></h3><p>简单的来说，应该使$x(l\leq x\leq r)$与$r$或运算后尽可能将$r$高位的0变为1。</p><h3 id="J、最大公约数"><a href="#J、最大公约数" class="headerlink" title="J、最大公约数"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5970" target="_blank" rel="noopener">J、最大公约数</a></h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">函数 f(x, y):</div><div class="line">&#123;</div><div class="line">     <span class="attr">c=0</span></div><div class="line">     当 y&gt;<span class="number">0</span>:</div><div class="line">     &#123;</div><div class="line">          c +=<span class="number">1</span></div><div class="line">          <span class="attr">t</span> = x % y</div><div class="line">          <span class="attr">x</span> = y</div><div class="line">          <span class="attr">y</span> = t</div><div class="line">      &#125;</div><div class="line">      返回 c * x * x</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>首先题目中给出的这个函数核心很像gcd，我们可以看出它的一个性质：<code>f(u,y)==f(v,y), if u==v (mod y)</code> 。这个性质是很显然的，因为这个函数的第一步就是 <code>t = x % y</code> <del>然而我并没有看出来</del>。<br>所以，在该式$\lfloor \frac{i*j}{f(i,j)}\rfloor$中先枚举$j$，再枚举$i(1\leq i\leq j)$，此时其实每一个$i$都对应一个等差数列${i,i+j,i+2j,\dots}$ 。当然这题没这么简单，还有一个向下取整没有考虑。<br>将计算$f(x,y)$过程中的$c$值记为$c(x,y)$，则有$f(i,j)=c(i,j)(gcd(i,j))^2$。考虑把一个$i$对应的数列拆分成多个数列使得取整后仍为等差，可以发现当新的数列的公差为$c(i,j)*j$时，整个分式的公差为$\frac{(c(i,j)*j)*j}{f(i,j)}=(\frac{j}{gcd(i,j)})^2$，必为整数。因此，我们把数列拆分为${i,i+c(i,j)*j,\dots}$, ${i+j,i+j+c(i,j)*j,\dots}\dots$, 共$c(i,j)$个，分别使用求和公式即可。</p><p>最后贴一下坎普的题解。。。总共10个题都有 <a href="https://post.icpc-camp.org/d/628-2016" target="_blank" rel="noopener">https://post.icpc-camp.org/d/628-2016</a></p><p>=========2016/02/20=========</p><p>这篇博客本来写了我一个下午。。。结果今天发现它出了点问题了。。。又补了一个晚上。。。哭死了。。。第一次这么感谢百度快照。。。</p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hdu 5306 Gorgeous Sequence 线段树</title>
      <link href="/blog/2017/02/03/hdu5306/"/>
      <content type="html"><![CDATA[<h3 id="Gorgeous-Sequence"><a href="#Gorgeous-Sequence" class="headerlink" title="Gorgeous Sequence"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5306" target="_blank" rel="noopener">Gorgeous Sequence</a></h3><p>读完题，可以知道显然要维护最大值和区间和，可以用线段树。写着写着感觉第一种操作好像不能延迟更新，然后就不会了。。。<br>查题解的时候发现都是线段树，不过各有各的做法，后来有一种说是吉如一论文中介绍的，可以证明每次操作均摊复杂度为 $O(logN)$ 。这个论文的标题我倒是找到了（吉如一 -《区间最值操作与历史最值问题》）然而论文没找到。。。<br>做法如下：线段树的每个节点记录最大值a，次大值b，区间和sum，以及最大值个数cnt。当进行第一种操作时，</p><ol><li>如果当前节点有 $a \leq t$ ，则直接退出。这个很好理解，即区间内所有数都不变。</li><li>如果当前节点有 $b \lt t$，则先利用 $a$ 和 $cnt$ 更新$sum$ 再更新 $a$ 后退出。这里要注意的是绝对不能加等号！若 $b=t$ 也是如此退出，则之后的次大值和最大值个数都不准确【没错我就是因为这个WA了几次 ←_←</li><li>直接往下递归</li></ol><p>第二种第三种为线段树常规的操作，不表。<br>期间还发生一件事，找了一份3k+的代码边抄边理解然后调了半天终于A了，结果又找到一份代码，感觉非常好懂而且只有2k+，于是又照着这个写了一遍。。。可见理思路是多么的重要。。。<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#include &lt;bits/stdc++.h&gt;</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="title">std</span>;</div><div class="line">typedef <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line">typedef pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> lson l,m,rt&lt;&lt;1</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rson m+1,r,rt&lt;&lt;1|1</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ls rt&lt;&lt;1</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rs rt&lt;&lt;1|1</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1000000</span>;</div><div class="line"><span class="keyword">struct</span> Seg &#123;</div><div class="line">    ll sum;</div><div class="line">    <span class="keyword">int</span> a,b,cnt;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">spfy</span>(<span class="params"><span class="keyword">int</span> t</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (a&lt;=t) <span class="keyword">return</span>;</div><div class="line">        sum-=(ll)(a-t)*cnt;</div><div class="line">        a=t;</div><div class="line">    &#125;</div><div class="line">&#125; s[maxn&lt;&lt;<span class="number">2</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_up</span>(<span class="params"><span class="keyword">int</span> rt</span>)</span></div><div class="line">&#123;</div><div class="line">    s[rt].sum=s[ls].sum+s[rs].sum;</div><div class="line">    s[rt].a=max(s[ls].a,s[rs].a);</div><div class="line">    s[rt].b=max(s[ls].b,s[rs].b);</div><div class="line">    s[rt].cnt=<span class="number">0</span>;</div><div class="line">    <span class="keyword">if</span> (s[ls].a==s[rt].a) s[rt].cnt+=s[ls].cnt;</div><div class="line">    <span class="keyword">else</span> s[rt].b=max(s[rt].b,s[ls].a);</div><div class="line">    <span class="keyword">if</span> (s[rs].a==s[rt].a) s[rt].cnt+=s[rs].cnt;</div><div class="line">    <span class="keyword">else</span> s[rt].b=max(s[rt].b,s[rs].a);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_down</span>(<span class="params"><span class="keyword">int</span> rt</span>)</span></div><div class="line">&#123;</div><div class="line">    s[ls].spfy(s[rt].a);</div><div class="line">    s[rs].spfy(s[rt].a);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span>(<span class="params"><span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt</span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (l==r) &#123;</div><div class="line">        scanf(<span class="string">"%d"</span>,&amp;s[rt].a);</div><div class="line">        s[rt].sum=s[rt].a;</div><div class="line">        s[rt].b=<span class="number">-1</span>;</div><div class="line">        s[rt].cnt=<span class="number">1</span>;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">    build(lson);</div><div class="line">    build(rson);</div><div class="line">    push_up(rt);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span>(<span class="params"><span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> t,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt</span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (s[rt].a&lt;=t) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">if</span> (L&lt;=l&amp;&amp;r&lt;=R&amp;&amp;s[rt].b&lt;t) &#123;<span class="comment">/* Do not add '=' !!! </span></div><div class="line">        if s[rt].b == t, </div><div class="line">        it supposed to be push_down, </div><div class="line">        because s[rt].b, s[rt].cnt cannot be determined. */</div><div class="line">        s[rt].spfy(t);</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    push_down(rt);</div><div class="line">    <span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span> (L&lt;=m&amp;&amp;s[ls].a&gt;t) update(L,R,t,lson);</div><div class="line">    <span class="keyword">if</span> (R&gt;m&amp;&amp;s[rs].a&gt;t) update(L,R,t,rson);</div><div class="line">    push_up(rt);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getmax</span>(<span class="params"><span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt</span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (L&lt;=l&amp;&amp;r&lt;=R) <span class="keyword">return</span> s[rt].a;</div><div class="line">    <span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</div><div class="line">    push_down(rt);</div><div class="line">    <span class="keyword">if</span> (L&lt;=m) res=max(res,getmax(L,R,lson));</div><div class="line">    <span class="keyword">if</span> (m&lt;R) res=max(res,getmax(L,R,rson));</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function">ll <span class="title">getsum</span>(<span class="params"><span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt</span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (L&lt;=l&amp;&amp;r&lt;=R) <span class="keyword">return</span> s[rt].sum;</div><div class="line">    <span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">    ll res=<span class="number">0</span>;</div><div class="line">    push_down(rt);</div><div class="line">    <span class="keyword">if</span> (L&lt;=m) res+=getsum(L,R,lson);</div><div class="line">    <span class="keyword">if</span> (m&lt;R) res+=getsum(L,R,rson);</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T,n,m;</div><div class="line">    scanf(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">while</span> (T--) &#123;</div><div class="line">        scanf(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">        build(<span class="number">1</span>,n,<span class="number">1</span>);</div><div class="line">        <span class="keyword">while</span> (m--) &#123;</div><div class="line">            <span class="keyword">int</span> op,x,y;</div><div class="line">            scanf(<span class="string">"%d%d%d"</span>,&amp;op,&amp;x,&amp;y);</div><div class="line">            <span class="keyword">if</span> (op==<span class="number">0</span>) &#123;</div><div class="line">                <span class="keyword">int</span> t;</div><div class="line">                scanf(<span class="string">"%d"</span>,&amp;t);</div><div class="line">                update(x,y,t,<span class="number">1</span>,n,<span class="number">1</span>);</div><div class="line">            &#125; <span class="function"><span class="keyword">else</span> <span class="title">if</span> (<span class="params">op==<span class="number">1</span></span>) </span>&#123;</div><div class="line">                printf(<span class="string">"%d\n"</span>,getmax(x,y,<span class="number">1</span>,n,<span class="number">1</span>));</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                printf(<span class="string">"%lld\n"</span>,getsum(x,y,<span class="number">1</span>,n,<span class="number">1</span>));</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Piece0</title>
      <link href="/blog/2016/12/20/Piece0/"/>
      <content type="html"><![CDATA[<p>某文，很6 。<br>昨天在某群看到一个同级同专业的同学解答了折半查找的问题，感觉代码写得挺不错的，而且跟别人争辩的时候也不慌不忙。再一看截图，这环境好像是iPad+vim。。。瞬间吓尿，又想起来他这几次比赛好像都很不错，于是赶紧加了好友。<br>一加好友他竟然说我银牌大佬，还告诉我是AA说的<del>AA真是看得起我😂</del>。后来又了解到他考过pat乙级和pat甲级，甲级80+，凭我感觉应该还是挺屌的。再后来就问问他日常什么系统啊之类的。。。结果发现他每天晚上的日常是<strong>躺在床上拿iPad连接自己桌上的笔记本然后…用vim写代码</strong><br>Cool！妈的感觉这才是大学生啊！当然，首先我需要一个iPad 。<br>又问了问有没有搞过Web方面的，他说用python爬过10个G的<del>美女</del>图片。<br>Cool！妈的感觉这才是大学生啊！当然，首先我需要学会python 。<br>于是我说我想学python ，他就说我这儿有几本书你要不要看啊 。商量了一下，我就直接去他寝室了。<br>见面当然还是要聊啊，中学没搞过信息学竞赛，但是自学过C语言，大学还玩过单片机，然后转专业到计算机，现在在看算法导论，还在跟别人一起搞3D玩。相比之下我就很挫了，初中用Pascal搞信息学竞赛，高中用C++搞信息学竞赛，python只会helloworld，从来没看过什么正经书…<br>轻松转专业，估计还是个学霸。我觉得他就是我想要的那种状态，但是也很难说清楚。不过我现在有事干了：</p><ul><li>看看这本python核心编程</li><li>学会最基本的vim用法<del>要不然怎么搞服务器啊</del></li><li>程序竞赛全面使用c++11，多吸取优雅写法【我觉得一定会很爽</li></ul>]]></content>
      
      
        <tags>
            
            <tag> Life </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>UVALive 7139 Rotation</title>
      <link href="/blog/2016/12/09/UVALive7139/"/>
      <content type="html"><![CDATA[<h3 id="Rotation"><a href="#Rotation" class="headerlink" title="Rotation"></a><a href="https://vjudge.net/problem/UVALive-7139" target="_blank" rel="noopener">Rotation</a></h3><p>题意：$N×M$ 的网格图，给定一条网格线连成的闭合路径，计算所有格子转动值的平方和。假设一辆车沿着路径移动，一个人站在某个格子正中间<strong>始终</strong>对着车，这个人在车开始到停下顺时针转动了 $x$ 度，则他的转动值为 $\frac{x}{360}$ （可以为负数）。<br>题解：首先，因为起点和终点相同，每个格子的转动值一定为整数。<br>其次，若路径为简单环，环内的格子转动值均为 $\pm 1$，环外的格子转动值均为 $0$ 。</p><p><img src="http://img.blog.csdn.net/20161209091839595" alt="环外某格的转动值一定为0"><br>接着可以发现，每次路径向下时，为左边的格子贡献正的转动值，为右边的格子贡献负的转动值。<br>用一个<del>看来的</del>巧妙的做法：每次只考虑路径对右侧的格子的影响。上行一次，右侧所有格子加一，下行一次，右侧所有格子减一。这时，这个做法已经不仅限于简单环了。<br>现在问题转化为给一个矩阵增量，由于只需要最后结果，我们可以利用差分的思想。<br>在一维时，差分可以将区间增量变成两个点的增量。差分即为前缀和的逆运算，回忆一下二维前缀和的递推：$$sum[i][j]=a[i][j]+sum[i-1][j]+sum[i][j-1]-sum[i-1][j-1]$$</p><p>设计如下的增量：</p><p><img src="http://img.blog.csdn.net/20161209093512781" alt="二维的差分"></p><p>进行二维前缀和递推以后即可得到真实的数。</p><p>考虑到本题每次更新的矩阵都是直到右边界，所以可以忽略右边的两个增量。</p><p>最后，本题需要生成一个长宽不定的矩阵，C++使用 vector 比较方便，C语言查了一下指针和malloc大概要十多行吧。。。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">int</span> T,n,m,k;</div><div class="line"><span class="built_in">vector</span>&lt; <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; mp;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> r1,<span class="keyword">int</span> r2,<span class="keyword">int</span> c,<span class="keyword">int</span> val)</span></span></div><div class="line">&#123;</div><div class="line">    mp[r1][c]+=val;</div><div class="line">    mp[r2][c]-=val;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;=T;t++) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;n,&amp;m,&amp;k);</div><div class="line">        mp=<span class="built_in">vector</span>&lt; <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt;(n+<span class="number">2</span>,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(m+<span class="number">2</span>,<span class="number">0</span>));</div><div class="line">        <span class="keyword">int</span> r=<span class="number">1</span>,c=<span class="number">1</span>;</div><div class="line">        <span class="keyword">while</span> (k--) &#123;</div><div class="line">            <span class="keyword">char</span> d[<span class="number">2</span>];</div><div class="line">            <span class="keyword">int</span> s;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%s%d"</span>,d,&amp;s);</div><div class="line">            <span class="keyword">if</span> (d[<span class="number">0</span>]==<span class="string">'U'</span>) &#123;</div><div class="line">                update(r-s,r,c,<span class="number">1</span>);</div><div class="line">                r-=s;</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (d[<span class="number">0</span>]==<span class="string">'D'</span>) &#123;</div><div class="line">                update(r,r+s,c,<span class="number">-1</span>);</div><div class="line">                r+=s;</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (d[<span class="number">0</span>]==<span class="string">'L'</span>) &#123;</div><div class="line">                c-=s;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                c+=s;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        ll ans=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++) &#123;</div><div class="line">                mp[i][j]=mp[i][j]+mp[i<span class="number">-1</span>][j]+mp[i][j<span class="number">-1</span>]-mp[i<span class="number">-1</span>][j<span class="number">-1</span>];</div><div class="line">                ans+=(ll)mp[i][j]*mp[i][j];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: %lld\n"</span>,t,ans);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>其实我们可以发现，不管考虑哪一侧都可以解决这个问题，当然因为最开始在左上角，维护左侧和上侧可能比较困难。下面放一个维护下侧的：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">int</span> T,n,m,k;</div><div class="line"><span class="built_in">vector</span>&lt; <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; mp;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> r,<span class="keyword">int</span> c1,<span class="keyword">int</span> c2,<span class="keyword">int</span> val)</span></span></div><div class="line">&#123;</div><div class="line">    mp[r][c1]+=val;</div><div class="line">    mp[r][c2]-=val;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;=T;t++) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;n,&amp;m,&amp;k);</div><div class="line">        mp=<span class="built_in">vector</span>&lt; <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt;(n+<span class="number">2</span>,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(m+<span class="number">2</span>,<span class="number">0</span>));</div><div class="line">        <span class="keyword">int</span> r=<span class="number">1</span>,c=<span class="number">1</span>;</div><div class="line">        <span class="keyword">while</span> (k--) &#123;</div><div class="line">            <span class="keyword">char</span> d[<span class="number">2</span>];</div><div class="line">            <span class="keyword">int</span> s;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%s%d"</span>,d,&amp;s);</div><div class="line">            <span class="keyword">if</span> (d[<span class="number">0</span>]==<span class="string">'L'</span>) &#123;</div><div class="line">                update(r,c-s,c,<span class="number">-1</span>);</div><div class="line">                c-=s;</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (d[<span class="number">0</span>]==<span class="string">'R'</span>) &#123;</div><div class="line">                update(r,c,c+s,<span class="number">1</span>);</div><div class="line">                c+=s;</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (d[<span class="number">0</span>]==<span class="string">'U'</span>) &#123;</div><div class="line">                r-=s;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                r+=s;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        ll ans=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++) &#123;</div><div class="line">                mp[i][j]=mp[i][j]+mp[i<span class="number">-1</span>][j]+mp[i][j<span class="number">-1</span>]-mp[i<span class="number">-1</span>][j<span class="number">-1</span>];</div><div class="line">                ans+=(ll)mp[i][j]*mp[i][j];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: %lld\n"</span>,t,ans);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>FJNU 低年级程序设计竞赛</title>
      <link href="/blog/2016/12/05/FJNU%E4%BD%8E%E5%B9%B4%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%AB%9E%E8%B5%9B/"/>
      <content type="html"><![CDATA[<h3 id="B-捧杯"><a href="#B-捧杯" class="headerlink" title="B-捧杯"></a><a href="http://acm.fjnu.edu.cn/problem.php?id=1195" target="_blank" rel="noopener">B-捧杯</a></h3><p>受力分析。。。贴这题主要是因为看到了向量化简有一个很简洁的作法~</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (a==<span class="number">0</span>||b==<span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">return</span> max(a+b,<span class="number">1</span>);<span class="comment">//cool~</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">while</span> (b) &#123;</div><div class="line">        <span class="keyword">int</span> t=b;</div><div class="line">        b=a%b;</div><div class="line">        a=t;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> a;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">spfy</span><span class="params">(<span class="keyword">int</span> &amp;a,<span class="keyword">int</span> &amp;b)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> g=gcd(<span class="built_in">abs</span>(a),<span class="built_in">abs</span>(b));</div><div class="line">    a/=g;b/=g;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">while</span> (T--) &#123;</div><div class="line">        <span class="keyword">int</span> x0,y0,n;</div><div class="line">        <span class="keyword">int</span> ansx=<span class="number">0</span>,ansy=<span class="number">0</span>;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x0,&amp;y0);</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="keyword">int</span> x,y;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</div><div class="line">            ansx+=x-x0;</div><div class="line">            ansy+=y-y0;</div><div class="line">        &#125;</div><div class="line">        spfy(ansx,ansy);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>,ansx,ansy);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="C-汪老司机"><a href="#C-汪老司机" class="headerlink" title="C-汪老司机"></a><a href="http://acm.fjnu.edu.cn/problem.php?id=1196" target="_blank" rel="noopener">C-汪老司机</a></h3><p>交错dp。。。<br><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">using namespace std;</div><div class="line"></div><div class="line">typedef long long ll;</div><div class="line">const int N=<span class="number">10010</span>;</div><div class="line">const ll INF=1LL&lt;&lt;<span class="number">60</span>;</div><div class="line">ll a<span class="string">[N]</span>,b<span class="string">[N]</span>;</div><div class="line">ll f<span class="string">[N]</span><span class="string">[20]</span>,g<span class="string">[N]</span><span class="string">[20]</span>;</div><div class="line"></div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    int T,n,k;</div><div class="line">    scanf(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    while (T--) &#123;</div><div class="line">        scanf(<span class="string">"%d%d"</span>,&amp;n,&amp;k);</div><div class="line">        for (int i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            scanf(<span class="string">"%lld"</span>,&amp;a<span class="string">[i]</span>);</div><div class="line">        &#125;</div><div class="line">        for (int i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            scanf(<span class="string">"%lld"</span>,&amp;b<span class="string">[i]</span>);</div><div class="line">        &#125;</div><div class="line">        for (int i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            f<span class="string">[i]</span><span class="string">[0]</span>=f<span class="string">[i-1]</span><span class="string">[0]</span>+a<span class="string">[i]</span>;</div><div class="line">            g<span class="string">[i]</span><span class="string">[0]</span>=g<span class="string">[i-1]</span><span class="string">[0]</span>+b<span class="string">[i]</span>;</div><div class="line">        &#125;</div><div class="line">        for (int j=<span class="number">1</span>;j&lt;=k;j++) &#123;</div><div class="line">            for (int i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">                f<span class="string">[i]</span><span class="string">[j]</span>=min(f<span class="string">[i-1]</span><span class="string">[j]</span>+a<span class="string">[i]</span>,g<span class="string">[i-1]</span><span class="string">[j-1]</span>+a<span class="string">[i]</span>);</div><div class="line">                g<span class="string">[i]</span><span class="string">[j]</span>=min(g<span class="string">[i-1]</span><span class="string">[j]</span>+b<span class="string">[i]</span>,f<span class="string">[i-1]</span><span class="string">[j-1]</span>+b<span class="string">[i]</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        printf(<span class="string">"%lld\n"</span>,min(f<span class="string">[n]</span><span class="string">[k]</span>,g<span class="string">[n]</span><span class="string">[k]</span>));</div><div class="line">    &#125;</div><div class="line">    return <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h3 id="D-蒟蒻的任务分配"><a href="#D-蒟蒻的任务分配" class="headerlink" title="D-蒟蒻的任务分配"></a><a href="http://acm.fjnu.edu.cn/problem.php?id=1197" target="_blank" rel="noopener">D-蒟蒻的任务分配</a></h3><p>这题是比赛的时候唯一没什么想法的。先贴一下<del>通过某种py搞到的</del>出题人的题解：</p><blockquote><p>首先考虑到，没有可容性的事件一定是不能同时进行的，也就是说，最短也要花费这些事件长度的总和，如果这些事件长度的总和是大于有可容性的事件的长度的总和，那么最少耗费时间就是没有可容性事件的长度总和</p><p>首先因为最多同时开两件事，那么自然尽量把所有事分为尽量相等的两段，如果能够安排出合理的方案，那么该解一定是最优的。</p><p>接下来证明在这种条件下若分成尽量相等的两段，总能够安排出合理的序列使得任务能够正常进行</p><p>假设分为两段第一段里没有可容性的事件总长为x1,有可容性的事件的总长为y1。第二段里没有可容性的事件总长为x2,有可容性的事件的总长为y2。那么有x1+x2&lt;=y1+y2不妨设x1+y1&lt;=x2+y2那么有如下安排方案先做第一段里没有可容性的事件，同时开始做第二段里有可容性的事件如果y2 &lt; x1,那么根据x1+y1&lt;=x2+y2,一定有x2&gt;y1,那么有x1+x2&gt;y1+y2，与该情况相悖,所以y2&gt;=x1。那么在第一段没有可容性的事件全部做完后，开始做第一段有可容性的事件然后在第二段有可容性的事件全部做完后，开始做第二段没有可容性的事件随后任务肯定能够没有冲突的顺利进行，证毕。</p><p>接下来只需要把所有任务分为时间尽量相等的两半就可以了，这一部分可以背包暴力跑01背包时间复杂度是 $O(t*n^2*costi)$ 但是考虑到costi很小，可以记录costi相等的事件的数量，然后做二进制优化优化后的时间复杂度为 $O(t*cost^2*nlogn)$ </p><p>本题放过了暴力01背包的解法</p></blockquote><p>不得不说这个想法很巧妙，反正我肯定是想不到的。<br>虽然出题人说01背包能过但是我并没有过。。。于是我还是写了多重背包。。。<del>结果因为没清f[] WA了好几次。。。</del><br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1005</span>;</div><div class="line"><span class="keyword">int</span> cnt[<span class="number">20</span>],f[N*<span class="number">10</span>],s[<span class="number">2</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T,n;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">while</span> (T--) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">        s[<span class="number">0</span>]=s[<span class="number">1</span>]=<span class="number">0</span>;</div><div class="line">        <span class="built_in">memset</span>(f,<span class="number">0</span>,<span class="keyword">sizeof</span>(f));</div><div class="line">        <span class="built_in">memset</span>(cnt,<span class="number">0</span>,<span class="keyword">sizeof</span>(cnt));</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="keyword">int</span> ci,fi;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;ci,&amp;fi);</div><div class="line">            s[fi]+=ci;</div><div class="line">            cnt[ci]++;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (s[<span class="number">0</span>]&gt;s[<span class="number">1</span>]) &#123;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,s[<span class="number">0</span>]);</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        &#125;</div><div class="line">        s[<span class="number">0</span>]+=s[<span class="number">1</span>];</div><div class="line">        <span class="keyword">int</span> lim=s[<span class="number">0</span>]/<span class="number">2</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">10</span>;i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=cnt[i];k&lt;&lt;=<span class="number">1</span>) &#123;</div><div class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j=lim;j&gt;=k*i;j--) &#123;</div><div class="line">                    f[j]=max(f[j],f[j-k*i]+k*i);</div><div class="line">                &#125;</div><div class="line">                cnt[i]-=k;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=lim;j&gt;=cnt[i]*i;j--) &#123;</div><div class="line">                f[j]=max(f[j],f[j-cnt[i]*i]+cnt[i]*i);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,s[<span class="number">0</span>]-f[lim]);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>还找到了一个理解起来难度可能小一点的方法：<a href="http://blog.csdn.net/bamboohiko/article/details/53448961#t3" target="_blank" rel="noopener">Problem D: 蒟蒻的任务分配</a> 自行查阅</p><h3 id="F-火柴棒"><a href="#F-火柴棒" class="headerlink" title="F-火柴棒"></a><a href="http://acm.fjnu.edu.cn/problem.php?id=1199" target="_blank" rel="noopener">F-火柴棒</a></h3><p>这题比赛的时候想的差不多了但是就是有一点没想到。。。<br>首先总火柴数是偶数的话肯定都是1。<br>总火柴数是奇数的话：</p><ol><li>如果其余拼成奇数个1，把中间一个1变成7即可</li><li>如果其余拼成偶数个1，把四个1和多余的1根变为三个7，放在首尾和中间；如果不到四个1，用两个1和多余的1根变为一个5，可以发现这时总火柴数一定是5。</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> w[<span class="number">10</span>]=&#123;<span class="number">6</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">6</span>&#125;;</div><div class="line"><span class="keyword">char</span> s[<span class="number">10010</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">while</span> (T--) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>,s);</div><div class="line">        <span class="keyword">int</span> l=<span class="built_in">strlen</span>(s),sts=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;l;i++) &#123;</div><div class="line">            sts+=w[s[i]-<span class="string">'0'</span>];</div><div class="line">        &#125;</div><div class="line"><span class="comment">//        printf("%d\n",sts);</span></div><div class="line">        <span class="keyword">if</span> (sts%<span class="number">2</span>==<span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">int</span> k=sts/<span class="number">2</span>;</div><div class="line">            <span class="keyword">while</span> (k--) &#123;</div><div class="line">                <span class="built_in">putchar</span>(<span class="string">'1'</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> k=sts/<span class="number">2</span>;</div><div class="line">        <span class="keyword">if</span> (k&amp;<span class="number">1</span>) &#123;</div><div class="line">            k/=<span class="number">2</span>;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;i++) &#123;</div><div class="line">                <span class="built_in">putchar</span>(<span class="string">'1'</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="built_in">putchar</span>(<span class="string">'7'</span>);</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;i++) &#123;</div><div class="line">                <span class="built_in">putchar</span>(<span class="string">'1'</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">if</span> (sts==<span class="number">5</span>) &#123;</div><div class="line">                <span class="built_in">puts</span>(<span class="string">"5"</span>);</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            &#125;</div><div class="line">            k=k/<span class="number">2</span><span class="number">-1</span>;</div><div class="line">            <span class="built_in">putchar</span>(<span class="string">'7'</span>);</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;k;i++) &#123;</div><div class="line">                <span class="built_in">putchar</span>(<span class="string">'1'</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="built_in">putchar</span>(<span class="string">'7'</span>);</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;k;i++) &#123;</div><div class="line">                <span class="built_in">putchar</span>(<span class="string">'1'</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="built_in">putchar</span>(<span class="string">'7'</span>);</div><div class="line">            <span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="G-PY"><a href="#G-PY" class="headerlink" title="G-PY"></a><a href="http://acm.fjnu.edu.cn/problem.php?id=1200" target="_blank" rel="noopener">G-PY</a></h3><p>若有 $i &lt; j$，则 $F(i, j) = ai + ( aj + j ) - i$ ，倒着枚举 $i$ ，边更新最优的 $j$ 边更新答案即可。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100010</span>;</div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> a[N];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T,n;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">while</span> (T--) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;a[i]);</div><div class="line">        &#125;</div><div class="line">        ll ans=<span class="number">-1</span>;</div><div class="line">        <span class="keyword">int</span> pre=n;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=n<span class="number">-1</span>;i&gt;<span class="number">0</span>;i--) &#123;</div><div class="line">            ans=max(ans,a[i]+a[pre]+pre-i);</div><div class="line">            <span class="keyword">if</span> (a[i]+i&gt;a[pre]+pre) pre=i;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,ans);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>终于可以假装自己AK了，over~</p><h3 id="Coda"><a href="#Coda" class="headerlink" title="Coda"></a>Coda</h3><p>看到其他学校搞的比赛，不得不说比我们正式正规的多。。。<br>不过有底气邀请全国的我们也不说了 =。= 话说那天给的网址是日本的服务器然后现在已经登不了了。。。FJNU 可以的，很66666</p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2016 ICPC 大连站解题报告</title>
      <link href="/blog/2016/11/06/2016icpc_dalian/"/>
      <content type="html"><![CDATA[<h3 id="J-Find-Small-A"><a href="#J-Find-Small-A" class="headerlink" title="J. Find Small A"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5980" target="_blank" rel="noopener">J. Find Small A</a></h3><p>一眼题<del>没看清以为移4位WA了一次</del></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> n;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n)!=EOF) &#123;</div><div class="line">        <span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="keyword">int</span> x;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</div><div class="line">            <span class="keyword">while</span> (x) &#123;</div><div class="line">                ans+=((x&amp;<span class="number">255</span>)==<span class="string">'a'</span>);</div><div class="line">                x&gt;&gt;=<span class="number">8</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="H-To-begin-or-not-to-begin"><a href="#H-To-begin-or-not-to-begin" class="headerlink" title="H. To begin or not to begin"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5978" target="_blank" rel="noopener">H. To begin or not to begin</a></h3><p>简单计算或者由生活常识：每次抽中红球的概率都是相等的，所以只需要判断先后手抽的次数，也就是判断奇偶性。这里题目没说k是什么，但是看样例应该差不多<del>反正先随便交一发</del>【据说当时pc^2上还给了错误的解释。。。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> n;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n)!=EOF) &#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,(n+<span class="number">1</span>)&amp;<span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h3 id="I-Convex"><a href="#I-Convex" class="headerlink" title="I. Convex"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5979" target="_blank" rel="noopener">I. Convex</a></h3><p>正弦面积公式，注意角度弧度转换<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> n,r;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;r)!=EOF) &#123;</div><div class="line">        <span class="keyword">long</span> <span class="keyword">double</span> ans=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="keyword">int</span> a;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a);</div><div class="line">            ans+=<span class="built_in">sin</span>(a/<span class="number">180.0</span>*PI)*r*r;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">double</span> outter=ans/<span class="number">2.0</span>;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%.3f\n"</span>,outter);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h3 id="D-A-Simple-Math-Problem"><a href="#D-A-Simple-Math-Problem" class="headerlink" title="D. A Simple Math Problem"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5974" target="_blank" rel="noopener">D. A Simple Math Problem</a></h3><p>比较 $simple$ ，看到 $LCM$ 想到 $GCD$ 。<br>原题即为$$(p,q)=1$$$$pg+qg=a$$$$pqg=b$$<br>可以发现必须有 $g=(a,b)$ 。最后输出 $pg,qg$ 即可。<br>交上去发现只有我 OLE，结果是忘记打 <code>!=EOF</code> 了。。。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"></div><div class="line"><span class="function">ll <span class="title">gcd</span><span class="params">(ll a,ll b)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (!b) <span class="keyword">return</span> a;</div><div class="line">    <span class="keyword">return</span> gcd(b,a%b);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    ll a,b;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%lld%lld"</span>,&amp;a,&amp;b)!=EOF) &#123;</div><div class="line">        ll g=gcd(a,b);</div><div class="line">        a/=g;b/=g;</div><div class="line">        ll tmp=a*a<span class="number">-4</span>*b;</div><div class="line">        <span class="keyword">if</span> (tmp&lt;<span class="number">0</span>) &#123;</div><div class="line">            <span class="built_in">puts</span>(<span class="string">"No Solution"</span>);</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        &#125;</div><div class="line">        ll x=<span class="built_in">sqrt</span>(tmp);</div><div class="line">        <span class="keyword">if</span> (x*x!=tmp) &#123;</div><div class="line">            <span class="built_in">puts</span>(<span class="string">"No Solution"</span>);</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> ((a+x)&amp;<span class="number">1</span>||a&lt;=x) &#123;</div><div class="line">            <span class="built_in">puts</span>(<span class="string">"No Solution"</span>);</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        &#125;</div><div class="line">        ll p=(a+x)/<span class="number">2</span>*g;</div><div class="line">        ll q=(a-x)/<span class="number">2</span>*g;</div><div class="line">        <span class="keyword">if</span> (p&gt;q) swap(p,q);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%lld %lld\n"</span>,p,q);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h3 id="A-Wrestling-Match"><a href="#A-Wrestling-Match" class="headerlink" title="A. Wrestling Match"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5971" target="_blank" rel="noopener">A. Wrestling Match</a></h3><p>其实我先写的 A 。。。但是写到一半感觉有点写不下去又看到 D 比较 simple 就去搞 D 了。。。简单的说就是从所给的已知好坏的点开始搜索。。。这些点搜索完了再搜索剩下的点。。。如果某个点不是已知点，并且不与其他点连边，那么它无法被分类。。。听说很多人卡题意卡了半天。。。我觉得我也说不出来准确的题意= =。。。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1010</span>;</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; eg[N];</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; good,bad;</div><div class="line"><span class="keyword">int</span> col[N];</div><div class="line"><span class="keyword">int</span> n,m;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> c)</span></span></div><div class="line">&#123;</div><div class="line">    col[x]=c;</div><div class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; Q;</div><div class="line">    Q.push(x);</div><div class="line">    <span class="keyword">while</span> (!Q.empty()) &#123;</div><div class="line">        <span class="keyword">int</span> u=Q.front();</div><div class="line">        Q.pop();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;eg[u].size();i++) &#123;</div><div class="line">            <span class="keyword">int</span> &amp;v=eg[u][i];</div><div class="line">            <span class="keyword">if</span> (col[v]==<span class="number">-1</span>) &#123;</div><div class="line">                col[v]=col[u]^<span class="number">1</span>;</div><div class="line">                Q.push(v);</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (col[v]==col[u]) &#123;</div><div class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m)!=EOF) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            eg[i].clear();</div><div class="line">        &#125;</div><div class="line">        good.clear();</div><div class="line">        bad.clear();</div><div class="line">        <span class="keyword">int</span> x,y;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">            <span class="keyword">int</span> u,v;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;u,&amp;v);</div><div class="line">            eg[u].push_back(v);</div><div class="line">            eg[v].push_back(u);</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">memset</span>(col,<span class="number">0xff</span>,<span class="keyword">sizeof</span>(col));</div><div class="line">        </div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;x;i++) &#123;</div><div class="line">            <span class="keyword">int</span> k;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;k);</div><div class="line">            col[k]=<span class="number">1</span>;</div><div class="line">            good.push_back(k);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;y;i++) &#123;</div><div class="line">            <span class="keyword">int</span> k;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;k);</div><div class="line">            col[k]=<span class="number">0</span>;</div><div class="line">            bad.push_back(k);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">int</span> f=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;x;i++) &#123;</div><div class="line">            <span class="keyword">if</span> (!bfs(good[i],<span class="number">1</span>)) &#123;</div><div class="line">                f=<span class="number">1</span>;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (f) &#123;</div><div class="line">            <span class="built_in">puts</span>(<span class="string">"NO"</span>);</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;y;i++) &#123;</div><div class="line">            <span class="keyword">if</span> (!bfs(bad[i],<span class="number">0</span>)) &#123;</div><div class="line">                f=<span class="number">1</span>;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (f) &#123;</div><div class="line">            <span class="built_in">puts</span>(<span class="string">"NO"</span>);</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="keyword">if</span> (col[i]==<span class="number">-1</span>) &#123;</div><div class="line">                <span class="keyword">if</span> (eg[i].size()==<span class="number">0</span>) &#123;</div><div class="line">                    f=<span class="number">1</span>;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span> (!bfs(i,<span class="number">0</span>)) &#123;</div><div class="line">                    f=<span class="number">1</span>;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (f) <span class="built_in">puts</span>(<span class="string">"NO"</span>);</div><div class="line">        <span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"YES"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>然后不知道搞啥。。。咸鱼了挺久。。。</p><h3 id="E-Aninteresting-game"><a href="#E-Aninteresting-game" class="headerlink" title="E. Aninteresting game"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5975" target="_blank" rel="noopener">E. Aninteresting game</a></h3><p>终于把E读懂感觉这不是sb题吗。。。题解重点讲的询问1一遍写对，询问2倒是想错了好多次。。。 OTZ<br>询问1 其实就是求 $\sum_{i=l}^{r} lowbit(i)$ 只要枚举 $lowbit$ 的值就行了。。。不过每次要把上一次重复的去掉一些。。。<br>询问2 我想的是可以把除了最后一段 0 的其它 0 的位置填成 1（见 Method One） 。。。不过这个操作建议看题解，写得更清晰，而且只用到了 $lowbit$ （见 Method Two）。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    ll n,q;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%lld%lld"</span>,&amp;n,&amp;q)!=EOF) &#123;</div><div class="line">        <span class="keyword">while</span> (q--) &#123;</div><div class="line">            <span class="keyword">int</span> op;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;op);</div><div class="line">            <span class="keyword">if</span> (op==<span class="number">1</span>) &#123;</div><div class="line">                ll l,r;</div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%lld%lld"</span>,&amp;l,&amp;r);</div><div class="line">                ll ans=<span class="number">0</span>,weigh=<span class="number">1</span>;</div><div class="line">                <span class="keyword">while</span> (weigh&lt;=r) &#123;</div><div class="line">                    ll tmp=r/weigh-(l<span class="number">-1</span>)/weigh;</div><div class="line">                    <span class="keyword">if</span> (tmp==<span class="number">0</span>) <span class="keyword">break</span>;</div><div class="line">                    ans-=tmp*(weigh&gt;&gt;<span class="number">1</span>);</div><div class="line">                    ans+=tmp*weigh;</div><div class="line"><span class="comment">//                    printf("TMP: %lld\nANS: %lld\n",tmp,ans);</span></div><div class="line">                    weigh&lt;&lt;=<span class="number">1</span>;</div><div class="line">                &#125;</div><div class="line">                <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,ans);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                ll x,ans=<span class="number">0</span>;</div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;x);</div><div class="line">                </div><div class="line">                <span class="comment">/***Method One***/</span></div><div class="line">                <span class="keyword">int</span> k=<span class="number">0</span>;</div><div class="line">                <span class="keyword">while</span> (((x&gt;&gt;k)&amp;<span class="number">1</span>)==<span class="number">0</span>) k++;</div><div class="line">                <span class="keyword">for</span> (;;k++) &#123;</div><div class="line">                    <span class="keyword">if</span> (((x&gt;&gt;k)&amp;<span class="number">1</span>)==<span class="number">0</span>) &#123;</div><div class="line">                        <span class="keyword">if</span> ((((x&gt;&gt;k)^<span class="number">1</span>)&lt;&lt;k)&lt;=n) ans++;</div><div class="line">                        <span class="keyword">else</span> <span class="keyword">break</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,ans+<span class="number">1</span>);</div><div class="line">                <span class="comment">/***Method One***/</span></div><div class="line">                </div><div class="line">                <span class="comment">/***Method Two***/</span></div><div class="line"><span class="comment">//                while (x&lt;=n) &#123;</span></div><div class="line"><span class="comment">//                    ans++;</span></div><div class="line"><span class="comment">//                    x+=x&amp;(-x);</span></div><div class="line"><span class="comment">//                &#125;</span></div><div class="line"><span class="comment">//                printf("%lld\n",ans);</span></div><div class="line">                <span class="comment">/***Method Two***/</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h3 id="F-Detachment"><a href="#F-Detachment" class="headerlink" title="F. Detachment"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5976" target="_blank" rel="noopener">F. Detachment</a></h3><p>想得不怎么清楚。。。天猫教我的。。。<br>肯定从小的开始乘，这个还是比较显然的，所以刚开始先生成 $2\times 3\times……\times k$ ，多出来一个小于 $k+1$ 的数，这时可以从后往前把一段数 +1 ，因为小的数贡献大，而且小的数如果 +1 就会和后面相同。不过这里又会有一个问题，就是剩下的数是 $k$ ，而前面只有 $k-1$ 个数。。。那这时就要取一个数和这个 $k$ 加起来变成一个新的数，那么很显然要取 $2$ （为什么？）（Hint：结果的倍数）<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MOD=<span class="number">1e9</span>+<span class="number">7</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX=<span class="number">1e5</span>;</div><div class="line">ll fac[MAX];</div><div class="line"></div><div class="line"><span class="function">ll <span class="title">fpow</span><span class="params">(ll x,ll n)</span></span></div><div class="line">&#123;</div><div class="line">    ll res=<span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span> (n) &#123;</div><div class="line">        <span class="keyword">if</span> (n&amp;<span class="number">1</span>) &#123;</div><div class="line">            res=res*x%MOD;</div><div class="line">        &#125;</div><div class="line">        x=x*x%MOD;</div><div class="line">        n&gt;&gt;=<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    fac[<span class="number">0</span>]=<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;MAX;i++) &#123;</div><div class="line">        fac[i]=fac[i<span class="number">-1</span>]*i%MOD;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> T;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">while</span> (T--) &#123;</div><div class="line">        ll n,ans;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;n);</div><div class="line">        <span class="keyword">if</span> (n==<span class="number">1</span>) &#123;</div><div class="line">            <span class="built_in">puts</span>(<span class="string">"1"</span>);</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        &#125;</div><div class="line">        ll x=<span class="built_in">sqrt</span>((n+<span class="number">1</span>)*<span class="number">2</span>);</div><div class="line">        <span class="keyword">if</span> (x*(x+<span class="number">1</span>)/<span class="number">2</span>&gt;n+<span class="number">1</span>) x--;</div><div class="line">        ll rem=n+<span class="number">1</span>-x*(x+<span class="number">1</span>)/<span class="number">2</span>;</div><div class="line">        <span class="keyword">if</span> (rem==x) &#123;</div><div class="line">            ans=fac[x]*fpow(<span class="number">2</span>,MOD<span class="number">-2</span>)%MOD*(x+<span class="number">2</span>)%MOD;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            ans=fac[x-rem]*fac[x+<span class="number">1</span>]%MOD*fpow(fac[x-rem+<span class="number">1</span>],MOD<span class="number">-2</span>)%MOD;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,ans);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hdu 5093 Battle ships 二分图</title>
      <link href="/blog/2016/10/26/hdu5093/"/>
      <content type="html"><![CDATA[<h3 id="Battle-ships"><a href="#Battle-ships" class="headerlink" title="Battle ships"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5093" target="_blank" rel="noopener">Battle ships</a></h3><p>做的时候能不能搜索想了半天。。。后来查了一下竟然是二分图经典模型。。。所以觉得应该记下来。。。</p><blockquote><p>题目大意：<br>在海上（*）放战舰，任意两个战舰不能出现在同一行或列，除非中间有冰山（＃）相隔。问最多放多少战舰。</p><p>解题思路：<br>现将行和列，以冰山（＃）为分隔，分割成多段。对于每一个可能放置的位置（*），将其所在的行和列的分段相连。表达的意思就是，这个点如果放置，那么相邻的同一区段（*、o）都不能再用。对<strong>按行分割</strong>和<strong>按列分割</strong>这两个点集做一次二分图匹配即可。<br><img src="http://img.blog.csdn.net/20141112003808399" alt=""></p></blockquote><p><a href="http://blog.csdn.net/wujysh/article/details/41017235" target="_blank" rel="noopener">参考资料</a></p><p>代码：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">2505</span>;</div><div class="line"><span class="keyword">struct</span> Edge &#123;</div><div class="line">    <span class="keyword">int</span> go,next;</div><div class="line">&#125; eg[N&lt;&lt;<span class="number">1</span>];</div><div class="line"><span class="keyword">char</span> mp[<span class="number">55</span>][<span class="number">55</span>];</div><div class="line"><span class="keyword">int</span> mx[<span class="number">55</span>][<span class="number">55</span>];</div><div class="line"><span class="keyword">bool</span> vis[N];</div><div class="line"><span class="keyword">int</span> res[N],last[N];</div><div class="line"><span class="keyword">int</span> tot;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">adde</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></div><div class="line">&#123;</div><div class="line">    eg[++tot].go=y;</div><div class="line">    eg[tot].next=last[x];</div><div class="line">    last[x]=tot;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=last[u];i;i=eg[i].next) &#123;</div><div class="line">        <span class="keyword">int</span> &amp;v=eg[i].go;</div><div class="line">        <span class="keyword">if</span> (!vis[v]) &#123;</div><div class="line">            vis[v]=<span class="number">1</span>;</div><div class="line">            <span class="keyword">if</span> (!res[v]||dfs(res[v])) &#123;</div><div class="line">                res[v]=u;</div><div class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T,n,m;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">while</span> (T--) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">        <span class="keyword">int</span> nx=<span class="number">0</span>,ny=<span class="number">0</span>;tot=<span class="number">0</span>;</div><div class="line">        <span class="comment">//nx为按行分割的点数,ny为按列分割的点数,tot为邻接表边数.</span></div><div class="line">        <span class="built_in">memset</span>(last,<span class="number">0</span>,<span class="keyword">sizeof</span>(last));</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>,mp[i]);</div><div class="line">            <span class="keyword">int</span> f=<span class="number">0</span>;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m;j++) &#123;</div><div class="line">                <span class="keyword">if</span> (mp[i][j]==<span class="string">'*'</span>) &#123;</div><div class="line">                    <span class="keyword">if</span> (!f) &#123;</div><div class="line">                        mx[i][j]=++nx;</div><div class="line">                        f=<span class="number">1</span>;</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        mx[i][j]=nx;</div><div class="line">                    &#125;</div><div class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (mp[i][j]==<span class="string">'#'</span>&amp;&amp;f==<span class="number">1</span>) &#123;</div><div class="line">                    f=<span class="number">0</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m;j++) &#123;</div><div class="line">            <span class="keyword">int</span> f=<span class="number">0</span>;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</div><div class="line">                <span class="keyword">if</span> (mp[i][j]==<span class="string">'*'</span>) &#123;</div><div class="line">                    <span class="keyword">if</span> (!f) &#123;</div><div class="line">                        adde(mx[i][j],++ny);</div><div class="line">                        f=<span class="number">1</span>;</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        adde(mx[i][j],ny);</div><div class="line">                    &#125;</div><div class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (mp[i][j]==<span class="string">'#'</span>&amp;&amp;f==<span class="number">1</span>) &#123;</div><div class="line">                    f=<span class="number">0</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">memset</span>(res,<span class="number">0</span>,<span class="keyword">sizeof</span>(res));</div><div class="line">        <span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=nx;i++) &#123;</div><div class="line">            <span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="keyword">sizeof</span>(vis));</div><div class="line">            <span class="keyword">if</span> (dfs(i)) ans++;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2016 ICPC 沈阳站游记</title>
      <link href="/blog/2016/10/24/2016shenyang_play/"/>
      <content type="html"><![CDATA[<h3 id="Before"><a href="#Before" class="headerlink" title="Before"></a>Before</h3><p>沈阳站我校一个名额。我队友一个是大四土木的学长（骆骆），一个是大四直系的学姐（小萌）。</p><h3 id="Oct-21"><a href="#Oct-21" class="headerlink" title="Oct 21"></a>Oct 21</h3><p>比赛前最后一次训练。因为骆骆要选修课考试，于是我和小萌学姐就两个人打一套比赛。当时想的是最后一次要放松一点，选的是2014年上海邀请赛。结果我们两个人史无前例的连A五次，最终六题银前啊！（虽然比赛一开始就WA了四次 ←_←）然后我们三个人就很开心的去吃了个晚饭~</p><p><img src="http://img.blog.csdn.net/20161024221324950" alt=""></p><h3 id="Oct-22"><a href="#Oct-22" class="headerlink" title="Oct 22"></a>Oct 22</h3><p>早上的飞机。老师不跟我们一起。安检的时候发现我包里有瑞士军刀。。。我一直放在包里根本不记得= =。。。还好我们到的比较早，然后我就去托运了。排队还没排到我就听到小萌学姐在叫我，她说喷雾也不让带，就放我包里一起托运了。。。不过并没有因为这些出什么大事~</p><p>抵达沈阳。那真是挺冷的。。。还好我穿的不少。。。打辆出租车，发现司机特别逗😂，最后还说你们大老远的来就是要拿金牌滴，我们一边笑一边跟他答话。在北门照了几张相就去了体育馆，跟老师汇合一起报到。然后去找食堂，发现就这么几餐饭竟然印了三个不一样的地方。。。我们没有地图<del>后来吃完饭才发现参赛手册里显然有啊</del>只能走一会儿就问路人，还有几个根本不知道“餐饮中心”的。。。问了好多次终于找到了一个地方。。。结果是“学生城食堂”。。。然后又开始找。。。又找到一个地方结果是“培训食堂”<del>妈的神经病吧</del>。。。最后又找了一个人问，他说“我带你们去吧”。于是我们终于找到了“餐饮中心”。。。结果过时间了，里面早就收摊了。。。老师交涉无果我们就去了附近的“培训食堂”。。。买饭票啥的搞了半天终于吃上饭了。。。心好累。。。</p><p>热身赛。一坐下我就感觉前面这人有点像马天猫，QQ上问了他一下，果然是233333 开幕式讲话，这老师总说 A西M，挺逗的。。。然后劼爷一上去就开始大搞膜法，搞得整个体育馆乌烟瘴气，大家无不习习蛤蛤赶去水群😂。NEU的热身赛就正式多了，开始前不能开显示屏，每人一份题目都是封好的。A题没有输入，请从题目描述的十个数中输出一个数。。。不知道是不是要压力测试。。。反正提交特别多，我随便交了一个输出第一个数的过了好久才看到结果。。。然后听到旁边说 1923 就是东北大学的建校年份，参赛手册上有。。。改了改就过了，没想到这题还是有点意义的。。。B题裸的矩形面积并，C题求任意两个后缀的最长公共前缀，D题不怎么懂。。。骆骆敲B的小红书板子，我和小萌想C。。。小萌说是不是有什么前缀数组还是后缀数组，至此我已经知道它能用后缀数组了，但是我好久没看了。。。当时查了一下似乎关键词不太对，一直查不到。。。二分+hash我也想到了，但是我并不知道这个应该怎么hash。。。我还查了能不能用SAM做，因为这个月有看，但是还是没查到。。。然后我就弃疗了。。。过了很久我上了个厕所回来他们正准备交C题的暴力，因为想试试TLE。结果交了一遍WA了😂，然后改了一发AC了。。。三脸懵逼。。。后来B题板子敲完了看了半天改了半天都不知道哪里不对。。。于是拿了两个球就结束了，没能集齐ACM三色。。。</p><p>赛后。骆骆又从东北大学找出来一个同学<del>无敌了哪儿都有同学</del>，然后他带我们去吃了个饭，吃了一些东北特色的，他还装作上厕所结了账<del>这位同学真的很好</del>，感觉乱炖和锅包肉还是挺好的。吃完饭我们知道他是日语专业的又聊了半天 hhhhhhh 回到宾馆老师先来看了看我们聊了一会儿，然后我们就开始跟这位很好的同学玩了好久UNO hhhhhhh 等骆骆送他走了之后我们开始讨论比赛的事情，我先让他们想了好多我交代码之前要提醒我什么然后记了下来。。。最后骆骆表示今天沟通其实挺有效的，明天拿铜还是可以的。本次讨论圆满结束。估计坐飞机、打比赛太累了，关灯没一会儿我就睡着了。。。</p><h3 id="Oct-23"><a href="#Oct-23" class="headerlink" title="Oct 23"></a>Oct 23</h3><p>早上。宾馆吃饭见到了初中同学，在体育馆外面等的时候又见到了高中同学<del>毕竟六年机房不是白混的</del>。虽说就在外面等了十分钟但是毕竟风很大啊。。。这个不是很满意。。。</p><p>正式比赛。还是我先调配置，等我把题拆了翻了翻已经有人把A过了。骆骆告诉我做法，我敲完让他看了看，1Y。榜上又出了B，题目很短，我自己读了自己敲，大家稍微看了看就交了，也1Y。至此还算非常顺利<del>今天看了看其实那时候排名100+</del>，然后就开始非常正常的三人读题环节。没多久榜上又出了Ｅ，是一个跟完全子图有关的题，骆骆觉得很有可能跟合肥一样就是搜索，然后我就让给他敲了。我和小萌想另一题Ｃ，一个前两项求递推式第ｎ项的题目。小萌说是不是矩阵快速幂，我一口否定了，觉得应该是个公式题。骆骆敲完E说过不了样例，但是我们没有管他，因为我觉得C肯定能做。再后来换我敲E，敲得还算顺利，然后在我意料之中的TLE了。。。期间我听到了右前方ZJU的队伍说bitset优化但是我没用也没说。。。OTZ 后来读了读其它题感觉还是CE可做，继续想CE。。。封榜以后骆骆说就是矩阵快速幂，然后我开始敲。敲的差不多的时候他也把转移矩阵推出来了，我加进去但是过不了样例。找了一会儿发现我 <code>operator *</code> 最后竟然没有 <code>return c;</code>OTZ。。。 但是还是过不了第二个样例。。。又找了一会儿发现转移矩阵虽然一开始第一行只有三个非 0 元素，但是快速幂以后肯定要一整行拿去乘。。。改了以后又跟我之前的一个暴力测了测，都对了就交了，还是1Y，但是已经261分钟了。。。然后我们开始不停地改E，但是到最后也没过去。。。惨呐= =</p><p>赛后。老师马上就进来找我们了，跟我们说就算到了最后一刻该交的还是要交的。我们说想不出来了，她就说让我们问问旁边的队伍，结果问了问E就是搜索。。。看他代码感觉写得比我还挫。。。但是后来发现我竟然用set存了搜索序列。。。太tm挫了。。。然后我们情绪比较低落。。。把一句话题解听完就走了。。。</p><p>南湖公园。我们先回宾馆休息了一会儿，本来小萌说要玩密室，但是我感觉三四个人实在没啥意思。。。后来老师问了问南湖公园还没停业，然后我们就一起去逛南湖公园了。走走看看，心情还是会变好的。老师给我们拍了好多照(hei)片(zhao) 。。。到最深处有一个轮滑场，然后我和小萌一不小心玩到了六点多😂</p><p>宾馆<del>我的床上！</del>。聊了好多好多。。。两点多才睡。。。</p><h3 id="Oct-24"><a href="#Oct-24" class="headerlink" title="Oct 24"></a>Oct 24</h3><p>早(shang)上(wu) 。一觉睡到九点多。。。还好老师打了个电话😂 要不然就赶不上飞机了。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>队友想得都对。。。我狂被全场题坑。。。<br>我之所学很有偏向。。。而且我很不喜欢字符串题= =。。。线性代数真的不太好= =。。。搜索真的不太会写= =。。。bitset 虽然学过但是不会用了有屁用啊<br>图论真的懂得太少。。。看到一个问题根本不知道到底是有常用的算法还是xjb搜。。。<br><strong>借鉴</strong>：热身赛的时候可以测试评测机1s内到底能做多少次简单运算（一般指整数加乘）<br><strong>合作</strong>：不成熟的想法，甚至是偶尔听到的也可以跟队友交流<br><strong>自信</strong>：觉得有可能的想法完全可以多想一会儿，即使是被队友一口否定的想法<del>我毕竟还是太弱</del><br>。。。比赛时情绪要稳定，平时也不要老是剧烈变化。。。<br>提交前的注意事项记下来还是挺有用的，这次的三题都是1Y。<br>最后表示不喜欢这种比赛。。。你让只用了10分钟做了两道一眼题的队伍怎么想呢？</p>]]></content>
      
      
        <tags>
            
            <tag> Life </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2016 CCPC 合肥站游记</title>
      <link href="/blog/2016/10/18/2016hefei_play/"/>
      <content type="html"><![CDATA[<h3 id="Before"><a href="#Before" class="headerlink" title="Before"></a>Before</h3><p>合肥站我校两个名额。我队友一个是大四土木的学长（骆骆），一个是同级的大神（耀耀）。另一个队是女队。因为和大连撞时间了，所以两个老师各去一边。</p><h3 id="Oct-15"><a href="#Oct-15" class="headerlink" title="Oct 15"></a>Oct 15</h3><p>早上的高铁。老师定的地铁门口集合  但是地铁门太多大家没在一起耽误了一会儿。。。然后错过了一班地铁等了十分钟。。。到高铁站的时候时间已经很紧了  取票又出了点小状况  最后我们只能小跑冲过去检票了= =。。。还好大家都赶上了~</p><p>抵达合肥。直接打两辆出租车到了磬苑宾馆  大厅里报完到发现衣服有点挫。。。然后大家对计蒜客一个队只发一盒便利贴表示不解。。。休整了一下出去吃饭  找研究生食堂还摸错路了  好像大家都不太会看地图了😂。吃完午饭发现挺早的  然后大家就合照，逛学校，玩操场旁边的<del>老年人</del>健身器材玩得不亦乐乎。</p><p>热身赛。热身赛之前说提前一个半小时，结果又推迟了半个小时。。。开幕式讲话倒还算简短  总之比赛终于开始了  我们发现南大的 sadfrog 在比赛开始前两分钟到了赛场  简直神准时。。。题册竟然才一份  我们只好一起看了看题目  AB超级水题  C虽说没听说过但是似乎自带了一份题解。。。这时候发现我们的 pc^2 连不上主机。。。不过旁边队也连不上。喊了好几次志愿者以后终于出现了一个老师帮我们搞定了。。。然后骆骆A题1Y继续写B题  我热身赛不太喜欢敲敲敲就在旁边看C题  看懂了发现就是求一个整数行列式取模  感觉挺水的。。。看了几眼骆骆  我发现他B题写的有点烦。。。（期间旁边那队突然能上网了  3题一起交  全都1Y  瞬间感觉超强。。。）后来他自己也想不太清楚怎么写了就换我上   最大的感觉就是键盘好不爽啊。。。回车很大所以反斜杠上移了一行所以退格就特别小。。。我写的还算快  交了一发WA了  发现没输出平局改了再交就过了。。。于是又开始想第三题  我刚开始想的就是模拟手算的过程  每次按第一行展开  但是仔细一想每次划掉一行一列根本实现不了啊。。。那大概就是高斯消元了  不是很确定就上网查了一下  发现都是高斯消元。。。开始慢速写C  好久没写高斯消元还真的不太会  行列式值改变又想了好久。。。（期间admin提示明天都是中文题面  现场好像反应挺大的  不过我们没什么感觉  骆骆还表示没有阅读优势了😂）WA了两发  结束时间也到了  感觉不AK也好然后就走了。。。</p><p>热身结束。去找合工大的同学玩呀~他们星期六竟然金工实习一整天2333333  他们学校里面有三个奶茶店我们怎么一个都没有呢= =  奶茶店里面还有个三阶魔方和移棱魔方  好久没玩反正 OLL 是不太会了。。。当然复原三阶还是可以哒  移棱知道怎么回事了也就能复原了。她找了个没去过的店请我吃饭  然而有个菜跟我想的很不一样啊😂  另外两个菜一个好咸一个好淡= =</p><p>回到宾馆。大家窝到一个房间里玩杀人游戏233333  回自己房间以后跟大佬聊起来热身赛C题没过  他说他也没过因为交换两行没乘 -1。我发现我也是这样！。。。他说他要铁了  我想肯定是不可能的  <del>结果后来金了</del>。。。这之后我们队聚了一下，骆骆说了大概的战术，最后总结说拿铜应该问题不大，一定要超过石河子大学！<del>因为热身被他们压了</del>再后来听说统一换了键盘还是挺开心的</p><p>入夜。睡不着翻了挺久。。。毕竟第一次现场赛。。。手脚又是捂着好热伸出来好冷。。。于是开始数绵羊。。。又翻了几次睡着了</p><h3 id="Oct-16"><a href="#Oct-16" class="headerlink" title="Oct 16"></a>Oct 16</h3><p>早上。我和耀耀醒得比闹钟早  躺床上等闹钟。。。结果发现交易群里好多人说因为铁人三项封路过不来了。。。我们还是先吃了饭然后收拾一下到体育馆门口  确认推迟以后我们就奔向教育超市辣~</p><p>超市。我们三个人开始买买买  我还买了个垃圾耳机。结账的时候骆骆正好  我和耀耀多拿了好多😂  我们拿出了点零食  最后大家都是60 61  还让后面的一位好心人帮我们刷了两毛😂  表示感谢。至此  三张校园卡被彻底掏空233333</p><p>体育馆。我们到的时候反正还没到10点  然后就坐在看台上刷群充电  志愿者端茶倒水统计人数。。。</p><p>。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。<br>。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。<br>。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。<br>。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。<br>。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。</p><p>比赛。11点多，终于可以入场了。。。比赛开始  我调系统时间  配置cb  登录pc^2  开榜单  登录print  然后把题册倒着翻了一遍  竟然没什么想法= =。。。懵逼了一会儿看到榜上有人过了I  其实我刚才想的就是这题  但是根本没有想清楚。。。xjb敲了一通就把机器给骆骆用纸笔推了。。。推完了继续写  其实就是二进制位乱搞一下  测了几次直接交了  1Y。但是已经46分钟了  我们对面的队和旁边那队早就拿到气球了。。。跟榜开H  骆骆想敲线段树  我仔细一看就是个暴力。。。题目还告诉你了把所有答案存下来。。。还是测了几次直接交  WA了。。。我再看了看题发现搞错了  题目里写</p><blockquote><p>对于每组数据输出M+1行，前M行……</p></blockquote><p>我以为是那种前T-1个case之后要有空行的。。。然后我们问了问admin少一个空行是PE还是WA他说是WA。于是我把<code>if (T) puts(&quot;&quot;);</code>这整句话删掉了。。。删掉了！然后还交了一遍！当然WA了。。。至此士气低迷  对面旁边都两个球了。。。我们只好打印了   骆骆看我打印的代码指出了一个逻辑上的问题  然后我们又交了一次当然还是WA。。。于是我又去读题  然后怒捏了骆骆的大腿惨叫一声“你们被我坑死了！”加上了<code>puts(&quot;&quot;);</code>果然AC了。。。恭喜我贡献了三发毫无意义的WA[蜡烛]。。。这时候耀耀早就把E想完了（我傻逼太久。。。）  跟我讲了讲  就是两个数减一减就只跟两列有关了  我感觉还算好写的  不过写的时候发现必须要先枚举前两列的情况才能递推  根本没什么机灵的想法。。。直接把第一个数字0~4分类讨论了。。。测了很多次再交  秒WA。。。我再看了看  发现没有处理 n=1 的情况  改的还算快  交了就过了。。。这个WA虽说不是我坑逼  但也是有点可惜的。。。看了看榜A和C的Yes/Sumbit 都差不多（凭感觉，因为没翻到。。。）  我感觉C很不可做  就拉着他们看A  耀耀表示不懂图论  然后骆骆就让他看C。过了好久好久  我们还是没搞出A  耀耀先跟骆骆讲了一遍C的思路  骆骆觉得能行  然后换我听  先讲了一通路径啥的  没怎么懂。于是耀耀抽象了一下  就是说要找到根向下的所有路径上的第一个 1 然后看它前面到底有没有 0 。我听的有点懵逼。。。第一个 1 前面除非没有  不是肯定全 0 吗？？然后我们又讨论了一下  终于得出只要判断跟根直接相连的那些边就行辣！然后我又开始敲敲敲  不过我发现一个问题  那就是 0 的个数和 1 的个数真的都有用？？因为一般总是有一个没用的。耀耀表示都有用  骆骆好像不怎么认同  我就停下来等了他们一下  因为都有用的话要多写不少代码。。。后来骆骆终于确定了 0 的个数没用  我很快写完了  骆骆告诉我 Boy 后边没加 s 然后我们测测测。交上去的时候耀耀站在我旁边  我们三个就瞪着屏幕  然后弹出来一个绿色的Yes！今天又一次1Y  激动啊  我直接抓着耀耀的手腕在那儿晃😂  225分钟了  其它题估计不行了  又讨论了A一会儿就封榜了  还是没想法。。。骆骆表示还不如直接敲个大暴力  我不是很懂这个到底怎么暴力只能让他自己敲了。。。最后敲完了不过没调出来。。。</p><p>赛后。老师来问我们去不去吃晚饭  我们都没什么兴趣就留在赛场。。。听说大连有4个队A穿了  有点震惊。。。企业宣讲以后就是颁奖辣  竟然先颁捧杯的 ←_← 而且颁的太快我都来不及照相。。。银牌铜牌一起报了  等了半天终于报到我们  校名也念错  队名也念错  囧= =  反正超越石河子大学了。。。颁奖终于完了  对面的也是铜  旁边的夺金了  大家都挺友好的  互相帮忙拍了合影。我本来还想面基lxc巨和羁绊妹子的  但是发现他们已经走了。。。可惜。。。</p><p>=========2018/02/21=========</p><p>其实jibancanyang根本不是妹子，我还是太天真了！我说当时怎么没看到他们队有妹子呢 ←_←</p><h3 id="解题报告"><a href="#解题报告" class="headerlink" title="解题报告"></a>解题报告</h3><p>写了一部分，但是听说按照惯例重现赛前不要出现解题报告（虽然都是水题。。。）重现之后应该会发的，代码当然是美化过的😂</p><p>=========2016/02/22=========</p><p><a href="https://smlight.github.io/blog/2017/02/18/2016ccpc_hefei/">解题报告</a></p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>队友很给力，我很penalty。。。配合还算可以<br>我写程序问题还是太多，而且比赛的时候总是写不出来优雅的写法，都是傻逼一样的一大堆 if 分类讨论。。。我觉得可以从交之前再读一遍输入输出格式做起。。。<br>整个队都不太会图论。。。直接导致A题完全想偏。。。知道的还是要多一点，不会写反正有板子</p>]]></content>
      
      
        <tags>
            
            <tag> Life </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hdu 5727 Necklace 全排列+二分图</title>
      <link href="/blog/2016/10/13/hdu5727/"/>
      <content type="html"><![CDATA[<h3 id="Necklace"><a href="#Necklace" class="headerlink" title="Necklace"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5727" target="_blank" rel="noopener">Necklace</a></h3><p>题意：要用ｎ个阳石和ｎ个阴石来串一个项链（环），规定阳石旁边只能是阴石，阴石旁边只能是阳石，现在有 ｍ 对影响关系，x 号阳石与 y 号阴石相邻会使阳石变暗（照样可以用），问串这个项链最少让几个阳石变暗</p><p>题解：一看就是两个点集之间连边，瞬间想到二分图。但是后面其实并不好想。。。</p><p>首先发现 n 很小，即使是全排列的复杂度也能承受，那么我们可以枚举阴石的每一种排列，并且把<strong>阳石编号</strong>和<strong>阳石摆放位置</strong>作为两个点集匹配。用 $a[i]$ 表示第 $i$ 个阴石的编号，用 $g[i][j]$ 表示 $i$ 号阳石能否放在第 $j$ 个位置，这时就要考虑第 $i$ 个阴石和第 $i+1$ 个阴石对第 $i$ 个阳石是否有影响了，把没影响的连边，做一次二分图最大匹配，用 n-最大匹配 更新答案即可。<br>复杂度为 $O(N!\times N^{2})$ ，很容易TLE。。。<br>于是去查了查，发现有1个算法优化和2个常数优化。。。</p><ol><li>在环的意义下，其实只有 $(n-1)!$ 种排列，比如：<br><code>1  2  3 ... n</code><br><code>n  1  2 ... n-1</code><br><code>n-1  n  1 ... n-2</code><br>这几种排列的答案一定是相等的</li><li>ans=0 时已经找到最优解，可以直接退出</li><li>使用 <code>next_permutation()</code> 会比递归形式更快。</li></ol><p>加了这些优化以后跑得飞快，只要400+ms。。。代码：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">12</span>;</div><div class="line"><span class="keyword">int</span> a[N],b[N],link[N];</div><div class="line"><span class="keyword">int</span> g[N][N],mp[N][N];</div><div class="line"><span class="keyword">bool</span> used[N];</div><div class="line"><span class="keyword">int</span> n,m,ans;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> v=<span class="number">1</span>;v&lt;=n;v++)</div><div class="line">        <span class="keyword">if</span> (g[u][v]&amp;&amp;!used[v]) &#123;</div><div class="line">            used[v]=<span class="literal">true</span>;</div><div class="line">            <span class="keyword">if</span> (link[v]==<span class="number">-1</span>||dfs(link[v])) &#123;</div><div class="line">                link[v]=u;</div><div class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">hungary</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</div><div class="line">    <span class="built_in">memset</span>(link,<span class="number">-1</span>,<span class="keyword">sizeof</span>(link));</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++) &#123;</div><div class="line">            g[i][j]=<span class="number">0</span>;</div><div class="line">            <span class="keyword">if</span> (j==n) &#123;</div><div class="line">                <span class="keyword">if</span> (!mp[i][a[j]]&amp;&amp;!mp[i][a[<span class="number">1</span>]]) g[i][j]=<span class="number">1</span>;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">if</span> (!mp[i][a[j]]&amp;&amp;!mp[i][a[j+<span class="number">1</span>]]) g[i][j]=<span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">        <span class="built_in">memset</span>(used,<span class="number">0</span>,<span class="keyword">sizeof</span>(used));</div><div class="line">        <span class="keyword">if</span> (dfs(i)) res++;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m)!=EOF) &#123;</div><div class="line">        <span class="keyword">if</span> (!n||!m) &#123;</div><div class="line">            <span class="built_in">puts</span>(<span class="string">"0"</span>);</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) a[i]=i;</div><div class="line">        <span class="built_in">memset</span>(mp,<span class="number">0</span>,<span class="keyword">sizeof</span>(mp));</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">            <span class="keyword">int</span> x,y;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</div><div class="line">            mp[x][y]=<span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        ans=n;</div><div class="line">        <span class="keyword">do</span> &#123;</div><div class="line">            ans=min(ans,n-hungary());</div><div class="line">            <span class="keyword">if</span> (!ans) <span class="keyword">break</span>;</div><div class="line">        &#125; <span class="keyword">while</span> (next_permutation(a+<span class="number">2</span>,a+n+<span class="number">1</span>));</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hdu 5875 Function ST+二分</title>
      <link href="/blog/2016/10/11/hdu5875/"/>
      <content type="html"><![CDATA[<h3 id="Function"><a href="#Function" class="headerlink" title="Function"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5875" target="_blank" rel="noopener">Function</a></h3><p>引理：<br>我们称 $X\ge M$ 时 $X\ mod\ M$ 为一次有效的取模，则 $X$ 在 $\lceil log_{2}X\rceil$ 次有效的取模后一定变为 0 。<br>简要说明：<br>考虑最坏情况，取 $M=\lfloor\frac{X}{2}\rfloor+1$ ，$X-&gt;\lfloor\frac{X-1}{2}\rfloor$<br>（当 $M’&gt;M$ 或 $M’&lt;M$ 时，$X$ 都会变得更小）</p><p>题解：<br>考虑到 $a[l]$ 有效取模次数是 $log$ 级别的，所以只需要快速找出下一次有效的取模<br>即，每次寻找不大于当前数的最靠左的数<br>可以二分右端点，并询问区间内最小的数<br>使用ST维护，预处理 $O(NlogN)$ ，询问 $O(1)$<br>取模 $O(logX)$ 次，二分 $O(logN)$ 次，rmq $O(1)$ ，每个case复杂度为 $O(M*logX*logN)$<br>ST好久没写。。。可能失败的二分也好久没写。。。T了好多好多次。。。代码：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100010</span>;</div><div class="line"><span class="keyword">int</span> st[N][<span class="number">25</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">st_init</span><span class="params">(<span class="keyword">int</span> n)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;(<span class="number">1</span>&lt;&lt;i)&lt;=n;i++)</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j+(<span class="number">1</span>&lt;&lt;i)<span class="number">-1</span>&lt;=n;j++)</div><div class="line">            st[j][i]=min(st[j][i<span class="number">-1</span>],st[j+(<span class="number">1</span>&lt;&lt;(i<span class="number">-1</span>))][i<span class="number">-1</span>]);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">st_query</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> k=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> ((<span class="number">1</span>&lt;&lt;(k+<span class="number">1</span>))&lt;=r-l+<span class="number">1</span>) k++;</div><div class="line">    <span class="keyword">return</span> min(st[l][k],st[r-(<span class="number">1</span>&lt;&lt;k)+<span class="number">1</span>][k]);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">bsearch</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> lim)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> res=r+<span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span> (l&lt;=r) &#123;</div><div class="line">        <span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> (st_query(l,m)&gt;lim) l=m+<span class="number">1</span>;</div><div class="line">        <span class="comment">//区间最小值大于当前值，即区间所有数大于当前值</span></div><div class="line">        <span class="keyword">else</span> r=m<span class="number">-1</span>,res=m;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T,n,m;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">while</span> (T--) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;st[i][<span class="number">0</span>]);</div><div class="line">        st_init(n);</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;m);</div><div class="line">        <span class="keyword">while</span> (m--) &#123;</div><div class="line">            <span class="keyword">int</span> l,r;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;l,&amp;r);</div><div class="line">            <span class="keyword">int</span> res=st[l++][<span class="number">0</span>];</div><div class="line">            <span class="keyword">while</span> (l&lt;=r&amp;&amp;res) &#123;</div><div class="line">                l=bsearch(l,r,res);</div><div class="line">                <span class="keyword">if</span> (l&lt;=r) &#123;</div><div class="line">                    res%=st[l++][<span class="number">0</span>];</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,res);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2016 东北四省赛 不科学の题解</title>
      <link href="/blog/2016/10/07/2016%E4%B8%9C%E5%8C%97%E5%9B%9B%E7%9C%81%E8%B5%9B/"/>
      <content type="html"><![CDATA[<p>10.6 hdu有重现赛，我们两个人打，ACE当然很快就过了。H我想的方向有点不对，我一直在推NAND（与非）的性质，比如说交换律啊结合律啊。。。然后队友突然就想到了，但她不会写<br>我写和调估计用了一个小时还WA了一次。。。Q巨半小时不到1Y。。。OTZ<br>过了四题以后不知道做哪个。。。我看F过了好多人，我以为就是很简单的记子树size然后每次询问每个点更新到root，就跟队友说我自己写。然后她就去看D，问了问没来的队友，远程一眼秒了，就是离散化以后搜索一下。。。但是我们三个都感觉写不出来就直接没搞。。。<br>F写了挺久的，然后TLE了。。。后面就知道没戏了。。。直接去查题解改了改。。。</p><h3 id="Minimum’s-Revenge"><a href="#Minimum’s-Revenge" class="headerlink" title="Minimum’s Revenge"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5922" target="_blank" rel="noopener">Minimum’s Revenge</a></h3><p>模拟一下 kruskal 算法的过程可以发现，取的一定都是 (1,i)<br>比如： (2,3) 这条边权值为 6 但是 2 和 3 在之前就已经被加进最小生成树里面了。<br>所以答案即为 $\sum_{i=2}^{n}i$，求和就是 $\frac{(n+2)(n-1)}{2}$ 。</p><h3 id="Mr-Frog’s-Problem"><a href="#Mr-Frog’s-Problem" class="headerlink" title="Mr. Frog’s Problem"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5924" target="_blank" rel="noopener">Mr. Frog’s Problem</a></h3><p>$$\frac{C}{D}+\frac{D}{C}=\frac{1}{t}+t$$ $$\frac{D}{C}=t\le1\ 时，答案递减；\frac{D}{C}=t\ge1\ 时，答案递增$$ $$A\le C,D\le B\ ，t=\frac{B}{A}\ or\ \frac{A}{B}\ 时，答案最大$$</p><h3 id="Coconuts"><a href="#Coconuts" class="headerlink" title="Coconuts"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5925" target="_blank" rel="noopener">Coconuts</a></h3><p>题目中所给的 r 和 c 都非常大，但是坏点的数量 n 却非常小，所以应该想到用离散化【然而我又没有ˊ_&gt;ˋ<br>据说网格图的离散化至少有三种。。。于是我挑了一种看起来比较优雅的学了学。。。<br>考虑一张网格图中间有一个坏点，坐标为 $(X,Y)$ ，则图在 $x$ 这一维被分为三个部分<br>如果用半开区间表示：$[1,X),[X,X+1),[X+1,r+1)$<br>可以发现只要用当前区间的右端点减去上一个区间的右端点就能得到当前区间的长度<br>这个做法就是基于这种思想的，代码（这次加了很多注释）：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> lson rt,l,m</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rson m+1,r</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">205</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> dx[]=&#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">-1</span>&#125;;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> dy[]=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">0</span>&#125;;</div><div class="line"><span class="keyword">int</span> mp[N&lt;&lt;<span class="number">1</span>][N&lt;&lt;<span class="number">1</span>],vis[N&lt;&lt;<span class="number">1</span>][N&lt;&lt;<span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> x[N],y[N],vx[N&lt;&lt;<span class="number">1</span>],vy[N&lt;&lt;<span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> T,n,r,c;</div><div class="line"></div><div class="line"><span class="function">ll <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (vis[x][y]||mp[x][y]) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    vis[x][y]=<span class="number">1</span>;</div><div class="line">    <span class="comment">//右端点相减得到长度,相乘即为格子数 </span></div><div class="line">    ll res=<span class="number">1L</span>L*(vx[x]-vx[x<span class="number">-1</span>])*(vy[y]-vy[y<span class="number">-1</span>]);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++) &#123;</div><div class="line">        <span class="keyword">int</span> xx=x+dx[i],yy=y+dy[i];</div><div class="line">        <span class="keyword">if</span> (xx&lt;<span class="number">1</span>||yy&lt;<span class="number">1</span>||xx&gt;r||yy&gt;c) <span class="keyword">continue</span>;</div><div class="line">        res+=dfs(xx,yy);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;=T;t++) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;r,&amp;c,&amp;n);</div><div class="line">        <span class="keyword">int</span> cntx=<span class="number">0</span>,cnty=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x[i],&amp;y[i]);</div><div class="line">            vx[cntx++]=x[i];</div><div class="line">            vx[cntx++]=x[i]+<span class="number">1</span>;</div><div class="line">            vy[cnty++]=y[i];</div><div class="line">            vy[cnty++]=y[i]+<span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">/****************************</span></div><div class="line">        **插入边界,保证最左边的坏点左边的格子会被统计,右上下同理</div><div class="line">        ****************************/</div><div class="line">        vx[cntx++]=<span class="number">1</span>;</div><div class="line">        vx[cntx++]=<span class="number">2</span>;</div><div class="line">        vx[cntx++]=r;</div><div class="line">        vx[cntx++]=r+<span class="number">1</span>;</div><div class="line">        vy[cnty++]=<span class="number">1</span>;</div><div class="line">        vy[cnty++]=<span class="number">2</span>;</div><div class="line">        vy[cnty++]=c;</div><div class="line">        vy[cnty++]=c+<span class="number">1</span>;</div><div class="line">        <span class="comment">/****************************/</span></div><div class="line">        sort(vx,vx+cntx);</div><div class="line">        sort(vy,vy+cnty);</div><div class="line">        cntx=unique(vx,vx+cntx)-vx;</div><div class="line">        cnty=unique(vy,vy+cnty)-vy;</div><div class="line">        <span class="built_in">memset</span>(mp,<span class="number">0</span>,<span class="keyword">sizeof</span>(mp));</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="comment">//离散化并标记坏点 </span></div><div class="line">            <span class="keyword">int</span> ix=lower_bound(vx,vx+cntx,x[i])-vx+<span class="number">1</span>;</div><div class="line">            <span class="keyword">int</span> iy=lower_bound(vy,vy+cnty,y[i])-vy+<span class="number">1</span>;</div><div class="line">            <span class="comment">//此时vx[ix]-vx[ix-1]=1</span></div><div class="line">            mp[ix][iy]=<span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//origin_r=r</span></div><div class="line">        r=lower_bound(vx,vx+cntx,r)-vx+<span class="number">1</span>;</div><div class="line">        c=lower_bound(vy,vy+cnty,c)-vy+<span class="number">1</span>;</div><div class="line">        <span class="comment">//此时vx[0]=1,vx[r]=origin_r+1</span></div><div class="line">        <span class="comment">//很巧妙的处理,vy同理 </span></div><div class="line">        <span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="keyword">sizeof</span>(vis));</div><div class="line">        <span class="built_in">vector</span>&lt;ll&gt; ans;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=r;i++)</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=c;j++) &#123;</div><div class="line">                ll res=dfs(i,j);</div><div class="line">                <span class="keyword">if</span> (res) ans.push_back(res);</div><div class="line">            &#125;</div><div class="line">        sort(ans.begin(),ans.end());</div><div class="line">        <span class="keyword">int</span> tot=ans.size();</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d:\n%d\n"</span>,t,tot);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;tot;i++)</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%lld%c"</span>,ans[i],i==tot<span class="number">-1</span>?<span class="string">'\n'</span>:<span class="string">' '</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h3 id="Mr-Frog’s-Game"><a href="#Mr-Frog’s-Game" class="headerlink" title="Mr. Frog’s Game"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5926" target="_blank" rel="noopener">Mr. Frog’s Game</a></h3><p>玩过连连看的都知道吧。。。就是判断一下周围每条边上有没有相等的，再判断一下有没有相邻的相等的。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> lson rt,l,m</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rson m+1,r</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> T,n,m;</div><div class="line"><span class="keyword">int</span> a[<span class="number">40</span>][<span class="number">40</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">row</span><span class="params">(<span class="keyword">int</span> i)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++)</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k=j+<span class="number">1</span>;k&lt;=m;k++)</div><div class="line">            <span class="keyword">if</span> (a[i][j]==a[i][k]) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">col</span><span class="params">(<span class="keyword">int</span> j)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k=i+<span class="number">1</span>;k&lt;=n;k++)</div><div class="line">            <span class="keyword">if</span> (a[i][j]==a[k][j]) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">adj</span><span class="params">(<span class="keyword">int</span> n,<span class="keyword">int</span> m)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++) &#123;</div><div class="line">            <span class="keyword">if</span> (i&gt;<span class="number">1</span>&amp;&amp;a[i][j]==a[i<span class="number">-1</span>][j]) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">            <span class="keyword">if</span> (i&lt;n&amp;&amp;a[i][j]==a[i+<span class="number">1</span>][j]) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">            <span class="keyword">if</span> (j&gt;<span class="number">1</span>&amp;&amp;a[i][j]==a[i][j<span class="number">-1</span>]) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">            <span class="keyword">if</span> (j&lt;m&amp;&amp;a[i][j]==a[i][j+<span class="number">1</span>]) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">        &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;=T;t++) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++)</div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i][j]);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: "</span>,t);</div><div class="line">        <span class="keyword">if</span> (row(<span class="number">1</span>)||row(n)) &#123;</div><div class="line">            <span class="built_in">puts</span>(<span class="string">"Yes"</span>);</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (col(<span class="number">1</span>)||col(m)) &#123;</div><div class="line">            <span class="built_in">puts</span>(<span class="string">"Yes"</span>);</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (adj(n,m)) &#123;</div><div class="line">            <span class="built_in">puts</span>(<span class="string">"Yes"</span>);</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">puts</span>(<span class="string">"No"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h3 id="Auxiliary-Set"><a href="#Auxiliary-Set" class="headerlink" title="Auxiliary Set"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5927" target="_blank" rel="noopener">Auxiliary Set</a></h3><p>一个被删除的点能否被复原取决于这个点是否存在两个不全为空的子树。<br>所以读入以后dfs一次求出每个点有多少子树<br>然后对于每次询问，只需要建出删除那些点的树，递归的计算每个点有多少子树不全为空<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> lson rt,l,m</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rson m+1,r</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100005</span>;</div><div class="line"><span class="keyword">struct</span> edge &#123;</div><div class="line">    <span class="keyword">int</span> go,next;</div><div class="line">&#125; eg[N&lt;&lt;<span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> fat[N],last[N],a[N],sz[N],res[N];</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; G[N];</div><div class="line"><span class="keyword">int</span> tot;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">(<span class="keyword">int</span> &amp;x)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">char</span> c;</div><div class="line">    <span class="keyword">while</span>((c=getchar())&lt;<span class="string">'0'</span> || c&gt;<span class="string">'9'</span>);</div><div class="line">    x=c-<span class="string">'0'</span>;</div><div class="line">    <span class="keyword">while</span>((c=getchar())&gt;=<span class="string">'0'</span> &amp;&amp; c&lt;=<span class="string">'9'</span>) x=(x&lt;&lt;<span class="number">3</span>)+(x&lt;&lt;<span class="number">1</span>)+c-<span class="string">'0'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">adde</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></div><div class="line">&#123;</div><div class="line">    eg[++tot].go=y;</div><div class="line">    eg[tot].next=last[x];</div><div class="line">    last[x]=tot;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> fa)</span></span></div><div class="line">&#123;</div><div class="line">    sz[x]=<span class="number">0</span>;</div><div class="line">    fat[x]=fa;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=last[x];i;i=eg[i].next) &#123;</div><div class="line">        <span class="keyword">int</span> &amp;v=eg[i].go;</div><div class="line">        <span class="keyword">if</span> (v==fa) <span class="keyword">continue</span>;</div><div class="line">        dfs(v,x);</div><div class="line">        sz[x]++;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> u)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (res[u]!=<span class="number">-1</span>) <span class="keyword">return</span> res[u];</div><div class="line">    <span class="keyword">int</span> suv=<span class="number">0</span>,son=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;G[u].size();i++) &#123;</div><div class="line">        <span class="keyword">if</span> (check(G[u][i])&gt;=<span class="number">1</span>) suv++;</div><div class="line">        son++;</div><div class="line">    &#125;</div><div class="line"><span class="comment">//    sz[u]表示u原来有几个子树</span></div><div class="line"><span class="comment">//    son表示u在删除结点组成的树中有几个子树</span></div><div class="line"><span class="comment">//    suv表示u在删除结点组成的树中有几个不全为空的子树 </span></div><div class="line">    <span class="keyword">return</span> res[u]=sz[u]-son+suv; </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T,n,q;</div><div class="line">    read(T);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;=T;t++) &#123;</div><div class="line">        read(n);read(q);</div><div class="line">        tot=<span class="number">0</span>;</div><div class="line">        sz[<span class="number">0</span>]=<span class="number">0</span>;</div><div class="line">        <span class="built_in">memset</span>(last,<span class="number">0</span>,<span class="keyword">sizeof</span>(last));</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++) &#123;</div><div class="line">            <span class="keyword">int</span> x,y;</div><div class="line">            read(x);read(y);</div><div class="line">            adde(x,y);</div><div class="line">            adde(y,x);</div><div class="line">        &#125;</div><div class="line">        dfs(<span class="number">1</span>,<span class="number">0</span>);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d:\n"</span>,t);</div><div class="line">        <span class="keyword">while</span> (q--) &#123;</div><div class="line">            <span class="keyword">int</span> k;</div><div class="line">            read(k);</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;i++) &#123;</div><div class="line">                read(a[i]);</div><div class="line">                G[a[i]].clear();</div><div class="line">                res[a[i]]=<span class="number">-1</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;i++)</div><div class="line">                <span class="keyword">if</span> (res[fat[a[i]]]==<span class="number">-1</span>)</div><div class="line">                    G[fat[a[i]]].push_back(a[i]);</div><div class="line">            <span class="keyword">int</span> ans=n-k;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;i++)</div><div class="line">                ans+=(check(a[i])&gt;=<span class="number">2</span>);</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h3 id="Basic-Data-Structure"><a href="#Basic-Data-Structure" class="headerlink" title="Basic Data Structure"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5929" target="_blank" rel="noopener">Basic Data Structure</a></h3><p>观察题目里的运算和结果，可以发现只要有 0 结果就一定是 0 ，所以我们可以保存最后一个 0 的位置<br>又考虑到这个栈可以 pop 和 reverse ，为了快速获取 pop 或者 reverse 以后最后一个 0 的位置，我们应该保存所有 0 的位置<br>我是用两个数组模拟两个双端队列，q[] 记录的是栈内的数，ze[] 记录的是所有 0 的位置，k 表示现在的迭代方向<br>pop 就是操作尾指针，reverse 就是交换一下首尾指针，具体看代码吧：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> lson rt,l,m</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rson m+1,r</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">200005</span>;</div><div class="line"><span class="keyword">int</span> q[N&lt;&lt;<span class="number">1</span>],ze[N&lt;&lt;<span class="number">1</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;=T;t++) &#123;</div><div class="line">        <span class="keyword">int</span> n;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">        <span class="keyword">int</span> l=N,r=N,k=<span class="number">1</span>;</div><div class="line">        <span class="keyword">int</span> zel=N,zer=N;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d:\n"</span>,t);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="keyword">char</span> s[<span class="number">20</span>];</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>,s);</div><div class="line">            <span class="keyword">if</span> (<span class="built_in">strcmp</span>(s,<span class="string">"PUSH"</span>)==<span class="number">0</span>) &#123;</div><div class="line">                <span class="keyword">int</span> x;</div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</div><div class="line">                q[r]=x;</div><div class="line">                r+=k;</div><div class="line">                <span class="keyword">if</span> (x==<span class="number">0</span>) &#123;</div><div class="line">                    ze[zer]=r;</div><div class="line">                    zer+=k;</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">strcmp</span>(s,<span class="string">"POP"</span>)==<span class="number">0</span>) &#123;</div><div class="line">                <span class="keyword">if</span> (q[r-k]==<span class="number">0</span>) &#123;</div><div class="line">                    zer-=k;</div><div class="line">                &#125;</div><div class="line">                r-=k;</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">strcmp</span>(s,<span class="string">"REVERSE"</span>)==<span class="number">0</span>) &#123;</div><div class="line">                <span class="keyword">int</span> newl=r-k;</div><div class="line">                <span class="keyword">int</span> newr=l-k;</div><div class="line">                r=newr;l=newl;</div><div class="line">                newl=zer-k;</div><div class="line">                newr=zel-k;</div><div class="line">                zer=newr;zel=newl;</div><div class="line">                k=-k;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">if</span> (r-l==<span class="number">0</span>) &#123;</div><div class="line">                    <span class="built_in">puts</span>(<span class="string">"Invalid."</span>);</div><div class="line">                    <span class="keyword">continue</span>;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span> (zer-zel==<span class="number">0</span>) &#123;</div><div class="line">                    <span class="keyword">if</span> ((r-l)&amp;<span class="number">1</span>) <span class="built_in">puts</span>(<span class="string">"1"</span>);</div><div class="line">                    <span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"0"</span>);</div><div class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (zer-k==zel&amp;&amp;q[r-k]==<span class="number">0</span>) &#123;</div><div class="line">                    <span class="keyword">if</span> ((r-l)&amp;<span class="number">1</span>) <span class="built_in">puts</span>(<span class="string">"0"</span>);</div><div class="line">                    <span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"1"</span>);</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    <span class="keyword">int</span> pos=ze[zel];</div><div class="line">                    <span class="keyword">if</span> (<span class="built_in">abs</span>(pos-l)&amp;<span class="number">1</span>) <span class="built_in">puts</span>(<span class="string">"1"</span>);</div><div class="line">                    <span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"0"</span>);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hdu 5728 PowMod 数论</title>
      <link href="/blog/2016/10/05/hdu5728/"/>
      <content type="html"><![CDATA[<h3 id="PowMod"><a href="#PowMod" class="headerlink" title="PowMod"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5728" target="_blank" rel="noopener">PowMod</a></h3><p>先贴官方题解</p><p><img src="http://img.blog.csdn.net/20160724151613409" alt="官方题解"></p><p>其中第二段根本不懂。。。然后就去学习了一下</p><p>引理：设 p 为 n 的一个质因数，<br>$$if\quad p^2|n\quad then\quad \varphi(n)=\varphi(\frac{n}{p})\times p\quad else\quad \varphi(n)=\varphi(\frac{n}{p})\times \varphi(p)$$<br>前一部分可以用 $\varphi(n)$ 的定义来证明，后一部分就是积性函数的性质(详见<a href="http://blog.csdn.net/summonlight/article/details/51967425" target="_blank" rel="noopener">欧拉函数为什么是积性函数</a>)</p><p>题中<code>n is a square-free number</code>表示 $n$ 没有平方因子。<br>我们设 $p$ 为 $n$ 的一个质因数，对 $p\mid i$ 的情况分类讨论：<br>$$\sum_{i=1}^{m}\varphi(i\times n)=\sum_{p\nmid i}^{m}\varphi(i\times n)+\sum_{p\mid i}^{m}\varphi(i\times n) \\<br>=\varphi(p)\times \sum_{p\nmid i}^{m}\varphi(i\times \frac{n}{p})+p\times \sum_{p\mid i}^{m}\varphi(i\times \frac{n}{p}) \\<br>(\because\ p\ is\ a\ prime\ number) \\<br>=\varphi(p)\times \sum_{p\nmid i}^{m}\varphi(i\times \frac{n}{p})+(\varphi(p)+1)\times \sum_{p\mid i}^{m}\varphi(\frac{i}{p}\times n) \\<br>(\because p\mid i\ 和\ p\nmid i\ 合并为全集 ) \\<br>=\varphi(p)\times \sum_{i=1}^{m}\varphi(i\times \frac{n}{p})+\sum_{p\mid i}^{m}\varphi(\frac{i}{p}\times n) \\<br>=\varphi(p)\times \sum_{i=1}^{m}\varphi(i\times \frac{n}{p})+\sum_{i=1}^{m/p}\varphi(i\times n)$$</p><p>再解释另一个式子：$a^b\equiv a^{\varphi(p)+b\%\varphi(p)}\pmod p$，我们分两种情况：</p><ol><li>$a$与$p$互质，那么由费马-欧拉定理，$a^{\varphi(p)}\equiv 1 \pmod p$，原式成立；</li><li>$a$与$p$不互质，则$a^x$在$\varphi(p)$次之内就会变为0。需要一个条件，$b\geq \varphi(p)$，那么实际上$a^b\equiv a^{\varphi(p)+b\%\varphi(p)}\equiv 0 \pmod p$，原式成立。</li></ol><p>但是为什么满足$b\geq \varphi(p)$我还是觉得很难解释，代码是抄标程的：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MOD=<span class="number">1000000007</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e7</span>+<span class="number">5</span>;</div><div class="line"><span class="keyword">bool</span> b[N];</div><div class="line"><span class="keyword">int</span> phi[N],s[N],prime[<span class="number">700000</span>];</div><div class="line"><span class="keyword">int</span> tot=<span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">getphi</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    phi[<span class="number">1</span>]=<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;N;i++) &#123;</div><div class="line">        <span class="keyword">if</span> (!b[i]) &#123;</div><div class="line">            phi[i]=i<span class="number">-1</span>;</div><div class="line">            prime[++tot]=i;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=tot;j++) &#123;</div><div class="line">            <span class="keyword">if</span> (i\times prime[j]&gt;=N) <span class="keyword">break</span>;</div><div class="line">            b[i\times prime[j]]=<span class="number">1</span>;</div><div class="line">            <span class="keyword">if</span> (i%prime[j]==<span class="number">0</span>) &#123;</div><div class="line">                phi[i\times prime[j]]=phi[i]\times prime[j];</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                phi[i\times prime[j]]=phi[i]\times (prime[j]<span class="number">-1</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    s[<span class="number">0</span>]=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;N;i++)</div><div class="line">        s[i]=(s[i<span class="number">-1</span>]+phi[i])%MOD;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getsum</span><span class="params">(<span class="keyword">int</span> n,<span class="keyword">int</span> m)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (m==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    <span class="keyword">if</span> (m==<span class="number">1</span>) <span class="keyword">return</span> phi[n];</div><div class="line">    <span class="keyword">if</span> (n==<span class="number">1</span>) <span class="keyword">return</span> s[m];</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=tot;i++) &#123;</div><div class="line">        <span class="keyword">if</span> (n%prime[i]==<span class="number">0</span>)</div><div class="line">            <span class="keyword">return</span> (<span class="number">1L</span>L\times (prime[i]<span class="number">-1</span>)\times getsum(n/prime[i],m)%MOD+getsum(n,m/prime[i]))%MOD;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pow</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> x,<span class="keyword">int</span> n,<span class="keyword">int</span> M)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">long</span> <span class="keyword">long</span> res=<span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span> (n) &#123;</div><div class="line">        <span class="keyword">if</span> (n&amp;<span class="number">1</span>) res=res\times x%M;</div><div class="line">        x=x\times x%M;</div><div class="line">        n&gt;&gt;=<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> k,<span class="keyword">int</span> p)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (p==<span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> now=solve(k,phi[p]);</div><div class="line">    <span class="keyword">return</span> <span class="built_in">pow</span>(k,phi[p]+now,p);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> n,m,p;</div><div class="line">    getphi();</div><div class="line"><span class="comment">//    printf("%d\n",tot);</span></div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;n,&amp;m,&amp;p)!=EOF) &#123;</div><div class="line">        <span class="keyword">int</span> k=getsum(n,m);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,solve(k,p));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>本篇博客借助 markdown 高清重制~~</p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hdu 5919 Sequence II 主席树</title>
      <link href="/blog/2016/10/05/hdu5919/"/>
      <content type="html"><![CDATA[<h3 id="Sequence-II"><a href="#Sequence-II" class="headerlink" title="Sequence II"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5919" target="_blank" rel="noopener">Sequence II</a></h3><p>题意：给出原数列。每次询问一个区间时，把各个数字在这个区间中第一次出现的位置记作 $p_{1},p_{2},\cdots, p_{k}$ ，满足 $p_{1} &lt; p_{2} &lt; \cdots &lt; p_{k}$ ，求 $p_{\lceil \frac{k}{2}\rceil}$ 。询问强制在线。</p><p>题解：camp 的题解搞得我莫名其妙。。。 $O(Mlog^{2}N)$ 明显过不了吧。。。</p><p><del>因为我重现赛的时候就是强行套了一个二分变成了这个复杂度。。。</del><br>本来我学主席树就是因为长春比完有人说要用到主席树。。。结果我还是没做出来= =<br>其实只要做过 SPOJ DQUERY 的应该都知道吧。。。<del>然而我没做过</del><br>反正就是反着插进去插过的先删除就行了。。。<br>于是我又犯了一个很傻逼的错误。。。我以为一个一个读插进去和全读了反着插进去是一样的。。。从晚上WA到早上根本想不到是因为这个。。。最近输出很不稳定啊 OTZ<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">2e5</span>+<span class="number">5</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">40</span>*N;</div><div class="line"><span class="keyword">int</span> T[N],po[N],a[N];</div><div class="line"><span class="keyword">struct</span> Seg &#123;</div><div class="line">    <span class="keyword">int</span> ls,rs,v;</div><div class="line">&#125; tr[M];</div><div class="line"><span class="keyword">int</span> tot,C,n,m;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">(<span class="keyword">int</span> &amp;x)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">char</span> c;</div><div class="line">    <span class="keyword">while</span>((c=getchar())&lt;<span class="string">'0'</span> || c&gt;<span class="string">'9'</span>);</div><div class="line">    x=c-<span class="string">'0'</span>;</div><div class="line">    <span class="keyword">while</span>((c=getchar())&gt;=<span class="string">'0'</span> &amp;&amp; c&lt;=<span class="string">'9'</span>) x=(x&lt;&lt;<span class="number">3</span>)+(x&lt;&lt;<span class="number">1</span>)+c-<span class="string">'0'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> rt=++tot;</div><div class="line">    tr[rt].v=<span class="number">0</span>;</div><div class="line">    <span class="keyword">if</span> (l==r) &#123;</div><div class="line">        tr[rt].ls=tr[rt].rs=<span class="number">0</span>;</div><div class="line">        <span class="keyword">return</span> rt;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> m=l+r&gt;&gt;<span class="number">1</span>;</div><div class="line">    tr[rt].ls=build(l,m);</div><div class="line">    tr[rt].rs=build(m+<span class="number">1</span>,r);</div><div class="line">    <span class="keyword">return</span> rt;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> pos,<span class="keyword">int</span> d)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> newrt=++tot;</div><div class="line">    tr[newrt].v=tr[rt].v+d;</div><div class="line">    <span class="keyword">if</span> (l==r) <span class="keyword">return</span> newrt;</div><div class="line">    <span class="keyword">int</span> m=l+r&gt;&gt;<span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span> (pos&lt;=m) &#123;</div><div class="line">        tr[newrt].rs=tr[rt].rs;</div><div class="line">        tr[newrt].ls=update(tr[rt].ls,l,m,pos,d);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        tr[newrt].ls=tr[rt].ls;</div><div class="line">        tr[newrt].rs=update(tr[rt].rs,m+<span class="number">1</span>,r,pos,d);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> newrt;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getsum</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> L,<span class="keyword">int</span> R)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (L&lt;=l&amp;&amp;r&lt;=R) <span class="keyword">return</span> tr[rt].v;</div><div class="line">    <span class="keyword">int</span> m=l+r&gt;&gt;<span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</div><div class="line">    <span class="keyword">if</span> (L&lt;=m) res+=getsum(tr[rt].ls,l,m,L,R);</div><div class="line">    <span class="keyword">if</span> (m&lt;R) res+=getsum(tr[rt].rs,m+<span class="number">1</span>,r,L,R);</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> k)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (l==r) <span class="keyword">return</span> l;</div><div class="line">    <span class="keyword">int</span> m=l+r&gt;&gt;<span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span> tmp=tr[tr[rt].ls].v;</div><div class="line">    <span class="keyword">if</span> (k&lt;=tmp) <span class="keyword">return</span> query(tr[rt].ls,l,m,k);</div><div class="line">    <span class="keyword">else</span> <span class="keyword">return</span> query(tr[rt].rs,m+<span class="number">1</span>,r,k-tmp);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">case_init</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    tot=<span class="number">0</span>;</div><div class="line">    T[n+<span class="number">1</span>]=build(<span class="number">1</span>,n);</div><div class="line">    <span class="built_in">memset</span>(po,<span class="number">-1</span>,<span class="keyword">sizeof</span>(po));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    read(C);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">1</span>; t&lt;=C; t++) &#123;</div><div class="line">        read(n);</div><div class="line">        read(m);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">            read(a[i]);</div><div class="line">        case_init();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=n; i; i--) &#123;</div><div class="line">            <span class="keyword">if</span> (po[a[i]]==<span class="number">-1</span>) &#123;</div><div class="line">                T[i]=update(T[i+<span class="number">1</span>],<span class="number">1</span>,n,i,<span class="number">1</span>);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">int</span> tmp=update(T[i+<span class="number">1</span>],<span class="number">1</span>,n,po[a[i]],<span class="number">-1</span>);</div><div class="line">                T[i]=update(tmp,<span class="number">1</span>,n,i,<span class="number">1</span>);</div><div class="line">            &#125;</div><div class="line">            po[a[i]]=i;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d:"</span>,t);</div><div class="line">        <span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span> (m--) &#123;</div><div class="line">            <span class="keyword">int</span> p,q,l,r;</div><div class="line">            read(p);</div><div class="line">            read(q);</div><div class="line">            p=(p+ans)%n+<span class="number">1</span>;</div><div class="line">            q=(q+ans)%n+<span class="number">1</span>;</div><div class="line">            l=min(p,q);</div><div class="line">            r=max(p,q);</div><div class="line">            <span class="keyword">int</span> k=getsum(T[l],<span class="number">1</span>,n,l,r);</div><div class="line">            ans=query(T[l],<span class="number">1</span>,n,(k+<span class="number">1</span>)/<span class="number">2</span>);</div><div class="line">            <span class="built_in">printf</span>(<span class="string">" %d"</span>,ans);</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>弱校联盟 2016 四川省赛</title>
      <link href="/blog/2016/10/02/2016%E5%9B%9B%E5%B7%9D%E7%9C%81%E8%B5%9B/"/>
      <content type="html"><![CDATA[<p>。。。反正都不会。。。反正都是抄的。。。<br><img src="http://img.blog.csdn.net/20161002172050853" alt=""></p><h3 id="Nearest-Neighbor-Search"><a href="#Nearest-Neighbor-Search" class="headerlink" title="Nearest Neighbor Search"></a><a href="https://www.bnuoj.com/v3/contest_show.php?cid=8520#problem/A" target="_blank" rel="noopener">Nearest Neighbor Search</a></h3><p>水题。。。刚开始我还写了个判断在不在长方体之内的函数。。。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">struct</span> point &#123;</div><div class="line">    <span class="keyword">int</span> x,y,z;</div><div class="line">&#125; p[<span class="number">4</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="title">sqr</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> x)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> x*x;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">3</span>; i++)</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;p[i].x,&amp;p[i].y,&amp;p[i].z);</div><div class="line">    <span class="keyword">int</span> x,y,z;</div><div class="line">    <span class="keyword">if</span> (p[<span class="number">0</span>].x&lt;p[<span class="number">1</span>].x) x=p[<span class="number">1</span>].x;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (p[<span class="number">0</span>].x&gt;p[<span class="number">2</span>].x) x=p[<span class="number">2</span>].x;</div><div class="line">    <span class="keyword">else</span> x=p[<span class="number">0</span>].x;</div><div class="line">    <span class="keyword">if</span> (p[<span class="number">0</span>].y&lt;p[<span class="number">1</span>].y) y=p[<span class="number">1</span>].y;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (p[<span class="number">0</span>].y&gt;p[<span class="number">2</span>].y) y=p[<span class="number">2</span>].y;</div><div class="line">    <span class="keyword">else</span> y=p[<span class="number">0</span>].y;</div><div class="line">    <span class="keyword">if</span> (p[<span class="number">0</span>].z&lt;p[<span class="number">1</span>].z) z=p[<span class="number">1</span>].z;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (p[<span class="number">0</span>].z&gt;p[<span class="number">2</span>].z) z=p[<span class="number">2</span>].z;</div><div class="line">    <span class="keyword">else</span> z=p[<span class="number">0</span>].z;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,sqr(x-p[<span class="number">0</span>].x)+sqr(y-p[<span class="number">0</span>].y)+sqr(z-p[<span class="number">0</span>].z));</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="Coins"><a href="#Coins" class="headerlink" title="Coins"></a><a href="https://www.bnuoj.com/v3/contest_show.php?cid=8520#problem/E" target="_blank" rel="noopener">Coins</a></h3><p>神题。。。根本没想到要分类讨论。。。<br>就说一下比较难的 $a=0$ $and$ $b\geq 2$ $and$ $c&gt;0$ 的情况：</p><ul><li>首先可以放入 $k$ 个 3，那就有 $c$ 种不同的价钱。</li><li>考虑到 $b\geq 2$ ，我们可以拿出 $1$ 个 3，放入 $1$ 个 2，价钱会减 1，或者放入 $2$ 个 2，价钱会加 1，这样多了 $2c$ 种价钱。</li><li>下面可以先放入 $c$ 个 3（所有 3），再放入 $k$ 个 2，这样多了 $b$ 种价钱。</li><li>而当 $k\gt 2$ 时，我们发现【不，并没有 ˊ_&gt;ˋ】还可以拿出 $1$ 个 3，并且不会重复。<br>放入所有 3，放入了 $k$ 个 2：$3c+2,3c+4,3c+6,3c+8,…$<br>除了前 2 个（$3c\pm 1$ 已经出现过了）都可以拿出 1 个 3：$3c+3,3c+5,…$<br>所以又多了 $b-2$ 种价钱。</li></ul><p>总数为 $3c+2b-2$<br>其余看代码：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"></div><div class="line"><span class="function">ll <span class="title">solve</span><span class="params">(ll a,ll b,ll c)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (a&gt;=<span class="number">2</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">3</span>*c+<span class="number">2</span>*b+a;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (a==<span class="number">1</span>) &#123;</div><div class="line">        <span class="keyword">if</span> (b&gt;=<span class="number">1</span>) <span class="keyword">return</span> <span class="number">3</span>*c+<span class="number">2</span>*b+a;</div><div class="line">        <span class="keyword">if</span> (b==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">2</span>*c+a;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (a==<span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">if</span> (b&gt;=<span class="number">2</span>)</div><div class="line">            <span class="keyword">if</span> (c==<span class="number">0</span>) <span class="keyword">return</span> b;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">3</span>*c+<span class="number">2</span>*b<span class="number">-2</span>;</div><div class="line">        <span class="keyword">if</span> (b==<span class="number">1</span>) <span class="keyword">return</span> <span class="number">2</span>*c+b;</div><div class="line">        <span class="keyword">if</span> (b==<span class="number">0</span>) <span class="keyword">return</span> c;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> a,b,c;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;a,&amp;b,&amp;c);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,solve(a,b,c));</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h3 id="Matrix-Transformation"><a href="#Matrix-Transformation" class="headerlink" title="Matrix Transformation"></a><a href="https://www.bnuoj.com/v3/contest_show.php?cid=8520#problem/J" target="_blank" rel="noopener">Matrix Transformation</a></h3><p>直接看别人代码。。。发现就是类似于十字链表的东西，然后就自己写了<br>$Mnode$ 里面的 $r$ 就是记录该点右边的点，$d$ 就是记录该点下面的点<br>因为只记录两个方向，更新行的时候只需要更新 $l$ 的上面一行和 $r$ 这一行<br>所以说不必要的时候就不要四个方向都存了。。。其余看代码<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">201</span>;</div><div class="line"><span class="keyword">struct</span> Mnode &#123;</div><div class="line">    <span class="keyword">int</span> r,d;</div><div class="line">    Mnode() &#123;&#125;</div><div class="line">    Mnode(<span class="keyword">int</span> _r,<span class="keyword">int</span> _d):r(_r),d(_d) &#123;&#125;</div><div class="line">&#125; m[N*N];</div><div class="line"><span class="keyword">int</span> n,q,root;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> x*n+y;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">rollr</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> d)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (d==<span class="number">0</span>) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">int</span> rt=root;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(l<span class="number">-1</span>+n)%n;i++)</div><div class="line">        rt=m[rt].d;</div><div class="line">    <span class="keyword">int</span> pl=m[rt].d;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;d;i++)</div><div class="line">        pl=m[pl].r;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</div><div class="line">        m[rt].d=pl;</div><div class="line">        rt=m[rt].r;</div><div class="line">        pl=m[pl].r;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=l<span class="number">-1</span>;i&lt;r;i++)</div><div class="line">        rt=m[rt].d;</div><div class="line">    <span class="keyword">int</span> pr=m[rt].d;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n-d;i++)</div><div class="line">        pr=m[pr].r;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</div><div class="line">        m[rt].d=pr;</div><div class="line">        rt=m[rt].r;</div><div class="line">        pr=m[pr].r;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (l&lt;=<span class="number">0</span>&amp;&amp;<span class="number">0</span>&lt;=r)</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;d;i++)</div><div class="line">             root=m[root].r;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">rollc</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> d)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (d==<span class="number">0</span>) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">int</span> rt=root;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(l<span class="number">-1</span>+n)%n;i++)</div><div class="line">        rt=m[rt].r;</div><div class="line">    <span class="keyword">int</span> pl=m[rt].r;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;d;i++)</div><div class="line">        pl=m[pl].d;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</div><div class="line">        m[rt].r=pl;</div><div class="line">        rt=m[rt].d;</div><div class="line">        pl=m[pl].d;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=l<span class="number">-1</span>;i&lt;r;i++)</div><div class="line">        rt=m[rt].r;</div><div class="line">    <span class="keyword">int</span> pr=m[rt].r;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n-d;i++)</div><div class="line">        pr=m[pr].d;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</div><div class="line">        m[rt].r=pr;</div><div class="line">        rt=m[rt].d;</div><div class="line">        pr=m[pr].d;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (l&lt;=<span class="number">0</span>&amp;&amp;<span class="number">0</span>&lt;=r)</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;d;i++)</div><div class="line">             root=m[root].d;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++) &#123;</div><div class="line">            <span class="keyword">if</span> (j&lt;n<span class="number">-1</span>) <span class="built_in">printf</span>(<span class="string">"%d "</span>,root);</div><div class="line">            <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,root);</div><div class="line">            root=m[root].r;</div><div class="line">        &#125;</div><div class="line">        root=m[root].d;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;q);</div><div class="line">    <span class="keyword">int</span> tot=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++) &#123;</div><div class="line">            m[tot++]=Mnode(get(i,(j+<span class="number">1</span>)%n),get((i+<span class="number">1</span>)%n,j));</div><div class="line">        &#125;</div><div class="line">    root=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> (q--) &#123;</div><div class="line">        <span class="keyword">int</span> k,l,r,d;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d%d"</span>,&amp;k,&amp;l,&amp;r,&amp;d);</div><div class="line">        <span class="keyword">if</span> (k==<span class="number">1</span>) rollr(l,r,d);</div><div class="line">        <span class="keyword">else</span> rollc(l,r,d);</div><div class="line"><span class="comment">//        printf("ROOT: %d\n",root);</span></div><div class="line"><span class="comment">//        print();</span></div><div class="line">    &#125;</div><div class="line">    print();</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hdu 5546 Ancient Go 搜索</title>
      <link href="/blog/2016/09/30/hdu5546/"/>
      <content type="html"><![CDATA[<h3 id="Ancient-Go"><a href="#Ancient-Go" class="headerlink" title="Ancient Go"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5546" target="_blank" rel="noopener">Ancient Go</a></h3><p>题意：给出棋盘，轮到 x 这一方下子，问能不能至少提掉一个 o 方的子。<br>题解：枚举每一个 o ，bfs 一下看看周围的 . 是不是少于等于 1 个，太简单辣！</p><p>考虑到要优化时间，枚举每一个 o 的时候直接把那一片 o 都标记了，这样就省了很多次 bfs 。<br>不得不说这真的是一道打击信心的题。。。。。。<br>虽然没有WA很多次，，，但是就是想不出来为什么WA。。。<br>实际上。。。数 . 的时候有些 . 会被数两次。。。比如：<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">.....xoox</div><div class="line">.......ox</div><div class="line">.......x.</div></pre></td></tr></table></figure></p><p>因为从我的思路来讲，标记一片 o 是为了让下次不再搜索，但是 . 在下次还是会用到的，所以肯定不会标记。这样的后果就是搜索到 . 时其实并不知道它在这一次有没有被搜到过。。。<br>正确的做法要给 . 加上标记，可以用时间戳标记，代码：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> dx[<span class="number">4</span>]=&#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>&#125;;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> dy[<span class="number">4</span>]=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">-1</span>&#125;;</div><div class="line"><span class="keyword">char</span> <span class="built_in">map</span>[<span class="number">10</span>][<span class="number">10</span>];</div><div class="line"><span class="keyword">int</span> b[<span class="number">10</span>][<span class="number">10</span>];</div><div class="line"><span class="keyword">int</span> index;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</div><div class="line">    <span class="built_in">queue</span>&lt;PII&gt; Q;</div><div class="line">    Q.push(PII(x,y));</div><div class="line">    b[x][y]=<span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span> (!Q.empty()) &#123;</div><div class="line">        <span class="keyword">int</span> x=Q.front().first;</div><div class="line">        <span class="keyword">int</span> y=Q.front().second;</div><div class="line">        Q.pop();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++) &#123;</div><div class="line">            <span class="keyword">int</span> xx=x+dx[i];</div><div class="line">            <span class="keyword">int</span> yy=y+dy[i];</div><div class="line">            <span class="keyword">if</span> (xx&lt;<span class="number">0</span>||yy&lt;<span class="number">0</span>||xx&gt;=<span class="number">9</span>||yy&gt;=<span class="number">9</span>) <span class="keyword">continue</span>;</div><div class="line">            <span class="keyword">if</span> (<span class="built_in">map</span>[xx][yy]==<span class="string">'.'</span>) &#123;</div><div class="line">                <span class="keyword">if</span> (b[xx][yy]!=index) &#123;</div><div class="line">                    ++res;</div><div class="line">                    b[xx][yy]=index;</div><div class="line">                &#125;</div><div class="line">                <span class="comment">/*********WA*********</span></div><div class="line">                ++res;</div><div class="line">                ********************/ </div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">map</span>[xx][yy]==<span class="string">'o'</span>&amp;&amp;!b[xx][yy]) &#123;</div><div class="line">                b[xx][yy]=<span class="number">1</span>;</div><div class="line">                Q.push(PII(xx,yy));</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T,t=<span class="number">0</span>;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">WCON:</div><div class="line">    <span class="keyword">while</span> (++t&lt;=T) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">9</span>;i++)</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>,<span class="built_in">map</span>[i]);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: "</span>,t);</div><div class="line">        <span class="built_in">memset</span>(b,<span class="number">0</span>,<span class="keyword">sizeof</span>(b));</div><div class="line">        index=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">9</span>;i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">9</span>;j++) &#123;</div><div class="line">                <span class="keyword">if</span> (<span class="built_in">map</span>[i][j]==<span class="string">'o'</span>&amp;&amp;!b[i][j]) &#123;</div><div class="line">                    ++index;</div><div class="line">                    <span class="keyword">int</span> tmp=bfs(i,j);</div><div class="line">                    <span class="keyword">if</span> (tmp&lt;=<span class="number">1</span>) &#123;</div><div class="line">                        <span class="built_in">puts</span>(<span class="string">"Can kill in one move!!!"</span>);</div><div class="line">                        <span class="keyword">goto</span> WCON;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">puts</span>(<span class="string">"Can not kill in one move!!!"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>而在我上网查题解的时候又看到了另一种想法</p><p><img src="http://img.blog.csdn.net/20160930204609070" alt="另一种想法"></p><p>这个想法就回避了数 . 的问题，当然我估计这个想法比较小众。。。因为大家觉得性能太差了。。。<br>所以说这题。。。出在现场赛还算是公平吧。。。<del>就是太打击信心了 :-( ！！</del></p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hdu 3727 Jewel 主席树</title>
      <link href="/blog/2016/09/29/hdu3727/"/>
      <content type="html"><![CDATA[<p>最近在学主席树。。。反正感觉挺神奇的。。。<br>我高中想学，但是并没有看懂。<del>可能是他们写的太屎了</del><br>kuangbin的板子也不太行。<br>poj 2104 那题入门，程序是没错<br>但是太耦合了，变量也有点意义不明。。。<br>于是我又去找了找。。。发现应该给一个比利比利的链接</p><p><a href="http://www.bilibili.com/video/av4619406/" target="_blank" rel="noopener">qsc菊苣教你主席树啊</a><br>这个讲的不错啊  就是p2的时候码力实在太强。。。只能暂停学姿势<br>然后我又去找最佳实践，，，<br>但是感觉都有不舒服的地方。。。只能自己瞎编着上了<br>【知道最佳实践的一定要告诉我啊</p><h3 id="Jewel"><a href="#Jewel" class="headerlink" title="Jewel"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=3727" target="_blank" rel="noopener">Jewel</a></h3><p>题意：初始的链为空，需要支持以下四个操作：略。<br>题解：Query_1 和 Query_3 很明显就是静态第k小，又因为是权值线段树，Query_2 就是前缀和呗。。。<br>因为数太大啦，再套个离散化，要离散化首先要把操作离线。<del>ok，这样这题就AC啦</del><br>这题昨天晚上从开始读到调完正好一小时，而且中间也跟室友吹吹逼啥的<br>感觉自己码力很有进步啊！然后交上去WA了。。。<br>当然我其实知道一个WA点，，，answer 没改成 longlong<br>满怀信心，再交。。。又WA了。。。<br>刚刚又xjb交了一遍，还是WA<br>然后去查题解。。。发现我好像有什么地方理解错了。。。</p><blockquote><p>… and the amounts of “Query_1”, “Query_2” and “Query_3” are all less than 35000.</p></blockquote><p>三种询问的数量都不超过35000。。。我似乎理解成和了？？？？<br>。。。代码：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100001</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">35000</span>*<span class="number">3</span>+N;</div><div class="line"><span class="keyword">struct</span> chair &#123;</div><div class="line">    <span class="keyword">int</span> ls,rs,sum;</div><div class="line">&#125; T[M*<span class="number">40</span>];</div><div class="line"><span class="keyword">struct</span> oper &#123;</div><div class="line">    <span class="keyword">int</span> op,x,y,k;</div><div class="line">&#125; op[M];</div><div class="line"><span class="keyword">int</span> root[N],A[N];</div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> ans[<span class="number">4</span>];</div><div class="line"></div><div class="line"><span class="keyword">int</span> index;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> x)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> newroot=++index;</div><div class="line">    T[newroot]=T[rt];</div><div class="line">    T[newroot].sum++;</div><div class="line">    <span class="keyword">if</span> (l==r) <span class="keyword">return</span> newroot;</div><div class="line">    <span class="keyword">int</span> m=l+r&gt;&gt;<span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span> (x&lt;=m) T[newroot].ls=update(T[newroot].ls,l,m,x);</div><div class="line">    <span class="keyword">else</span> T[newroot].rs=update(T[newroot].rs,m+<span class="number">1</span>,r,x);</div><div class="line">    <span class="keyword">return</span> newroot;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> k)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (l==r) <span class="keyword">return</span> l;</div><div class="line">    <span class="keyword">int</span> m=l+r&gt;&gt;<span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span> lsz=T[T[y].ls].sum-T[T[x].ls].sum;</div><div class="line">    <span class="keyword">if</span> (lsz&gt;=k) &#123;</div><div class="line">        <span class="keyword">return</span> query(T[x].ls,T[y].ls,l,m,k);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> query(T[x].rs,T[y].rs,m+<span class="number">1</span>,r,k-lsz);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getrank</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> L,<span class="keyword">int</span> R)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (L&lt;=l&amp;&amp;r&lt;=R) <span class="keyword">return</span> T[rt].sum;</div><div class="line">    <span class="keyword">int</span> m=l+r&gt;&gt;<span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</div><div class="line">    <span class="keyword">if</span> (L&lt;=m) res+=getrank(T[rt].ls,l,m,L,R);</div><div class="line">    <span class="keyword">if</span> (m&lt;R) res+=getrank(T[rt].rs,m+<span class="number">1</span>,r,L,R);</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">case_init</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    index=root[<span class="number">0</span>]=<span class="number">0</span>;</div><div class="line">    T[<span class="number">0</span>].ls=T[<span class="number">0</span>].rs=T[<span class="number">0</span>].sum=<span class="number">0</span>;</div><div class="line">    <span class="built_in">memset</span>(ans,<span class="number">0</span>,<span class="keyword">sizeof</span>(ans));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> cas=<span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> q;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;q)!=EOF) &#123;</div><div class="line">        <span class="keyword">int</span> n=<span class="number">0</span>;</div><div class="line">        case_init();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=q;i++) &#123;</div><div class="line">            <span class="keyword">char</span> s[<span class="number">10</span>];</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>,s);</div><div class="line">            <span class="keyword">if</span> (s[<span class="number">0</span>]==<span class="string">'I'</span>) &#123;</div><div class="line">                op[i].op=<span class="number">0</span>;</div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;op[i].x);</div><div class="line">                A[++n]=op[i].x;</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[<span class="number">6</span>]==<span class="string">'1'</span>) &#123;</div><div class="line">                op[i].op=<span class="number">1</span>;</div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;op[i].x,&amp;op[i].y,&amp;op[i].k);</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[<span class="number">6</span>]==<span class="string">'2'</span>) &#123;</div><div class="line">                op[i].op=<span class="number">2</span>;</div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;op[i].x);</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[<span class="number">6</span>]==<span class="string">'3'</span>) &#123;</div><div class="line">                op[i].op=<span class="number">3</span>;</div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;op[i].k);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        sort(A+<span class="number">1</span>,A+<span class="number">1</span>+n);</div><div class="line">        </div><div class="line">        <span class="keyword">int</span> tot=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=q;i++) &#123;</div><div class="line">            <span class="keyword">if</span> (op[i].op==<span class="number">0</span>) &#123;</div><div class="line">                tot++;</div><div class="line">                root[tot]=update(root[tot<span class="number">-1</span>],<span class="number">1</span>,n,lower_bound(A+<span class="number">1</span>,A+<span class="number">1</span>+n,op[i].x)-A);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">long</span> <span class="keyword">long</span> tmp=<span class="number">0</span>;</div><div class="line">                <span class="keyword">if</span> (op[i].op==<span class="number">1</span>) </div><div class="line">                    tmp=A[query(root[op[i].x<span class="number">-1</span>],root[op[i].y],<span class="number">1</span>,n,op[i].k)];</div><div class="line">                <span class="keyword">if</span> (op[i].op==<span class="number">2</span>) </div><div class="line">                    tmp=getrank(root[tot],<span class="number">1</span>,n,<span class="number">1</span>,lower_bound(A+<span class="number">1</span>,A+<span class="number">1</span>+n,op[i].x)-A);</div><div class="line">                <span class="keyword">if</span> (op[i].op==<span class="number">3</span>) </div><div class="line">                    tmp=A[query(root[<span class="number">0</span>],root[tot],<span class="number">1</span>,n,op[i].k)];</div><div class="line">                ans[op[i].op]+=tmp;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="built_in">printf</span>(<span class="string">"Case %d:\n"</span>,++cas);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">4</span>;i++)</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,ans[i]);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>HHUACM 综合训练2</title>
      <link href="/blog/2016/09/22/hhutraining2/"/>
      <content type="html"><![CDATA[<p>本次综合训练主要是2013年的大连online的题目，有难有易，其中题意不太清楚和要求非常高的题目就直接剔除了。这样题数少了，于是又加了2题2016年大连online的我觉得挺不错的题目。后来发现知识点有点重叠，不过训练一下也无妨。</p><h3 id="Find-the-maximum"><a href="#Find-the-maximum" class="headerlink" title="Find the maximum"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=4002" target="_blank" rel="noopener">Find the maximum</a></h3><p>题意：给出 $N$ 求出最小的 $2\leq n\leq N$ 使得 $n/\varphi(n)$ 最大。<br>题解：做这题首先要知道 $\varphi(n)$ 的计算式（不作证明）: $\varphi(n)=n(1-\frac{1}{p_{1}})(1-\frac{1}{p_{2}})…(1-\frac{1}{p_{k}})$<br>$$\therefore n/\varphi(n)=\frac{1}{(1-\frac{1}{p_{1}})(1-\frac{1}{p_{2}})…(1-\frac{1}{p_{k}})}$$ $$=\frac{1}{\frac{p_1-1}{p_1}\frac{p_2-1}{p_2}…\frac{p_k-1}{p_k}}$$ $$=\frac{p_1}{p_1-1}\frac{p_2}{p_2-1}…\frac{p_k}{p_k-1}$$ $$=(1+\frac{1}{p_1-1})(1+\frac{1}{p_2-1})…(1+\frac{1}{p_k-1})$$<br>其中 $p_1,p_2,…p_k$ 为 $n$ 的质因子。（考虑到大家提交的很多代码都是打表，这里我写的比较详细）</p><p>明显地：</p><ol><li>$p_1,p_2,…p_k$ 越小，$n$ 越小，而且 $n/\varphi(n)$ 越大；</li><li>$p_1,p_2,…p_k$ 的次方数没有贡献。<br>所以，只需要把最小的那些质数乘起来，就能得到满足条件的 $n$<br>为了增加(编程)难度，这题又加入了高精度，套用模板，代码如下：</li></ol><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div></pre></td><td class="code"><pre><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">using namespace std;</div><div class="line"></div><div class="line">const int MAX=1000000;</div><div class="line">int pr[100000],pt=0;</div><div class="line">bool f[MAX];</div><div class="line">char s[110];</div><div class="line">struct BigInt &#123;</div><div class="line">    const static int mod = 10000;</div><div class="line">    const static int DLEN = 4;</div><div class="line">    int a[100],len;</div><div class="line">    BigInt() &#123;</div><div class="line">        memset(a,0,sizeof(a));</div><div class="line">        len = 1;</div><div class="line">    &#125;</div><div class="line">    BigInt(int v) &#123;</div><div class="line">        memset(a,0,sizeof(a));</div><div class="line">        len = 0;</div><div class="line">        do &#123;</div><div class="line">            a[len++] = v%mod;</div><div class="line">            v /= mod;</div><div class="line">        &#125; while(v);</div><div class="line">    &#125;</div><div class="line">    BigInt(const char s[]) &#123;</div><div class="line">        memset(a,0,sizeof(a));</div><div class="line">        int L = strlen(s);</div><div class="line">        len = L/DLEN;</div><div class="line">        if(L%DLEN)len++;</div><div class="line">        int index = 0;</div><div class="line">        for(int i = L-1; i &gt;= 0; i -= DLEN) &#123;</div><div class="line">            int t = 0;</div><div class="line">            int k = i - DLEN + 1;</div><div class="line">            if(k &lt; 0)k = 0;</div><div class="line">            for(int j = k; j &lt;= i; j++)</div><div class="line">                t = t*10 + s[j] - '0';</div><div class="line">            a[index++] = t;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    BigInt operator +(const BigInt &amp;b)const &#123;</div><div class="line">        BigInt res;</div><div class="line">        res.len = max(len,b.len);</div><div class="line">        for(int i = 0; i &lt;= res.len; i++)</div><div class="line">            res.a[i] = 0;</div><div class="line">        for(int i = 0; i &lt; res.len; i++) &#123;</div><div class="line">            res.a[i] += ((i &lt; len)?a[i]:0)+((i &lt; b.len)?b.a[i]:0);</div><div class="line">            res.a[i+1] += res.a[i]/mod;</div><div class="line">            res.a[i] %= mod;</div><div class="line">        &#125;</div><div class="line">        if(res.a[res.len] &gt; 0)res.len++;</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line">    BigInt operator *(const BigInt &amp;b)const &#123;</div><div class="line">        BigInt res;</div><div class="line">        for(int i = 0; i &lt; len; i++) &#123;</div><div class="line">            int up = 0;</div><div class="line">            for(int j = 0; j &lt; b.len; j++) &#123;</div><div class="line">                int temp = a[i]*b.a[j] + res.a[i+j] + up;</div><div class="line">                res.a[i+j] = temp%mod;</div><div class="line">                up = temp/mod;</div><div class="line">            &#125;</div><div class="line">            if(up != 0)</div><div class="line">                res.a[i + b.len] = up;</div><div class="line">        &#125;</div><div class="line">        res.len = len + b.len;</div><div class="line">        while(res.a[res.len - 1] == 0 &amp;&amp;res.len &gt; 1)res.len--;</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line">    bool operator &gt;(const BigInt &amp;b)const &#123;</div><div class="line">        if (len==b.len) &#123;</div><div class="line">            int k=len-1;</div><div class="line">            while (k&amp;&amp;a[k]==b.a[k]) k--;</div><div class="line">            if (k&lt;0) return false;</div><div class="line">            return a[k]&gt;b.a[k];</div><div class="line">        &#125;</div><div class="line">        return len&gt;b.len;</div><div class="line">    &#125;</div><div class="line">    void output() &#123;</div><div class="line">        printf("%d",a[len-1]);</div><div class="line">        for(int i = len-2; i &gt;=0 ; i--)</div><div class="line">            printf("%04d",a[i]);</div><div class="line">        printf("\n");</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">void init_pr()</div><div class="line">&#123;</div><div class="line">    for (int i=2;i&lt;MAX;i++) &#123;</div><div class="line">        if (!f[i]) pr[++pt]=i;</div><div class="line">        for (int j=1;j&lt;=pt;j++) &#123;</div><div class="line">            if (i*pr[j]&gt;=MAX) break;</div><div class="line">            f[i*pr[j]]=1;</div><div class="line">            if (i%pr[j]==0) break;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    init_pr();</div><div class="line">    int T;</div><div class="line">    scanf("%d",&amp;T);</div><div class="line">    while (T--) &#123;</div><div class="line">        scanf("%s",s);</div><div class="line">        BigInt n(s);</div><div class="line">        BigInt a(1),b(1);</div><div class="line">        for (int i=1;i&lt;=pt;i++) &#123;</div><div class="line">            BigInt tmp(pr[i]);</div><div class="line">            b=a*tmp;</div><div class="line">            if (b&gt;n) break;</div><div class="line">            a=b;</div><div class="line">        &#125;</div><div class="line">        a.output();</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="The-Frog’s-Games"><a href="#The-Frog’s-Games" class="headerlink" title="The Frog’s Games"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=4004" target="_blank" rel="noopener">The Frog’s Games</a></h3><p>题意：青蛙要跳过一条长为 $L$ ，两岸之间有 $n$ 块石头的河，最多只能跳 $m$ 次，求青蛙至少需要的跳跃能力（跳一次的最大长度）。<br>题解：可以发现，最后的答案具有单调性，即，若跳跃能力 $k$ 可以跳过这条河，那么跳跃能力 $x(x\geq k)$ 一定能跳过这条河。<br>由此，使用二分答案可以解决，代码如下：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">500010</span>;</div><div class="line"><span class="keyword">int</span> a[N];</div><div class="line"><span class="keyword">int</span> L,n,m;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> l)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> cnt=<span class="number">0</span>,pre=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n+<span class="number">1</span>;) &#123;</div><div class="line">        <span class="keyword">while</span> (pre+l&gt;=a[i]&amp;&amp;i&lt;=n+<span class="number">1</span>) i++;</div><div class="line">        pre=a[i<span class="number">-1</span>];</div><div class="line">        <span class="keyword">if</span> (++cnt&gt;m) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">bs</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">while</span> (l&lt;r) &#123;</div><div class="line">        <span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> (check(m)) r=m;</div><div class="line">        <span class="keyword">else</span> l=m+<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> l;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;L,&amp;n,&amp;m)!=EOF) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">        sort(a+<span class="number">1</span>,a+<span class="number">1</span>+n);</div><div class="line">        <span class="keyword">int</span> l=L,r=L;a[n+<span class="number">1</span>]=L;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n+<span class="number">1</span>;i++)</div><div class="line">            l=min(a[i]-a[i<span class="number">-1</span>],l);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,bs(l,r));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h3 id="Different-GCD-Subarray-Query"><a href="#Different-GCD-Subarray-Query" class="headerlink" title="Different GCD Subarray Query"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5869" target="_blank" rel="noopener">Different GCD Subarray Query</a></h3><p>题意：给出 $N$ 个数，每次询问 $[L,R]$ 的子数组（类似子串）的 $GCD$ 有多少不同的值。<br>题解：做这题首先要知道一个结论，值为 $X$ 的数连续地跟其它数进行 $GCD$ 运算，最多出现 $\left \lfloor log_{2}{X}\right \rfloor$ 个不同的数。这个结论刚听到可能很新鲜，但其实很好理解，$GCD$ 运算之后出现了新的 $X$ ，说明新的 $X$ 至少少了一个质因子。而质因子最多有 $\lfloor log_{2}{X}\rfloor$ 个。所以 $GCD$ 个数最多也就 $NlogMAX$ 个，可以用 $map$ 来保存。<br>其次还需要知道一个技巧，如何统计一个区间内不同的数。对于一个右端点 $R$ ,我们保存能使得值 $X$ 出现的最大的 $L$ ，并在 $L$ 这一点加1，那么每次询问的答案就是 $[L,R]$ 的区间和。<br>这样把所有询问离线并排序以后，就可以从 $1$ 开始枚举右端点，代码如下：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100010</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX=<span class="number">1000010</span>;</div><div class="line"><span class="built_in">map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; d[<span class="number">2</span>],cur;</div><div class="line"><span class="keyword">struct</span> query &#123;</div><div class="line">    <span class="keyword">int</span> l,r,id;</div><div class="line">    <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> query&amp; b) <span class="keyword">const</span> &#123;</div><div class="line">        <span class="keyword">return</span> r&lt;b.r;</div><div class="line">    &#125;</div><div class="line">&#125; q[N];</div><div class="line"><span class="keyword">int</span> a[N],ans[N];</div><div class="line"><span class="keyword">int</span> c[MAX];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (!b) <span class="keyword">return</span> a;</div><div class="line">    <span class="keyword">return</span> gcd(b,a%b);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">ins</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> d)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (;x&lt;MAX;x+=x&amp;(-x)) &#123;</div><div class="line">        c[x]+=d;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (!x) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (;x&gt;<span class="number">0</span>;x-=x&amp;(-x)) &#123;</div><div class="line">        res+=c[x];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> n,m;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m)!=EOF) &#123;</div><div class="line">        d[<span class="number">0</span>].clear();</div><div class="line">        d[<span class="number">1</span>].clear();</div><div class="line">        cur.clear();</div><div class="line">        <span class="built_in">memset</span>(c,<span class="number">0</span>,<span class="keyword">sizeof</span>(c));</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;q[i].l,&amp;q[i].r);</div><div class="line">            q[i].id=i;</div><div class="line">        &#125;</div><div class="line">        sort(q+<span class="number">1</span>,q+<span class="number">1</span>+m);</div><div class="line">        <span class="keyword">int</span> now=<span class="number">1</span>,pre=<span class="number">0</span>,k=<span class="number">1</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="built_in">map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;::iterator it=d[pre].begin();it!=d[pre].end();it++) &#123;</div><div class="line">                <span class="keyword">int</span> x=gcd(a[i],it-&gt;first);</div><div class="line">                d[now][x]=max(d[now][x],it-&gt;second);</div><div class="line">            &#125;</div><div class="line">            d[now][a[i]]=i;</div><div class="line">            <span class="keyword">for</span> (<span class="built_in">map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;::iterator it=d[now].begin();it!=d[now].end();it++) &#123;</div><div class="line">                <span class="keyword">int</span> x=it-&gt;first;</div><div class="line">                <span class="keyword">if</span> (cur.count(x)&amp;&amp;cur[x]&lt;(it-&gt;second)) &#123;</div><div class="line">                    ins(cur[x],<span class="number">-1</span>);</div><div class="line">                    ins(it-&gt;second,<span class="number">1</span>);</div><div class="line">                    cur[x]=it-&gt;second;</div><div class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!cur.count(x)) &#123;</div><div class="line">                    ins(it-&gt;second,<span class="number">1</span>);</div><div class="line">                    cur[x]=it-&gt;second;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            d[pre].clear();</div><div class="line">            swap(pre,now);</div><div class="line">            <span class="keyword">for</span> (;k&lt;=m&amp;&amp;q[k].r==i;k++) &#123;</div><div class="line">                ans[q[k].id]=query(q[k].r)-query(q[k].l<span class="number">-1</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans[i]);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h3 id="The-kth-great-number"><a href="#The-kth-great-number" class="headerlink" title="The kth great number"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=4006" target="_blank" rel="noopener">The kth great number</a></h3><p>题意：给 $n$ 个操作，支持插入和求第 $k$ 大。<br>题解：一定要认真读题！这道题目的 $k$ 是一开始就给定的，是不会变的！<br>理解了这一点这就是一道水题，代码如下：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> n,k;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;k)!=EOF) &#123;</div><div class="line">        priority_queue&lt; <span class="keyword">int</span>,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;,greater&lt;<span class="keyword">int</span>&gt; &gt; Q;</div><div class="line">        <span class="keyword">while</span> (n--) &#123;</div><div class="line">            <span class="keyword">char</span> s[<span class="number">5</span>];</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>,s);</div><div class="line">            <span class="keyword">if</span> (s[<span class="number">0</span>]==<span class="string">'I'</span>) &#123;</div><div class="line">                <span class="keyword">int</span> x;</div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</div><div class="line">                Q.push(x);</div><div class="line">                <span class="keyword">if</span> (Q.size()&gt;k) Q.pop();</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,Q.top());</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h3 id="Dave"><a href="#Dave" class="headerlink" title="Dave"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=4007" target="_blank" rel="noopener">Dave</a></h3><p>题意：在二维平面上给 $N$ 个不重合的点，问边长为 $R$ 的正方形最多能包含多少个点（包含边界）<br>题解：因为这一题 $1\leq N\leq 1000$ ，所以只要枚举每个点作为左下角的情况就行了（为什么？）<br>如果 $1\leq N\leq 10000$ ，那么可以用扫描线+线段树的解法。先离散化，并将所有点按照 $x$ $y$ 两个关键字从小到大排序，我们想象垂直于 $x$ 轴有两条间距为 $R$ 的直线，这两条线不断的向右移动，右边的一些点会进入，左边的一些点会退出。那要怎么统计呢？这里要用到一个奇妙的处理，把每一个点向上延伸 $R$ 产生的这条线段加到线段树，也就是区间加1，最后只要每次统计从最低到最高的每个点的最大值就行了（为什么？）<br>这个做法听起来很简单，不过由于离散化等原因，很容易写错（WA3 = =），代码如下：<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div></pre></td><td class="code"><pre><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">using namespace std;</div><div class="line"></div><div class="line">#define lson l,m,rt&lt;&lt;1</div><div class="line">#define rson m+1,r,rt&lt;&lt;1|1</div><div class="line"></div><div class="line">const int N=1010;</div><div class="line">typedef long long ll;</div><div class="line">struct point &#123;</div><div class="line">    int x,y,ix,iy;</div><div class="line">    bool operator &lt; (const point&amp; b) &#123;</div><div class="line">        return ix&lt;b.ix;</div><div class="line">    &#125;</div><div class="line">&#125; p[N];</div><div class="line">int qx[N],qy[N];</div><div class="line">ll add[N&lt;&lt;2],sum[N&lt;&lt;2];</div><div class="line">int n,r,cntx,cnty;</div><div class="line"></div><div class="line">void push_up(int rt)</div><div class="line">&#123;</div><div class="line">    sum[rt]=max(sum[rt&lt;&lt;1],sum[rt&lt;&lt;1|1]);</div><div class="line">&#125;</div><div class="line"></div><div class="line">void push_down(int rt)</div><div class="line">&#123;</div><div class="line">    if (add[rt]) &#123;</div><div class="line">        add[rt&lt;&lt;1] += add[rt];</div><div class="line">        add[rt&lt;&lt;1|1] += add[rt];</div><div class="line">        sum[rt&lt;&lt;1] += add[rt];</div><div class="line">        sum[rt&lt;&lt;1|1] += add[rt];</div><div class="line">        add[rt] = 0;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">void update(int L,int R,int d,int l,int r,int rt)</div><div class="line">&#123;</div><div class="line">    if (L&lt;=l&amp;&amp;r&lt;=R) &#123;</div><div class="line">        add[rt]+=d;</div><div class="line">        sum[rt]+=d;</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line">    push_down(rt);</div><div class="line">    int m=(l+r)&gt;&gt;1;</div><div class="line">    if (L&lt;=m) update(L,R,d,lson);</div><div class="line">    if (m&lt;R) update(L,R,d,rson);</div><div class="line">    push_up(rt);</div><div class="line">&#125;</div><div class="line"></div><div class="line">ll query(int L,int R,int l,int r,int rt)</div><div class="line">&#123;</div><div class="line">    if (L&lt;=l&amp;&amp;r&lt;=R) &#123;</div><div class="line">        return sum[rt];</div><div class="line">    &#125;</div><div class="line">    push_down(rt);</div><div class="line">    int m=(l+r)&gt;&gt;1;</div><div class="line">    ll res=0;</div><div class="line">    if (L&lt;=m) res=max(res,query(L,R,lson));</div><div class="line">    if (m&lt;R) res=max(res,query(L,R,rson));</div><div class="line">    return res;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int ins(int k,int d)</div><div class="line">&#123;</div><div class="line">    int i;</div><div class="line">    for (i=k;i&lt;=n&amp;&amp;p[i].ix==p[k].ix;i++) &#123;</div><div class="line">        int pos=upper_bound(qy+1,qy+cnty+1,p[i].y+r)-qy-1;</div><div class="line">        update(p[i].iy,pos,d,1,cnty,1);</div><div class="line">    &#125;</div><div class="line">    return i;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    while (scanf("%d%d",&amp;n,&amp;r)!=EOF) &#123;</div><div class="line">        cntx=cnty=0;</div><div class="line">        for (int i=1;i&lt;=n;i++) &#123;</div><div class="line">            scanf("%d%d",&amp;p[i].x,&amp;p[i].y);</div><div class="line">            qx[++cntx]=p[i].x;</div><div class="line">            qy[++cnty]=p[i].y;</div><div class="line">        &#125;</div><div class="line">        sort(qx+1,qx+cntx+1);</div><div class="line">        sort(qy+1,qy+cnty+1);</div><div class="line">        cntx=unique(qx+1,qx+cntx+1)-qx-1;</div><div class="line">        cnty=unique(qy+1,qy+cnty+1)-qy-1;</div><div class="line">        for (int i=1;i&lt;=n;i++) &#123;</div><div class="line">            p[i].ix=lower_bound(qx+1,qx+cntx+1,p[i].x)-qx;</div><div class="line">            p[i].iy=lower_bound(qy+1,qy+cnty+1,p[i].y)-qy;</div><div class="line">        &#125;</div><div class="line">        sort(p+1,p+n+1);</div><div class="line">        memset(sum,0,sizeof(sum));</div><div class="line">        memset(add,0,sizeof(add));</div><div class="line">        int ans=0;</div><div class="line">        for (int i=1,k=1;i&lt;=n;) &#123;</div><div class="line">            while (k&lt;=n&amp;&amp;p[k].x-p[i].x&lt;=r) &#123;</div><div class="line">                k=ins(k,1);</div><div class="line">            &#125;</div><div class="line">            ans=max((ll)ans,sum[1]);</div><div class="line">            i=ins(i,-1);</div><div class="line">        &#125;</div><div class="line">        printf("%d\n",ans);</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h3 id="Weak-Pair"><a href="#Weak-Pair" class="headerlink" title="Weak Pair"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5877" target="_blank" rel="noopener">Weak Pair</a></h3><p>题意：一棵树的每个节点有一个非负权值，如果 $u$ 是 $v$ 的祖先($u\neq v$)，并且两点的权值的积 $a_u*a_v\leq k$ ，则称它们为”Weak Pair”。求”Weak Pair”的数目。<br>题解：由于树中任意一个节点的祖先都在同一条链上，所以只需要考虑如何快速的求出一条链上的”Weak Pair”。这题有很多解法，我想到的是将祖先都插入到树状数组，那么在 $u$ 这一点，答案就加上 $x\leq \frac{k}{a_u}$ 的个数。<br>考虑到权值范围很大，要用离散化，并且要注意 $a_u=0$ 的情况，代码如下：<br>【还有一点就是，题目给的是明确的父子关系，但是没有给根，一定要自己找，WA3 = =<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e5</span>+<span class="number">5</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX=<span class="number">2</span>*N;</div><div class="line"><span class="keyword">const</span> <span class="keyword">long</span> <span class="keyword">long</span> INF=<span class="number">1L</span>L&lt;&lt;<span class="number">33</span>;</div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> a[N],b[N],A[<span class="number">2</span>*N];</div><div class="line"><span class="keyword">int</span> c[MAX];</div><div class="line"><span class="keyword">struct</span> edge &#123;</div><div class="line">    <span class="keyword">int</span> go,next;</div><div class="line">&#125; eg[<span class="number">2</span>*N];</div><div class="line"><span class="keyword">int</span> last[N];</div><div class="line"><span class="keyword">bool</span> vis[N];</div><div class="line"><span class="keyword">int</span> tot;</div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> ans;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">adde</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></div><div class="line">&#123;</div><div class="line">    eg[++tot].go=y;</div><div class="line">    eg[tot].next=last[x];</div><div class="line">    last[x]=tot;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">ins</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> d)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (;x&lt;MAX;x+=x&amp;(-x)) &#123;</div><div class="line">        c[x]+=d;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">long</span> <span class="keyword">long</span> res=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (;x;x-=x&amp;(-x)) &#123;</div><div class="line">        res+=c[x];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span></span></div><div class="line">&#123;</div><div class="line">    ans+=query(b[x]);</div><div class="line">    ins(a[x],<span class="number">1</span>);</div><div class="line"><span class="comment">//    printf("%d %d\n",x,ans);</span></div><div class="line">    </div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=last[x];i;i=eg[i].next) &#123;</div><div class="line">        dfs(eg[i].go);</div><div class="line">    &#125;</div><div class="line">    ins(a[x],<span class="number">-1</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T,n;</div><div class="line">    <span class="keyword">long</span> <span class="keyword">long</span> k;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">while</span> (T--) &#123;</div><div class="line">        tot=<span class="number">0</span>;</div><div class="line">        <span class="built_in">memset</span>(last,<span class="number">0</span>,<span class="keyword">sizeof</span>(last));</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%lld"</span>,&amp;n,&amp;k);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123; </div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;a[i]);</div><div class="line">            A[i]=a[i];</div><div class="line">            <span class="keyword">if</span> (a[i]==<span class="number">0</span>) &#123;</div><div class="line">                A[n+i]=b[i]=INF;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> &#123;</div><div class="line">                A[n+i]=b[i]=k/a[i];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        sort(A+<span class="number">1</span>,A+<span class="number">1</span>+n*<span class="number">2</span>);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            a[i]=lower_bound(A+<span class="number">1</span>,A+<span class="number">1</span>+<span class="number">2</span>*n,a[i])-A;</div><div class="line">            b[i]=lower_bound(A+<span class="number">1</span>,A+<span class="number">1</span>+<span class="number">2</span>*n,b[i])-A;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="keyword">sizeof</span>(vis));</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++) &#123;</div><div class="line">            <span class="keyword">int</span> x,y;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</div><div class="line">            adde(x,y);</div><div class="line">            vis[y]=<span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> i=<span class="number">1</span>;</div><div class="line">        <span class="keyword">while</span> (i&lt;=n&amp;&amp;vis[i]) i++;</div><div class="line">        ans=<span class="number">0</span>;</div><div class="line">        dfs(i);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,ans);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hdu 4417 Super Mario</title>
      <link href="/blog/2016/09/08/hdu4417/"/>
      <content type="html"><![CDATA[<p>这题很明显离线做比较水。。。</p><p>把询问和每块砖都按高度排序<br>不断向树状数组插入满足条件的砖的位置<br>对每个询问求在 [L,R]  的区间和<br>也就是把前缀和减一减<br>【树状数组不能有0，所以传参之前我都加了1。。。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e5</span>+<span class="number">5</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX=N;</div><div class="line"><span class="keyword">struct</span> query &#123;</div><div class="line">    <span class="keyword">int</span> l,r,h,id;</div><div class="line">&#125; q[N];</div><div class="line"><span class="keyword">struct</span> brick &#123;</div><div class="line">    <span class="keyword">int</span> h,pos;</div><div class="line">&#125; a[N];</div><div class="line"><span class="keyword">int</span> c[MAX],ans[N];</div><div class="line"></div><div class="line"><span class="keyword">struct</span> cmp &#123;</div><div class="line">    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; </div><div class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">const</span> T &amp;a,<span class="keyword">const</span> T &amp;b)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> a.h&lt;b.h;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">ins</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> d)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (;x&lt;MAX;x+=x&amp;(-x)) &#123;</div><div class="line">        c[x]+=d;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (;x;x-=x&amp;(-x)) &#123;</div><div class="line">        res+=c[x];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T,n,m;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;=T;t++) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i].h);</div><div class="line">            a[i].pos=i;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;q[i].l,&amp;q[i].r,&amp;q[i].h);</div><div class="line">            q[i].id=i;</div><div class="line">        &#125;</div><div class="line">        sort(a,a+n,cmp());</div><div class="line">        sort(q,q+m,cmp());</div><div class="line">        <span class="keyword">int</span> k=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++) &#123;</div><div class="line">            <span class="keyword">for</span> (;k&lt;n&amp;&amp;a[k].h&lt;=q[i].h;k++)</div><div class="line">                ins(a[k].pos+<span class="number">1</span>,<span class="number">1</span>);</div><div class="line">            ans[q[i].id]=query(q[i].r+<span class="number">1</span>)-query(q[i].l<span class="number">-1</span>+<span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"Case %d:\n"</span>,t);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++)</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans[i]);</div><div class="line">        <span class="built_in">memset</span>(c,<span class="number">0</span>,<span class="keyword">sizeof</span>(c));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>poj 3690 Constellations</title>
      <link href="/blog/2016/09/08/poj3690/"/>
      <content type="html"><![CDATA[<p>最近在翻 ICPC online 的题。。。<br>终于找到一个能做的水题结果WA了七八次。。。<br>可能我果然还是不会C/C++语言吧  OTZ</p><p>行状压和列状压都行吧。。。<br>然后我就暴力枚举右下角<br>感觉写的比能查到的题解好看一点。。。<br><img src="http://img.blog.csdn.net/20160908104400692" alt=""> 【差点就全服最短了2333333</p><p>goto 什么的要谨慎。。。不行就写成函数嘛</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">int</span> n,m,t,p,q;</div><div class="line"><span class="keyword">char</span> <span class="built_in">map</span>[<span class="number">1010</span>][<span class="number">1010</span>],pat[<span class="number">60</span>][<span class="number">60</span>];</div><div class="line">ll ro[<span class="number">1010</span>][<span class="number">1010</span>],mat[<span class="number">60</span>];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> cas=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d%d%d%d"</span>,&amp;n,&amp;m,&amp;t,&amp;p,&amp;q),n) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>,<span class="built_in">map</span>[i]);</div><div class="line">        ll mask=(<span class="number">1L</span>L&lt;&lt;q)<span class="number">-1</span>;<span class="comment">//就因为只写了1没写LL结果WA了两小时。。。 </span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</div><div class="line">            ll tmp=<span class="number">0</span>;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m;j++)</div><div class="line">                ro[i][j]=tmp=((tmp&lt;&lt;<span class="number">1</span>)|(<span class="built_in">map</span>[i][j]==<span class="string">'*'</span>))&amp;mask;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line">WCON:</div><div class="line">        <span class="keyword">while</span> (t--) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;p;i++)</div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%s"</span>,pat[i]);</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;p;i++) &#123;</div><div class="line">                ll tmp=<span class="number">0</span>;</div><div class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;q;j++)</div><div class="line">                    tmp=(tmp&lt;&lt;<span class="number">1</span>)|(pat[i][j]==<span class="string">'*'</span>);</div><div class="line">                mat[i]=tmp;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=p<span class="number">-1</span>;i&lt;n;i++) &#123;</div><div class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j=q<span class="number">-1</span>;j&lt;m;j++)</div><div class="line">                    <span class="keyword">if</span> (ro[i][j]==mat[p<span class="number">-1</span>]) &#123;</div><div class="line">                        <span class="keyword">int</span> k=<span class="number">0</span>;</div><div class="line">                        <span class="keyword">while</span> (k&lt;p&amp;&amp;ro[i-k][j]==mat[p<span class="number">-1</span>-k]) k++;</div><div class="line">                        <span class="keyword">if</span> (k==p) &#123;</div><div class="line">                            ans++;</div><div class="line">                            <span class="keyword">goto</span> WCON;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"Case %d: %d\n"</span>,++cas,ans);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hdu 5828 Rikka with Sequence</title>
      <link href="/blog/2016/08/20/hdu5828/"/>
      <content type="html"><![CDATA[<p>多校8的一道题。。。 【看标题识出题人 ←_←<br>非常蛋疼的一道题，官方题解根本不知道在说什么，标程写得跟坨屎一样= =<br>先贴一份比赛中菊苣AC的代码</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/************************************************</span></div><div class="line"> *Author        :mathon</div><div class="line"> *Email         :luoxinchen96@gmail.com</div><div class="line">*************************************************/</div><div class="line"><span class="meta">#include <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#include <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#include <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#include <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#include <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#include <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#include <span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="meta">#include <span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#include <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#include <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#include <span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#include <span class="meta-string">&lt;ctime&gt;</span></span></div><div class="line"><span class="meta">#include <span class="meta-string">&lt;stack&gt;</span></span></div><div class="line">using namespace std;</div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pii;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ull;</div><div class="line"><span class="meta">#define xx first</span></div><div class="line"><span class="meta">#define yy second</span></div><div class="line"><span class="meta">#define pr(x) cout <span class="meta-string">&lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; " "</span></span></div><div class="line">#define prln(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; endl</div><div class="line">#define lson l, m, rt &lt;&lt; 1</div><div class="line">#define rson m+1, r, rt &lt;&lt; 1|1</div><div class="line">template&lt;class T&gt; inline T lowbit(T x) &#123; return x &amp; (-x); &#125;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e5</span> + <span class="number">5</span>;</div><div class="line"><span class="keyword">int</span> A[MAXN];</div><div class="line"><span class="keyword">struct</span> SegT &#123;</div><div class="line">    ll sum[MAXN&lt;&lt;<span class="number">2</span>];</div><div class="line">    ll is_same[MAXN&lt;&lt;<span class="number">2</span>], lazy[MAXN&lt;&lt;<span class="number">2</span>];</div><div class="line">    <span class="keyword">void</span> init() &#123;</div><div class="line">        memset(sum, <span class="number">0</span>, <span class="keyword">sizeof</span>(sum));</div><div class="line">        memset(is_same, <span class="number">0</span>, <span class="keyword">sizeof</span>(is_same));</div><div class="line">        memset(lazy, <span class="number">0</span>, <span class="keyword">sizeof</span>(lazy));</div><div class="line">    &#125;</div><div class="line">   </div><div class="line">    <span class="keyword">void</span> push_up(<span class="keyword">int</span> rt) &#123;</div><div class="line">        <span class="keyword">if</span>(is_same[rt &lt;&lt; <span class="number">1</span>] &amp;&amp; is_same[rt &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] &amp;&amp;</div><div class="line">                is_same[rt &lt;&lt; <span class="number">1</span>] == is_same[rt &lt;&lt; <span class="number">1</span> | <span class="number">1</span>]) &#123;</div><div class="line">            is_same[rt] = is_same[rt &lt;&lt; <span class="number">1</span>];</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            is_same[rt] = <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        sum[rt] = sum[rt &lt;&lt; <span class="number">1</span>] + sum[rt &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">void</span> push_down(<span class="keyword">int</span> rt, <span class="keyword">int</span> l, <span class="keyword">int</span> r) &#123;</div><div class="line">        <span class="keyword">int</span> m = (l + r) &gt;&gt; <span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span>(is_same[rt]) &#123;</div><div class="line">            is_same[rt &lt;&lt; <span class="number">1</span>] = is_same[rt];</div><div class="line">            is_same[rt &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = is_same[rt];</div><div class="line">            sum[rt &lt;&lt; <span class="number">1</span>] = is_same[rt] * (m - l + <span class="number">1</span>);</div><div class="line">            sum[rt &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = is_same[rt] * (r - m);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            lazy[rt &lt;&lt; <span class="number">1</span>] += lazy[rt];</div><div class="line">            lazy[rt &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] += lazy[rt];</div><div class="line">            sum[rt &lt;&lt; <span class="number">1</span>] += lazy[rt] * (m - l + <span class="number">1</span>);</div><div class="line">            sum[rt &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] += lazy[rt] * (r - m);</div><div class="line">            lazy[rt] = <span class="number">0</span>;</div><div class="line">            <span class="keyword">if</span>(is_same[rt &lt;&lt; <span class="number">1</span>]) &#123;</div><div class="line">                is_same[rt &lt;&lt; <span class="number">1</span>] += lazy[rt &lt;&lt; <span class="number">1</span>];</div><div class="line">                lazy[rt &lt;&lt; <span class="number">1</span>] = <span class="number">0</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(is_same[rt &lt;&lt; <span class="number">1</span> | <span class="number">1</span>]) &#123;</div><div class="line">                is_same[rt &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] += lazy[rt &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</div><div class="line">                lazy[rt &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = <span class="number">0</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">void</span> build(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> rt) &#123;</div><div class="line">        <span class="keyword">if</span>(l == r) &#123;</div><div class="line">            sum[rt] = A[l];</div><div class="line">            is_same[rt] = A[l];</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> m = (l + r) &gt;&gt; <span class="number">1</span>;</div><div class="line">        build(lson);</div><div class="line">        build(rson);</div><div class="line">        push_up(rt);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">void</span> update1(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> x, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> rt) &#123;</div><div class="line">        <span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R) &#123;</div><div class="line">            sum[rt] += (ll)x * (r - l + <span class="number">1</span>);</div><div class="line">            <span class="keyword">if</span>(is_same[rt]) &#123;</div><div class="line">                is_same[rt] += x;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                lazy[rt] += x;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> m = (l + r) &gt;&gt; <span class="number">1</span>;</div><div class="line">        push_down(rt, l, r);</div><div class="line">        <span class="keyword">if</span>(m &gt;= L) update1(L, R, x, lson);</div><div class="line">        <span class="keyword">if</span>(m &lt; R) update1(L, R, x, rson);</div><div class="line">        push_up(rt);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">void</span> update2(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> rt) &#123;</div><div class="line">        <span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R &amp;&amp; is_same[rt]) &#123;</div><div class="line">            is_same[rt] = sqrt(is_same[rt]);</div><div class="line">            sum[rt] = is_same[rt] * (r - l + <span class="number">1</span>);</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> m = (l + r) &gt;&gt; <span class="number">1</span>;</div><div class="line">        push_down(rt, l, r);</div><div class="line">        <span class="keyword">if</span>(m &gt;= L) update2(L, R, lson);</div><div class="line">        <span class="keyword">if</span>(m &lt; R) update2(L, R, rson);</div><div class="line">        push_up(rt);</div><div class="line">    &#125;</div><div class="line">    ll query(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> rt) &#123;</div><div class="line">        <span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R) &#123;</div><div class="line">            <span class="keyword">return</span> sum[rt];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> m = (l + r) &gt;&gt; <span class="number">1</span>;</div><div class="line">        push_down(rt, l, r);</div><div class="line">        ll res = <span class="number">0</span>;</div><div class="line">        <span class="keyword">if</span>(m &gt;= L) res += query(L, R, lson);</div><div class="line">        <span class="keyword">if</span>(m &lt;  R) res += query(L, R, rson);</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;seg;</div><div class="line"><span class="keyword">int</span> main(<span class="keyword">void</span>) &#123;</div><div class="line"><span class="meta">#ifdef MATHON</span></div><div class="line">    <span class="comment">//freopen("in.txt", "r", stdin);</span></div><div class="line">    <span class="comment">//freopen("out.txt", "w", stdout);</span></div><div class="line"><span class="meta">#endif</span></div><div class="line">    <span class="keyword">int</span> T; scanf(<span class="string">"%d"</span>, &amp;T);</div><div class="line">    <span class="keyword">while</span>(T--) &#123;</div><div class="line">        <span class="keyword">int</span> n, m;</div><div class="line">        scanf(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</div><div class="line">        seg.init();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</div><div class="line">            scanf(<span class="string">"%d"</span>, &amp;A[i]);</div><div class="line">        &#125;</div><div class="line">        seg.build(<span class="number">1</span>, n, <span class="number">1</span>);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</div><div class="line">            <span class="keyword">int</span> op;</div><div class="line">            scanf(<span class="string">"%d"</span>, &amp;op);</div><div class="line">            <span class="keyword">if</span>(op == <span class="number">1</span>) &#123;</div><div class="line">                <span class="keyword">int</span> l, r, x;</div><div class="line">                scanf(<span class="string">"%d%d%d"</span>, &amp;l, &amp;r, &amp;x);</div><div class="line">                seg.update1(l, r, x, <span class="number">1</span>, n, <span class="number">1</span>);</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(op == <span class="number">2</span>) &#123;</div><div class="line">                <span class="keyword">int</span> l, r;</div><div class="line">                scanf(<span class="string">"%d%d"</span>, &amp;l, &amp;r);</div><div class="line">                seg.update2(l, r, <span class="number">1</span>, n, <span class="number">1</span>);</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(op == <span class="number">3</span>) &#123;</div><div class="line">                <span class="keyword">int</span> l, r;</div><div class="line">                scanf(<span class="string">"%d%d"</span>, &amp;l, &amp;r);</div><div class="line">                ll res = seg.query(l, r, <span class="number">1</span>, n, <span class="number">1</span>);</div><div class="line">                printf(<span class="string">"%lld\n"</span>, res);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>这个用到了记录相等的一段，这样就不用每次更新到叶子了。<br>赛后题库里的数据加强了，我用这种方法T了好几遍只好去找新的姿势了。。。</p><p>应该考虑一下记相等到底有什么作用。<br>实际上就是把区间开根号变成了类似于区间增减的东西，然后就可以 lazy-tag。<br>所以用一种奇怪的姿势（反正我是想不出来。。。）<br>对于一个区间，可以分为三种情况：</p><ul><li>区间内所有数相等</li><li>区间内极差大于1</li><li>区间内极差等于1</li></ul><p>情况1开根号相当于区间增减。<br>情况2会转化成3或者1。<br>情况3，开根号后极差可能相等，转化为情况1。<br>如果仍然差一，此时显然区间所有数减去了相同的值。</p><p>又是改了一遍才过。。。OTZ<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#include &lt;cstdio&gt;</span></div><div class="line"><span class="meta">#include &lt;cstring&gt;</span></div><div class="line"><span class="meta">#include &lt;cmath&gt;</span></div><div class="line"><span class="meta">#include &lt;algorithm&gt;</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="title">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> lson l,m,rt&lt;&lt;1</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rson m+1,r,rt&lt;&lt;1|1</span></div><div class="line">typedef <span class="keyword">long</span> <span class="keyword">long</span> llint;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e5</span>+<span class="number">5</span>;</div><div class="line">llint <span class="keyword">add</span>[N&lt;&lt;<span class="number">2</span>],sum[N&lt;&lt;<span class="number">2</span>];</div><div class="line">llint mav[N&lt;&lt;<span class="number">2</span>],miv[N&lt;&lt;<span class="number">2</span>];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_up</span>(<span class="params"><span class="keyword">int</span> rt</span>)</span></div><div class="line">&#123;</div><div class="line">    sum[rt]=sum[rt&lt;&lt;<span class="number">1</span>]+sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</div><div class="line">    mav[rt]=max(mav[rt&lt;&lt;<span class="number">1</span>],mav[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</div><div class="line">    miv[rt]=min(miv[rt&lt;&lt;<span class="number">1</span>],miv[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_down</span>(<span class="params"><span class="keyword">int</span> rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r</span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">add</span>[rt]) &#123;</div><div class="line">        <span class="keyword">add</span>[rt&lt;&lt;<span class="number">1</span>]+=<span class="keyword">add</span>[rt];</div><div class="line">        <span class="keyword">add</span>[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]+=<span class="keyword">add</span>[rt];</div><div class="line">        mav[rt&lt;&lt;<span class="number">1</span>]+=<span class="keyword">add</span>[rt];</div><div class="line">        mav[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]+=<span class="keyword">add</span>[rt];</div><div class="line">        miv[rt&lt;&lt;<span class="number">1</span>]+=<span class="keyword">add</span>[rt];</div><div class="line">        miv[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]+=<span class="keyword">add</span>[rt];</div><div class="line">        <span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">        sum[rt&lt;&lt;<span class="number">1</span>]+=<span class="keyword">add</span>[rt]*(m-l+<span class="number">1</span>);</div><div class="line">        sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]+=<span class="keyword">add</span>[rt]*(r-m);</div><div class="line">        <span class="keyword">add</span>[rt]=<span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span>(<span class="params"><span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt</span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (l==r) &#123;</div><div class="line">        scanf(<span class="string">"%I64d"</span>,&amp;sum[rt]);</div><div class="line">        mav[rt]=miv[rt]=sum[rt];</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">    build(lson);</div><div class="line">    build(rson);</div><div class="line">    push_up(rt);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span>(<span class="params"><span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> d,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt</span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (L&lt;=l&amp;&amp;r&lt;=R) &#123;</div><div class="line">        <span class="keyword">add</span>[rt]+=d;</div><div class="line">        mav[rt]+=d;</div><div class="line">        miv[rt]+=d;</div><div class="line">        sum[rt]+=(llint)d*(r-l+<span class="number">1</span>);</div><div class="line">        <span class="keyword">return</span> ;</div><div class="line">    &#125;</div><div class="line">    push_down(rt,l,r);</div><div class="line">    <span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span> (L&lt;=m) update(L,R,d,lson);</div><div class="line">    <span class="keyword">if</span> (m&lt;R) update(L,R,d,rson);</div><div class="line">    push_up(rt);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">update2</span>(<span class="params"><span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt</span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (L&lt;=l&amp;&amp;r&lt;=R) &#123;</div><div class="line">        <span class="keyword">if</span> (mav[rt]==miv[rt]) &#123;</div><div class="line">            llint tmp=sqrt(mav[rt]);</div><div class="line">            <span class="keyword">add</span>[rt]+=tmp-mav[rt];</div><div class="line">            sum[rt]+=(llint)(tmp-mav[rt])*(r-l+<span class="number">1</span>);</div><div class="line">            mav[rt]=miv[rt]=tmp;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125; <span class="function"><span class="keyword">else</span> <span class="title">if</span> (<span class="params">mav[rt]==miv[rt]+<span class="number">1</span></span>) </span>&#123;</div><div class="line">            llint t1=sqrt(mav[rt]);</div><div class="line">            llint t2=sqrt(miv[rt]);</div><div class="line">            <span class="keyword">if</span> (t1==t2+<span class="number">1</span>) &#123;</div><div class="line">                <span class="keyword">add</span>[rt]+=t1-mav[rt];</div><div class="line">                sum[rt]+=(llint)(t1-mav[rt])*(r-l+<span class="number">1</span>);</div><div class="line">                mav[rt]=t1;</div><div class="line">                miv[rt]=t2;</div><div class="line">                <span class="keyword">return</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    push_down(rt,l,r);</div><div class="line">    <span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span> (L&lt;=m) update2(L,R,lson);</div><div class="line">    <span class="keyword">if</span> (m&lt;R) update2(L,R,rson);</div><div class="line">    push_up(rt);</div><div class="line">&#125;</div><div class="line"><span class="function">llint <span class="title">query</span>(<span class="params"><span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt</span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (L&lt;=l&amp;&amp;r&lt;=R) &#123;</div><div class="line">        <span class="keyword">return</span> sum[rt];</div><div class="line">    &#125;</div><div class="line">    push_down(rt,l,r);</div><div class="line">    <span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">    llint res=<span class="number">0</span>;</div><div class="line">    <span class="keyword">if</span> (L&lt;=m) res+=query(L,R,lson);</div><div class="line">    <span class="keyword">if</span> (m&lt;R) res+=query(L,R,rson);</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    memset(<span class="keyword">add</span>,<span class="number">0</span>,<span class="keyword">sizeof</span>(<span class="keyword">add</span>));</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T,n,m;</div><div class="line">    scanf(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">while</span> (T--) &#123;</div><div class="line">        scanf(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">        init();</div><div class="line">        build(<span class="number">1</span>,n,<span class="number">1</span>);</div><div class="line">        <span class="keyword">int</span> k,l,r,x;</div><div class="line">        <span class="keyword">while</span> (m--) &#123;</div><div class="line">            scanf(<span class="string">"%d%d%d"</span>,&amp;k,&amp;l,&amp;r);</div><div class="line">            <span class="keyword">if</span> (k==<span class="number">1</span>) &#123;</div><div class="line">                scanf(<span class="string">"%d"</span>,&amp;x);</div><div class="line">                update(l,r,x,<span class="number">1</span>,n,<span class="number">1</span>);</div><div class="line">            &#125; <span class="function"><span class="keyword">else</span> <span class="title">if</span> (<span class="params">k==<span class="number">2</span></span>) </span>&#123;</div><div class="line">                update2(l,r,<span class="number">1</span>,n,<span class="number">1</span>);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                printf(<span class="string">"%I64d\n"</span>,query(l,r,<span class="number">1</span>,n,<span class="number">1</span>));</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>啥？你说复杂度？<br>我怎么知道= =</p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>NOIP2012 借教室(classroom)</title>
      <link href="/blog/2016/08/19/codevs1217/"/>
      <content type="html"><![CDATA[<p><a href="http://codevs.cn/problem/1217/" target="_blank" rel="noopener">http://codevs.cn/problem/1217/</a><br>唉。。。即使是以我四年后的水平也要改一遍。。。<br>太菜了。。。<br>应该是目前最常用的线段树写法。。。确实是能过的</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#include &lt;iostream&gt;</span></div><div class="line"><span class="meta">#include &lt;cstdio&gt;</span></div><div class="line"><span class="meta">#include &lt;cstring&gt;</span></div><div class="line"><span class="meta">#include &lt;algorithm&gt;</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="title">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e6</span>;</div><div class="line"><span class="keyword">int</span> lazy[<span class="number">4</span>*N],mv[<span class="number">4</span>*N];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">read</span>(<span class="params"><span class="keyword">int</span> &amp;x</span>)</span></div><div class="line">&#123;</div><div class="line"><span class="keyword">char</span> c=getchar();</div><div class="line">x=<span class="number">0</span>;</div><div class="line"><span class="keyword">while</span> (!(c&gt;=<span class="string">'0'</span>&amp;&amp;c&lt;=<span class="string">'9'</span>||c==<span class="string">'-'</span>)) c=getchar();</div><div class="line"><span class="keyword">int</span> f=<span class="number">0</span>;</div><div class="line"><span class="keyword">if</span> (c==<span class="string">'-'</span>) &#123;</div><div class="line">f=<span class="number">1</span>;</div><div class="line">c=getchar();</div><div class="line">&#125;</div><div class="line"><span class="keyword">while</span> (c&gt;=<span class="string">'0'</span>&amp;&amp;c&lt;=<span class="string">'9'</span>) &#123;</div><div class="line">x=x*<span class="number">10</span>+c-<span class="string">'0'</span>;</div><div class="line">c=getchar();</div><div class="line">&#125;</div><div class="line"><span class="keyword">if</span> (f) x=-x;</div><div class="line">&#125;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> lson l,m,rt&lt;&lt;1</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rson m+1,r,rt&lt;&lt;1|1</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_up</span>(<span class="params"><span class="keyword">int</span> rt</span>)</span></div><div class="line">&#123;</div><div class="line">mv[rt]=min(mv[rt&lt;&lt;<span class="number">1</span>],mv[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span>(<span class="params"><span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt</span>)</span></div><div class="line">&#123;</div><div class="line"><span class="keyword">if</span> (l==r) &#123;</div><div class="line">read(mv[rt]);</div><div class="line"><span class="keyword">return</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">build(lson);</div><div class="line">build(rson);</div><div class="line">push_up(rt);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_down</span>(<span class="params"><span class="keyword">int</span> rt</span>)</span></div><div class="line">&#123;</div><div class="line">lazy[rt&lt;&lt;<span class="number">1</span>]+=lazy[rt];</div><div class="line">mv[rt&lt;&lt;<span class="number">1</span>]+=lazy[rt];</div><div class="line">lazy[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]+=lazy[rt];</div><div class="line">mv[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]+=lazy[rt];</div><div class="line">lazy[rt]=<span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">update</span>(<span class="params"><span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt,<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> del</span>)</span></div><div class="line">&#123;</div><div class="line"><span class="keyword">if</span> (L&lt;=l&amp;&amp;r&lt;=R) &#123;</div><div class="line">lazy[rt]+=del;</div><div class="line">mv[rt]+=del;</div><div class="line"><span class="keyword">if</span> (mv[rt]&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line">push_down(rt);</div><div class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line"><span class="keyword">bool</span> res=<span class="literal">true</span>;</div><div class="line"><span class="keyword">if</span> (L&lt;=m) res&amp;=update(lson,L,R,del);</div><div class="line"><span class="keyword">if</span> (!res) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line"><span class="keyword">if</span> (m&lt;R) res&amp;=update(rson,L,R,del);</div><div class="line">push_up(rt);</div><div class="line"><span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> n,m;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">check</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; i++) &#123;</div><div class="line"><span class="keyword">int</span> d,s,t;</div><div class="line">read(d);</div><div class="line">read(s);</div><div class="line">read(t);</div><div class="line"><span class="keyword">if</span> (!update(<span class="number">1</span>,n,<span class="number">1</span>,s,t,-d)) <span class="keyword">return</span> i;</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> m+<span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">read(n);</div><div class="line">read(m);</div><div class="line">build(<span class="number">1</span>,n,<span class="number">1</span>);</div><div class="line"><span class="keyword">int</span> ans=check();</div><div class="line"><span class="keyword">if</span> (ans&gt;m) puts(<span class="string">"0"</span>);</div><div class="line"><span class="function"><span class="keyword">else</span> <span class="title">printf</span>(<span class="params"><span class="string">"-1\n%d\n"</span>,ans</span>)</span>;</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>下面介绍一种据说是正解的方法（不超纲的方法）：<br>二分答案，判断的时候用差分的思想。<br>差分……差分你懂吧？</p><p>好巧啊，我也不懂……<br>引用一下别人的解释：<br><img src="http://img.blog.csdn.net/20160819101342508" alt=""><br>懂了吧……</p><p>mdzz  看代码吧！<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e6</span>+<span class="number">10</span>;</div><div class="line"><span class="keyword">int</span> n,m;</div><div class="line"><span class="keyword">int</span> a[N],s[N],t[N],d[N],mk[N];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">(<span class="keyword">int</span> &amp;x)</span></span></div><div class="line">&#123;</div><div class="line"><span class="keyword">char</span> c=getchar();</div><div class="line">x=<span class="number">0</span>;</div><div class="line"><span class="keyword">while</span> (!(c&gt;=<span class="string">'0'</span>&amp;&amp;c&lt;=<span class="string">'9'</span>||c==<span class="string">'-'</span>)) c=getchar();</div><div class="line"><span class="keyword">int</span> f=<span class="number">0</span>;</div><div class="line"><span class="keyword">if</span> (c==<span class="string">'-'</span>) &#123;</div><div class="line">f=<span class="number">1</span>;</div><div class="line">c=getchar();</div><div class="line">&#125;</div><div class="line"><span class="keyword">while</span> (c&gt;=<span class="string">'0'</span>&amp;&amp;c&lt;=<span class="string">'9'</span>) &#123;</div><div class="line">x=x*<span class="number">10</span>+c-<span class="string">'0'</span>;</div><div class="line">c=getchar();</div><div class="line">&#125;</div><div class="line"><span class="keyword">if</span> (f) x=-x;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> x)</span></span></div><div class="line">&#123;</div><div class="line"><span class="built_in">memset</span>(mk,<span class="number">0</span>,<span class="keyword">sizeof</span>(mk));</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=x;i++)</div><div class="line">mk[s[i]]+=d[i],mk[t[i]+<span class="number">1</span>]-=d[i];</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>,sum=<span class="number">0</span>;i&lt;=n;i++)&#123;</div><div class="line">sum+=mk[i];</div><div class="line"><span class="keyword">if</span> (sum&gt;a[i]) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line"><span class="keyword">int</span> l=<span class="number">1</span>,r=m+<span class="number">1</span>;</div><div class="line"><span class="keyword">while</span> (l&lt;r)&#123;</div><div class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line"><span class="keyword">if</span> (!check(m)) r=m;</div><div class="line"><span class="keyword">else</span> l=m+<span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> r;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">read(n);</div><div class="line">read(m);</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">read(a[i]);</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</div><div class="line">read(d[i]),read(s[i]),read(t[i]);</div><div class="line"><span class="keyword">int</span> ans=solve();</div><div class="line"><span class="keyword">if</span> (ans&gt;m) <span class="built_in">puts</span>(<span class="string">"0"</span>);</div><div class="line"><span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"-1\n%d\n"</span>,ans);</div><div class="line"><span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>线段树的复杂度是 O(MlogN)<br>二分答案+差分的复杂度是 O(NlogM)<br>【其实一样<br>当然线段树常数肯定大一点，比赛的时候也有很多人线段树没满分。<br>不得不说 NOIP 确实是希望你巧妙的解题的。。。</p><p>最后再推荐一下 codevs 。。。<br>大家公认的界面领先 OJ 界至少3年 ←_←<br>还有一个原因就是。。。对蒟蒻比较友好。。。</p><p>=========2018/02/22=========<br>codevs 太凉了，推荐一下洛谷，贼6好吧</p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>PPC-字符统计</title>
      <link href="/blog/2016/08/18/PPC-%E5%AD%97%E7%AC%A6%E7%BB%9F%E8%AE%A1/"/>
      <content type="html"><![CDATA[<h3 id="字符统计"><a href="#字符统计" class="headerlink" title="字符统计"></a><a href="http://ctf.idf.cn/index.php?g=game&amp;m=article&amp;a=index&amp;id=37" target="_blank" rel="noopener">字符统计</a></h3><p>题意也没什么好说的，主要是找了找 python 好用的 http 请求库，发现 requests 真的是很好用啊。。。还有就是一定要<strong>看清楚表单</strong>。。。</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> requests</div><div class="line"><span class="keyword">import</span> re</div><div class="line"><span class="keyword">import</span> string</div><div class="line">    </div><div class="line">cookie = &#123;<span class="string">'Cookie'</span> : <span class="string">'wctf_think_language=zh-CN;PHPSESSID=ltbxxxxxxxxxxxxxxxxxxxxfl6'</span>&#125;</div><div class="line">r = requests.<span class="built_in">get</span>(<span class="string">"http://ctf.idf.cn/game/pro/37/"</span>, cookies = cookie)</div><div class="line">    </div><div class="line"><span class="built_in">text</span> = re.search(r<span class="string">'&lt;hr /&gt;\s(.*)\s&lt;hr /&gt;'</span>, r.<span class="built_in">text</span>, re.S).group(<span class="number">1</span>)</div><div class="line">res = <span class="string">""</span></div><div class="line">res += <span class="built_in">str</span>(<span class="built_in">text</span>.count(<span class="string">'w'</span>))</div><div class="line">res += <span class="built_in">str</span>(<span class="built_in">text</span>.count(<span class="string">'o'</span>))</div><div class="line">res += <span class="built_in">str</span>(<span class="built_in">text</span>.count(<span class="string">'l'</span>))</div><div class="line">res += <span class="built_in">str</span>(<span class="built_in">text</span>.count(<span class="string">'d'</span>))</div><div class="line">res += <span class="built_in">str</span>(<span class="built_in">text</span>.count(<span class="string">'y'</span>))</div><div class="line"><span class="built_in">print</span>(res)</div><div class="line">    </div><div class="line">payload = &#123;<span class="string">'anwser'</span>:res&#125;</div><div class="line">r = requests.post(<span class="string">"http://ctf.idf.cn/game/pro/37/"</span>, cookies = cookie, data = payload)</div><div class="line"><span class="built_in">print</span>(r.<span class="built_in">text</span>)</div></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> CTF </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Crypto-特殊的日子</title>
      <link href="/blog/2016/08/18/Crypto-%E7%89%B9%E6%AE%8A%E7%9A%84%E6%97%A5%E5%AD%90/"/>
      <content type="html"><![CDATA[<h3 id="特殊的日子"><a href="#特殊的日子" class="headerlink" title="特殊的日子"></a><a href="http://ctf.idf.cn/index.php?g=game&amp;m=article&amp;a=index&amp;id=50" target="_blank" rel="noopener">特殊的日子</a></h3><blockquote><p>每个人的一生中都会或多或少有那么几个对自己很重要的日子，比如对于我来说，这一天就很重要。<br>答案格式wctf{日期} //友情提示，此题需要<strong>暴力破解</strong>，但只是爆破这段密文，不是爆破这个网站。。 = =！</p></blockquote><p>题目里提到了暴力破解，应该就是某种不可逆的编码了。我学的比较少，刚开始想到的当然是MD5，不过MD5显然没有8位的。。。</p><p>后来直接查了查，发现是CRC32，这个好像在压缩包那边看到过。然后写程序，CRC32在 zlib 里面。</p><blockquote><h5 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h5><p>To generate the same numeric value across all Python versions and platforms, use crc32(data) &amp; 0xffffffff. If you are only using the checksum in packed binary format this is not necessary as the return value is the correct 32-bit binary representation regardless of sign.</p></blockquote><figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> zlib</div><div class="line"></div><div class="line">def crc32(para):</div><div class="line">    res = zlib.crc32(para.encode(<span class="string">"utf-8"</span>))</div><div class="line">    <span class="keyword">return</span> <span class="string">'%x'</span> % (res &amp; <span class="number">0xffffffff</span>)</div><div class="line"></div><div class="line">std = <span class="string">'4D1FAE0B'</span>.lower()</div><div class="line"><span class="keyword">for</span> <span class="built_in">year</span> in range(<span class="number">1500</span>,<span class="number">3000</span>):</div><div class="line">    <span class="keyword">for</span> <span class="built_in">month</span> in range(<span class="number">1</span>,<span class="number">13</span>):</div><div class="line">        <span class="keyword">for</span> <span class="built_in">day</span> in range(<span class="number">1</span>,<span class="number">32</span>):</div><div class="line">            syyyy = <span class="built_in">str</span>(<span class="built_in">year</span>)</div><div class="line">            smm = <span class="built_in">str</span>(<span class="built_in">month</span>)</div><div class="line">            <span class="keyword">if</span> <span class="built_in">month</span> &lt; <span class="number">10</span>:</div><div class="line">                smm = <span class="string">'0'</span> + smm</div><div class="line">            sdd = <span class="built_in">str</span>(<span class="built_in">day</span>)</div><div class="line">            <span class="keyword">if</span> <span class="built_in">day</span> &lt; <span class="number">10</span>:</div><div class="line">                sdd = <span class="string">'0'</span> + sdd</div><div class="line">            now = syyyy + smm + sdd</div><div class="line">            <span class="keyword">if</span> crc32(now) == std:</div><div class="line">                <span class="built_in">print</span>(now)</div></pre></td></tr></table></figure><p>还看到有一种高端的写法：</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> zlib</div><div class="line">def crc32(st):</div><div class="line">    crc = zlib.crc32(st.encode(<span class="string">'utf-8'</span>))</div><div class="line">    <span class="keyword">if</span> crc &gt; <span class="number">0</span>:</div><div class="line">        <span class="keyword">return</span> <span class="string">"%x"</span> % (crc &amp; <span class="number">0xffffffff</span>)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">return</span> <span class="string">"%x"</span> % (crc &amp; <span class="number">0xffffffff</span>)</div><div class="line">    </div><div class="line">#生成年<span class="string">'1000'</span>~<span class="string">'3000'</span></div><div class="line"><span class="built_in">year</span> = [<span class="built_in">str</span>(i) <span class="keyword">for</span> i in range(<span class="number">1000</span>,<span class="number">3000</span>)]</div><div class="line">#生成月<span class="string">'01'</span>~<span class="string">'12'</span></div><div class="line"><span class="built_in">month</span> = [<span class="built_in">str</span>(i) <span class="keyword">if</span> i&gt;<span class="number">9</span> <span class="keyword">else</span> (<span class="built_in">str</span>(<span class="number">0</span>)+<span class="built_in">str</span>(i)) <span class="keyword">for</span> i in range(<span class="number">1</span>,<span class="number">13</span>) ]</div><div class="line">#生成日<span class="string">'01'</span>~<span class="string">'31'</span></div><div class="line"><span class="built_in">day</span> = [<span class="built_in">str</span>(i) <span class="keyword">if</span> i&gt;<span class="number">9</span> <span class="keyword">else</span> (<span class="built_in">str</span>(<span class="number">0</span>)+<span class="built_in">str</span>(i)) <span class="keyword">for</span> i in range(<span class="number">1</span>,<span class="number">32</span>) ]</div><div class="line">    </div><div class="line">#题目所给</div><div class="line">realDate = <span class="string">'4D1FAE0B'</span>.lower()</div><div class="line">    </div><div class="line">#穷举日期计算crc32值然后与题目给的值进行比对，一样则输出</div><div class="line"><span class="keyword">import</span> itertools</div><div class="line">#利用itertools.product()生成年月日的所有组合</div><div class="line"><span class="keyword">for</span> item in itertools.product(<span class="built_in">year</span>,<span class="built_in">month</span>,<span class="built_in">day</span>):</div><div class="line">    date = <span class="string">''</span>.<span class="built_in">join</span>(item)</div><div class="line">    <span class="keyword">if</span> crc32(date) == realDate:</div><div class="line">        <span class="built_in">print</span>(date)</div></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> CTF </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>欧拉函数为什么是积性函数</title>
      <link href="/blog/2016/07/20/EulerFunction/"/>
      <content type="html"><![CDATA[<p><span style="color: red">以下全文转载自：<a href="http://www.cnblogs.com/372465774y/archive/2012/10/16/2726282.html" target="_blank" rel="noopener">http://www.cnblogs.com/372465774y/archive/2012/10/16/2726282.html</a></span></p><p>//    下面是百度上找的错误证明<br>函数的积性即：若m,n互质，则φ(mn)=φ(m)φ(n)。由“m,n互质”可知m,n无公因数，</p><p>所以φ(m)φ(n)=m(1-1/p1)(1-1/p2)(1-1/p3)…(1-1/pn)·n(1-1/p1’)(1-1/p2’)(1-1/p3’)…(1-1/pn’)，//这里已经用了计算公式，而计算公式是需要先有积性前提才推导的</p><p>其中p1,p2,p3…pn为m的质因数，p1’,p2’,p3’…pn’为n的质因数，而m,n无公因数，<br>所以p1,p2,p3…pn，p1’,p2’,p3’…pn’互不相同，<br>所以p1,p2,p3…pn，p1’,p2’,p3’…pn’均为mn的质因数且为mn质因数的全集，<br>所以φ(mn)=mn(1-1/p1)(1-1/p2)(1-1/p3)…(1-1/pn)(1-1/p1’)(1-1/p2’)(1-1/p3’)…(1-1/pn’)，<br>所以φ(mn)=φ(m)φ(n)。</p><p>查了很多资料会证明了：<br>// 证明：<br>  在证明前先了解下以下知识：<br>  (a,b)代表最大公约数,[a,b]代表最小公倍数<br>  m|(a-b) &lt;=&gt; a≡b (mod m)<br>  a=pm+r  (0&lt;=r&lt;m)<br>  b=qm+r  (0&lt;=r<m) 由此可以推出：="" 性质1：a≡a（mod="" m），（反身性）="" 这个性质很显然.因为a-a="0=m·0。" 性质2：若a≡b（mod="" m），那么b≡a（mod="" m），（对称性）。="" 性质3：若a≡b（mod="" m），b≡c（mod="" m），那么a≡c（mod="" m），（传递性）。="" 性质4：若a≡b（mod="" m），c≡d（mod="" m），那么a±c≡b±d（mod="" m），（可加减性）。="" 性质5：若a≡b（mod="" m），那么ac≡bd（mod="" m）（可乘性）。="" 证明="" ：m|(a-b)="" ,="" m|(c-d)="" 设="" a-b="km" c-d="lm" (ac-bd)="klm^2+(b+d)m" =="">m|(ac-bd)<br>  性质6：若a≡b（mod m），那么an≡bn（mod m），（其中n为自然数）。<br>   证明 ： m|(a-b) =&gt; m|n*(a-b)<br>  性质7：若ac≡bc（mod m），（c，m）=1，那么a≡b（mod m），（记号（c，m）表示c与m的最大公约数）。<br>   证明 ： m|c(a-b) d=(m,c)=&gt;m/d|(a-b) =&gt; a≡b（mod m/d）=&gt;当 d=1时 即（c,m）=1上面结论成立<br>  性质8：若a≡b（mod m），那么a的n次方和b的n次方也对于m同余<br>   证明 ：a^n-b^k=(a-b)(a^(n-1)+a^(n-2)b…..b^(n-1)) +m|(a-b) ==&gt;m|(a^n-b^n)<br>  性质9：若 a≡b(mod m1) a≡b(mod m2)…. a≡b(mod mi) 则 a≡b(mod [m1,m2,..mi])<br>   证明：m1 |(a-b) m2|(a-b) ..mi|(a-b)  =&gt;[m1,m2…mi]|(a-b) (因为 a-b里面含了 m集合的所有因子和每个因子的最大个数)<br>  推论 m1,m2..mi两两互质 则 a≡b(mod m1m2..mi);</m)></p><p>  定义 ： X 代表 M 简化剩余系  个数φ(M)  （有关简化正余系含义，百度吧）<br>         Y 代表 N 简化剩余系   个数φ(N)<br>         xi 代表X的元素 yj代表Y的元素 </p><p>  下面证明： φ(MN)=φ(M)φ(N) 其中(M,N)=1<br>  我们需要证明<br>  A: (xiN+yjM,MN)=1, xiN+yjM 代表的集合元素两两不在同一剩余系里 这样个数肯定是φ(M)φ(N)个了<br>  B: xiN+yM 可以代表 MN 的简化剩余系每个元素</p><p>  证明 A：<br>   (xi,M)=1; =&gt; (xiN,M)=1; =&gt;(xiN+yiM,M)=1;    ….1<br>   (yi,N)=1; =&gt; (yiM,N)=1; =&gt;(yiM+xiN,N)=1;    ….2<br>  由 1,2 =&gt; (xiN+yiM,MN)=1;    上面都是由数之间互质才推导的</p><p>   xiN+yjM≡xkN+ylM (mod MN)<br>=&gt; xiN+yjM≡xkN+ylM (mod M)<br>=&gt; xiN≡xkN (mod M)<br> 由性质 7 =&gt;xi≡xk (mod M)=&gt; i=k 同理 j=l 所以 xiN+yjM 代表的集合元素两两不在同一剩余系里<br>  证明 B:<br>   设 Z 是MN 的简化剩余系的集合的任意某个元素<br>   由于 （N,M）=1 =&gt; 存在 x0,y0 –&gt; Mx0+Ny0=1  =&gt; Mx0Z+Ny0Z=Z<br>   =&gt;存在 x,y –&gt; Mx+Ny=Z ……1<br>   (Z,MN)=1; =&gt;(Mx+Ny,M)=1; =&gt;(Ny,M)=1; =&gt;(y,M)=1 =&gt;y≡xi (mod M) 同理可得 x=yj (mod N)<br>    y≡xi (mod M) =&gt; Ny≡Nxi (mod MN) 同理 Mx=Myj (mod MN)<br>  根据同余性质<br>  Ny+Mx=Myj+Nxi (mod MN)<br>  =&gt; Z=xiN+yjM  (mod MN)<br>  所 MN 的简化剩余系每个元素都可以用 xiN+yjM表示<br> 综上 xiN+yjM 有 φ(M)φ(N)个元素  且每个与 MN互质，xiN+yjM两两不在同一剩余系里面<br> 可得 φ(MN)=φ(M)φ(N) 其中(M,N)=1<br><a href="http://www.cppblog.com/RyanWang/archive/2009/07/19/90512.aspx?opt=admin" target="_blank" rel="noopener">http://www.cppblog.com/RyanWang/archive/2009/07/19/90512.aspx?opt=admin</a></p><p>E(x)表示比x小的且与x互质的正整数的个数。</p><ul><li>若p是素数，E(p)=p-1。</li><li>E(p^k)=p^k-p^(k-1)=(p-1)*p^(k-1)<br>证：令n=p^k,小于n的正整数数共有n-1即(p^k-1)个,其中与p不质的数共[p^(k-1)-1]个(分别为1*p,2*p,3*p…p(p^(k-1)-1))。<br>所以E(p^k)=(p^k-1)-(p^(k-1)-1)=p^k-p^(k-1).得证。</li><li>若ab互质，则E(a*b)=E(a)*E(b)，欧拉函数是积性函数.</li><li>对任意数n都可以唯一分解成n=p1^a1*p2^a2*p3^a3*…*pn^an(pi为素数).<br>则E(n)=E(p1^a1)*E(p2^a2)*E(p3^a3)*…*E(pn^an)<br>   =(p1-1)*p1^(a1-1)*(p2-1)*p2^(a2-1)*…*(pn-1)*pn^(an-1)<br>   =(p1^a1*p2^a2*p3^a3*…*pn^an)*[(p1-1)*(p2-1)*(p3-1)*…*(pn-1)]/(p1*p2*p3*…*pn)<br>   =n<em>(1-1/p1)</em>(1-1/p2)<em>…</em>(1-1/pn)<ul><li>E(p^k)    =(p-1)<em>p^(k-1)=(p-1)</em>p^(k-2)<em>p<br>E(p^(k-1))=(p-1)</em>p^(k-2)<br>-&gt;当k&gt;1时，E(p^k)=E(p<em>p^(k-1))=E(p^(k-1))</em>p.<br>(当k=1时，E(p)=p-1.)<br>由上式: 设P是素数，<br>若p是x的约数，则E(x<em>p)=E(x)</em>p.<br>若p不是x的约数，则E(x<em>p)=E(x)</em>E(p)=E(x)*(p-1).<br>小记：</li></ul></li></ul><p>d=gcd(a,b);  a’d=a b’d=b (a’,b’)=1<br>要 d=gcd (b,a-qb) 要成立  则(b’,a’-qb’)=1<br>证明 (b’,a’-qb’)=1;<br>假设 b’,a’-qb’ 不互质 则 设 b’=kd’ a’-qb’=ld’ d’&gt;1<br>则 a’-q(kd’)=ld’ a’=(qk+l)d’ 与 (a’,b’)矛盾 </p><p>问题描述：<br>给出一个N，求1..N中与N互质的数的和</p><p>if gcd(n,i)=1 then gcd(n,n-i)=1 (1&lt;=i&lt;=n)</p><p>反证法：<br>如果存在K!=1使gcd(n,n-i)=k,那么(n-i)%k==0<br>而n%k=0<br>那么必须保证i%k=0<br>k是n的因子,如果i%k=0那么gcd(n,i)=k,矛盾出现;<br>于是问题变的非常简单<br>ANS=N<em>phi(N)/2<br>i,n-i总是成对出现，并且和是n<br>于是可能就有人问了，如果存在n-i=i那不是重复计算？<br>答案是不会<br>因为:<br>n=2</em>i-&gt;i=n/2<br>1.如果n是奇数，那么n!=2<em>i,自然也不存在n-i=i和重复计算之说<br>2.如果n是偶数,n=2</em>i成立,gcd(n,n/2)必然为n的一个因子,这个因子为1当且仅当n==2<br>于是对于n&gt;2的偶数，绝对不存在gcd(n,n/2)=1所以更别说什么重复计算了<br>对于n==2<br>ans=2*1/2=1<br>正好也满足</p>]]></content>
      
      
        <tags>
            
            <tag> ACM </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
